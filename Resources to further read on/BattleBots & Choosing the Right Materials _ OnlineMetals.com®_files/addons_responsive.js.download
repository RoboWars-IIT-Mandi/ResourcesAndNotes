
window.feednami={},feednami.load=function(e,n){var o="https://api.feednami.com/api/v1",a=e;"object"==typeof e&&(a=e.url);var t="url="+encodeURIComponent(a);e.format&&(t+="&include_xml_document&format="+e.format),e.includeXml&&(t+="&include_xml_document");var d=o+"/feeds/load?"+t;if(window.XDomainRequest){var l=document.createElement("script"),c="jsonp_callback_"+(new Date).getTime()+"_"+Math.round(1e6*Math.random());d+="&jsonp_callback="+c,window[c]=function(e){n(e),document.body.removeChild(l),window[c]=null;try{delete window[c];}catch(o){}},l.src=d,document.body.appendChild(l);}else{var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&n(JSON.parse(i.responseText));},i.open("GET",d),i.send();}},feednami.loadGoogleFormat=function(e,n){return feednami.load({url:e,format:"google",includeXml:!0},n);};

function _autoload(){$.each(ACC,function(section,obj){if($.isArray(obj._autoload)){$.each(obj._autoload,function(key,value){if($.isArray(value)){if(value[1]){ACC[section][value[0]]()}else{if(value[2]){ACC[section][value[2]]()}}}else{ACC[section][value]()}})}})}
$(function(){_autoload()});

ACC.global={_autoload:["initCustomPlugins","dropdownToggle","matchheight","validation","viewProjectList","pagination","customSelectDropdown","qtyboxCheckbox","weightErrorMessage","pdpThumbnailImages","pdpscroll","accProfile","checkoutPage","pdpRating","customQuote","checkAllBoxes","footerAccordion","stickyNavigation","showAlloysLinks","footerResize","sortSizeSelector","numberWheel","windowScroll","expandRow","multiSelectCheckbox","disableRightClick","baseToolTip","liveChatSpinner","scrollToTop","listgrid","navLinkClick","hiddenContentSlot","updateDiscountpercent","hideShowQtyMsg","emarsysServiceWorker","zoomableImageInit"],spinnerLoad:function(spinnerAppend){spinnerAppend.find('.pre-loader').remove();spinnerAppend.find('.pre-loader-bg').remove();spinnerAppend.removeClass('pre-loader-relative');spinnerAppend.addClass('pre-loader-relative');spinnerAppend.append('<div class="pre-loader-bg"></div><div class="pre-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>');},spinnerRemove:function(spinnerAppend){spinnerAppend.find('.pre-loader').remove();spinnerAppend.find('.pre-loader-bg').remove();spinnerAppend.removeClass('pre-loader-relative');},liveChatSpinner:function(){var checkIframeLoadedInterval;if(sessionStorage.clickStatus==1&&sessionStorage.clickStatus!=null)
{var script=document.createElement("script");script.src='https://static.zdassets.com/ekr/snippet.js?key=b2a6aa55-7a74-49e1-8985-9d5936338454';script.type='text/javascript';script.id='ze-snippet';document.getElementsByTagName("head")[0].appendChild(script);}
$(document).on("click",".js-zendesk-chatlink",function(e){e.preventDefault();sessionStorage.setItem("clickStatus",1);var $this=$(this);ACC.global.spinnerLoad($('.chatloader'));var $thisClosest=$this.closest('.navbar-default');if(document.getElementById("ze-snippet")==null){var script=document.createElement("script");script.src='https://static.zdassets.com/ekr/snippet.js?key=b2a6aa55-7a74-49e1-8985-9d5936338454';script.type='text/javascript';script.id='ze-snippet';document.getElementsByTagName("head")[0].appendChild(script);checkIframeLoadedInterval=setInterval(checkIframeLoaded,250);checkIframeLoaded();}else{ACC.global.spinnerRemove($('.chatloader'));clearInterval(checkIframeLoadedInterval);zE.activate();}});function checkIframeLoaded(){var iframe_content=$('#launcher').contents();if(iframe_content.length>0){clearInterval(checkIframeLoadedInterval);setTimeout(function(){ACC.global.spinnerRemove($('.chatloader'));zE.activate();},5000);}}},initCustomPlugins:function(){if($('.confirm-success').length)
{setTimeout(function(){$('.confirm-success').remove()},ACC.config.messageTimeLimitsuccess);}
else{setTimeout(function(){$('.notification-success').remove()},ACC.config.messageTimeLimit);}
setTimeout(function(){$('.notification-error-mtr').remove()},ACC.config.messageTimeLimit);$(".module-carousel").owlCarousel({slideSpeed:300,items:1,nav:true,autoplay:false,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>']});$(".module-banner").each(function(){var $this=$(this);console.log("-"+$this.find('.module-banner__item').length);if($this.find('.module-banner__item').length>1){$this.owlCarousel({slideSpeed:300,items:1,loop:false,autoplay:false,nav:true});console.log("if");}});$('a[href^="#"]').on('click',function(event){let id=decodeURIComponent($(this).attr('href'));let elem=$(id).length?$(id):$('a[name="'+id.replace('#','')+'"').length?$('a[name="'+id.replace('#','')+'"'):undefined;let sHeight=$('header').height()+$('.BottomHeaderSlot').height();if(elem&&elem.length&&elem.offset().top!=0&&elem.hasClass('panel-collapse')){elem.addClass('in');$([document.documentElement,document.body]).animate({scrollTop:$(id).offset().top-sHeight},500);}else if(elem&&elem.length&&elem.offset().top!=0){$([document.documentElement,document.body]).animate({scrollTop:$(id).offset().top-sHeight},500);}});$(".recommended-products__section").owlCarousel({loop:true,nav:true,slideSpeed:300,autoplay:false,margin:20,responsive:{0:{items:1.5},600:{items:3.5},1000:{items:4.99}},navText:['<span class="glyphicon glyphicon-menu-left"></span>','<span class="glyphicon glyphicon-menu-right"></span>']});$(".explore-carousel").owlCarousel({nav:true,slideSpeed:300,autoplay:false,margin:20,responsive:{0:{items:1,loop:$('.explore-carousel .top-material__section').size()>1?true:false,},768:{items:3,loop:$('.explore-carousel .top-material__section').size()>3?true:false,},992:{items:4,loop:$('.explore-carousel .top-material__section').size()>4?true:false,}},navText:['<span class="glyphicon glyphicon-menu-left"></span>','<span class="glyphicon glyphicon-menu-right"></span>']});$(".explore-gallery-carousel").owlCarousel({nav:true,slideSpeed:300,autoplay:false,margin:30,dots:true,dotsEach:true,responsive:{0:{items:1,loop:$('.explore-gallery-carousel .top-material__section').size()>1?true:false,},768:{items:2,loop:$('.explore-gallery-carousel .top-material__section').size()>2?true:false,},990:{items:3,loop:$('.explore-gallery-carousel .top-material__section').size()>3?true:false,},1080:{items:3,loop:$('.explore-gallery-carousel .top-material__section').size()>4?true:false,}},navText:['<i class="fa fa-angle-left" aria-hidden="true"></i>','<i class="fa fa-angle-right" aria-hidden="true"></i>']});$('.continue-shopping').click(function(){$('.mini-cart').addClass('hide');setTimeout(function(){$('.mini-cart').removeClass('hide')},500);});$(document).ready(function($){$(".sidebar-menu").hide();setTimeout(function(){$(".sidebar-menu input[type='checkbox']").each(function(){$(this).prop('checked',false);});$(".sidebar-menu").show();},100);var alterClass=function(){$(".navbar-cart").on('click',function(){var ww=$(window).width();if(ww>=767&&ww<=1035){if(!$('#minicartComp').hasClass('nodropdown')){$('.navbar-cart > a').attr('data-toggle','dropdown');}}else{$('.navbar-cart > a').removeAttr('data-toggle');};});};$(window).resize(function(){alterClass();});alterClass();});enquire.register("screen and (min-width:768px)",{match:function(){$('.size-selector__table__data-list').mCustomScrollbar({});$('.mini-cart__item-list').mCustomScrollbar({});},unmatch:function(){$('.size-selector__table__data-list').mCustomScrollbar('destroy');}});$('.facet-products__accordion--section').mCustomScrollbar({});$('[data-toggle="popover"]').popover();},dropdownToggle:function(){$(".close-dropdown .dismiss-dropdown").click(function(e){e.preventDefault();$(".navbar-collapse").removeClass("in");})
$(".nav-dropdown").on('click',function(event){event.stopPropagation();})
if($('#back-to-top').length){var scrollTrigger=1000,backToTop=function(){var scrollTop=$(window).scrollTop();if($(window).scrollTop()+$(window).height()>$(document).height()-200){enquire.register("screen and (max-width:991px)",{match:function(){$('#back-to-top').addClass('show');},unmatch:function(){$('#back-to-top').removeClass('show');}});}else{$('#back-to-top').removeClass('show');}};backToTop();$(window).on('scroll',function(){backToTop();});$('#back-to-top').on('click',function(e){e.preventDefault();$('html,body').animate({scrollTop:0},700);});}
enquire.register("screen and (min-width:992px)",{match:function(){$('.footer-content__materials-section > a').on('click',function(e){e.preventDefault();});}});enquire.register("screen and (max-width:991px)",{match:function(){$('.footer-content__materials-section > a').off('click');}});$(".js-video-collection-link").click(function(e){e.preventDefault();var $this=$(this);var $thisHref=$this.attr('href');if($($thisHref).hasClass('in')){$("html, body").animate({scrollTop:$($thisHref).closest('.content-page__block_toggle').offset().top-20},1000);}else{$($thisHref).closest('.content-page__block_toggle').find('.content-page__block_toggle_title').trigger('click');$("html, body").animate({scrollTop:$($thisHref).closest('.content-page__block_toggle').offset().top-20},1000);}});},matchheight:function(){$('.productcontent .content-block').matchHeight();$('.popular-shape__content').matchHeight();$('.acc-dashboard__item').matchHeight();$('.match-height').matchHeight();$('.will-call-location .content-page__location').matchHeight();$(".product-compare__body__block").matchHeight();$(".video-collection__item").matchHeight();$(".orders-tab li a").matchHeight();},validation:function(){$('.form-addproduct .form-group-submit').on('click',function(){$('.customQuote-form .product-details__data').removeClass('hide');});$('.customQuote-form').validate({submitHandler:function(form){$('#contactusModal').modal('show');$('.contact-us .notification-error').addClass('hide');},});$('.signin-form').validate();$('.submitForm').validate();$('#forgotModal, #signupModal').on('hidden.bs.modal',function(){$('#signinModal').modal('show');});$('#forgotModal, #signupModal').on('shown.bs.modal',function(){$('body').addClass('modal-open');});$('#forgotModal').on('show.bs.modal',function(e){$('#signinModal').modal('hide');$('.signinModal').modal('hide');});$('.subcription-form').validate({onkeyup:false,rules:{email:{email:true}}});function isValidEmailAddress(emailAddress){var pattern=new RegExp(/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);return pattern.test(emailAddress);};$("#save-cart-email").on("blur",function(){if(!isValidEmailAddress($("#save-cart-email").val())){}
else{}});$("#multiple-email").on("blur",function(){if(!isValidEmailAddress($("#multiple-email").val())){}
else{}});},listgrid:function(){$(document).on("click",".grid",function(e){$('.grid').addClass('active');$('.list').removeClass('active');$('.similar-product__item').addClass('product-order__grid');$('.similar-product__item').removeClass('product-order__list');$('.similar-product__item').removeClass('col-sm-12');$('.similar-product__item').addClass('col-sm-4');$('.pagination-product').removeClass('col-sm-4');$('.pagination-product').addClass('col-sm-12');$('.similar-product__item_image').removeClass('col-sm-3');$('.similar-product__item_image').addClass('col-sm-12');$('.similar-product__item_text').removeClass('col-sm-6');$('.similar-product__item_text').addClass('col-sm-12');$('.tab-pane2 .similar-product__item_text2').removeClass('col-sm-8');$('.tab-pane2 .similar-product__item_text2').addClass('col-sm-12');$('.tab-pane1 .similar-product__item_text1').removeClass('col-sm-6');$('.tab-pane1 .similar-product__item_text1').addClass('col-sm-12');$('.tab-pane1 .similar-product__item_option').removeClass('col-sm-3');$('.tab-pane1 .similar-product__item_option').addClass('col-sm-12');$('.similar-product__item_option').removeClass('col-sm-4');$('.similar-product__item_option').addClass('col-sm-12');$('.plp-image-data-contaner').removeClass('col-sm-8');$('.plp-image-data-contaner').addClass('col-sm-12');e.preventDefault();});$('.facet-products__close__button').on('click',function(){$('.facet-products,.mylist-pl').css({"left":"-700px","transition":".8s"});$('.facet-products').removeAttr('style');});$(document).on("click",".list",function(e){$('.list').addClass('active');$('.grid').removeClass('active');$('.similar-product__item').removeClass('product-order__grid');$('.similar-product__item').removeClass('col-sm-4');$('.similar-product__item_image').removeClass('col-sm-12');$('.similar-product__item_image').addClass('col-sm-3');$('.similar-product__item_text').addClass('col-sm-6');$('.similar-product__item_text').removeClass('col-sm-12');$('.tab-pane2 .similar-product__item_text2').removeClass('col-sm-12');$('.tab-pane2 .similar-product__item_text2').addClass('col-sm-8');$('.tab-pane1 .similar-product__item_text1').removeClass('col-sm-12');$('.tab-pane1 .similar-product__item_text1').addClass('col-sm-6');$('.tab-pane1 .similar-product__item_option').removeClass('col-sm-12');$('.tab-pane1 .similar-product__item_option').addClass('col-sm-4');$('.similar-product__item_option').addClass('col-sm-4');$('.similar-product__item_option').removeClass('col-sm-12');$('.plp-image-data-contaner').addClass('col-sm-8');$('.plp-image-data-contaner').removeClass('col-sm-12');e.preventDefault();});$('body').on('click','.favourite_add',function(){var id=$(this).closest('.favourite_add').find('.changefavcolorglyphicon').attr('id');if(!$(this).hasClass('disabled')){if($('#'+id).length){$('.favourite_add').find('#'+id).find('.like-item-icon').toggleClass('fa-heart');}
else{$('.like-item-icon',this).toggleClass('fa-heart');}}});$('body').on('click','.favourite_add.un-fav',function(){var $this=$(this);if(!$this.hasClass('disabled')){var $thisClosest=$this.closest(".similar-product__item");$thisClosest.find(".add-to-list .error").removeClass("hide").addClass("show");$('.like-item-icon',this).toggleClass('fa-heart');}});$('.pdp-mainsection__item-favorites .favorites-un, .pdp-mainsection__image .add-to-list .btn-secondry').on('click',function(){if(!$(this).hasClass('disabled')){$('.pdp-mainsection__item-favorites').find(".error").removeClass("hide").addClass("show");}});$('.favourite-icon .glyphicon').on('click',function(){$(this).toggleClass('selected')});$('body').on('click','.main-breadcrumb__button',function(){$('.facet-products').css({"left":"0","padding":"0","background":"#fff","transition":".8s"});$(this).addClass('refine-result-open');$('.plp-overlay').css("display","block");});},viewProjectList:function(){$('.mylist__sec__btn').on('click',function(){$('.mylist-pl').css({"left":"0","top":"420px","padding":"0","background":"#fff","transition":".8s","height":"100%","border":"1px solid #B9BDC1"});});$('.facet-products__close__button').on('click',function(){$('.mylist-pl').css({"left":"-700px","transition":".8s"});$('.main-breadcrumb__button').removeClass('refine-result-open');$('.facet-products').removeAttr('style');$('.plp-overlay').css("display","none");});},pagination:function(){$('.similar-product__pagination_list li').on('click',function(e){$('.similar-product__pagination_list li').removeClass('active');$(this).addClass('active');});$('.top-breadcrumb ul li:last').on('click',function(e){});},customSelectDropdown:function(){$(".custom-select").each(function(e){var value=$(this).find("ul li.selected").html();var thisvalue=$(this).find("ul li.selected").attr('value');if(value!=undefined){$(this).find(".btn-select-input").val(thisvalue);}});$(".custom-select").on("click",function(e){e.preventDefault();var ul=$(this).find("ul");if(!$(this).hasClass("btn-disabled")){if($(this).hasClass("active")){if(ul.find("li").is(e.target)){var target=$(e.target);if(!target.hasClass('viewModal')&&!$(this).hasClass('readonly')){target.addClass("selected").siblings().removeClass("selected");var value=target.html();var thisvalue=target.attr('value');$(this).find(".btn-select-input").val(thisvalue);$(this).find(".btn-select-value").html(value);}}else if(ul.find("li .deals_variant_options").is(e.target)||ul.find("li .best_shipping_options").is(e.target)||ul.find("li .sale_price").is(e.target)||ul.find("li span").is(e.target)){var target=$(e.target).closest("li");if(!target.hasClass('viewModal')&&!$(this).hasClass('readonly')){target.addClass("selected").siblings().removeClass("selected");var value=target.html();var thisvalue=target.attr('value');$(this).find(".btn-select-input").val(thisvalue);$(this).find(".btn-select-value").html(value);}}
ul.hide();$(this).removeClass("active");}
else{$('.custom-select').not(this).each(function(){$(this).removeClass("active").find("ul").hide();});ul.slideDown(300);$(this).addClass("active");}}});$(document).on('click',function(e){var target=$(e.target).closest(".custom-select");if(!target.length){$(".custom-select").removeClass("active").find("ul").hide();}});},qtyboxCheckbox:function(){$(".item-qty").keydown(function(event){if(event.keyCode==46||event.keyCode==8||event.keyCode==9||event.keyCode==27||event.keyCode==13||(event.keyCode==65&&event.ctrlKey===true)||(event.keyCode>=35&&event.keyCode<=39)){return;}
else{if(event.shiftKey||(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)){event.preventDefault();}}});$("[type=checkbox]").on("click",function(){if($(this).attr("checked")==undefined){$(this).attr("checked","checked");}else{$(this).attr("checked",false);}
if($("#checkbox-email").is(':checked')){$(".sharecart-modal__email-input").show();}else{$(".sharecart-modal__email-input").hide();}});},weightErrorMessage:function(){$('#weight-calculatorForm select').on('change',function(){var optionValue=$(this).val();$(this).attr("value",optionValue);});$('.total-weight__product').on('click',function(){$('#weight-calculatorForm select').each(function(){console.log('eachfunction');if($(this).val()==''){console.log('all inputs filled');$('.error-message').addClass('show');$('.error-message').removeClass('hide');}
else{$('.error-message').removeClass('show');$('.error-message').addClass('hide');console.log('theres an empty input');}});});},pdpThumbnailImages:function(){$(".pdp-mainsection__image-small a.img").click(function(e){var $this=$(this);var iframdId=$(".embed-responsive-item iframe");var videoId=$(".thumb-video img").attr("id");var videoUrl='https://www.youtube.com/embed/'+videoId;var $thisDataSrc=$this.data("src");var $thisParents=$this.parents(".pdp-mainsection__inner");$(".pdp-mainsection__image-small ul li").removeClass('active');$(this).parents('li').addClass('active');var href=$(this).attr("href");$(".pdp-mainsection__image-big img").attr("src",href);if($(this).hasClass("thumb-video")){$(".pdp-mainsection__image-big").hide();$(".pdp-mainsection__video").show();}else{$(".pdp-mainsection__video").hide();$(".pdp-mainsection__image-big").show();$(".pdp-mainsection__image-big img").attr("src",href);let img=$(".pdp-mainsection__image-big img");let maxZoom=img[0].naturalWidth>img[0].width?img[0].naturalWidth/img[0].width:1;const indicator=$(".zoomable .zoom-indicator");maxZoom<=1?"":indicator.removeClass("inactive");$(iframdId).attr('src',videoUrl);}
e.preventDefault();return false;});},pdpscroll:function(){$('.specifications__list li').on('click',function(){var mytab=$(this).attr('rel');$('.specifications__list li').removeClass('active');$('.tab-content .available-tab').removeClass('checked');$('.tab-content .available-tab .panel-collapse').removeClass('in');$('.tab-content .available-tab .panel-heading a').addClass('collapsed');$('.tab-content .available-tab[rel = '+mytab+']').addClass('checked');$('.tab-content .available-tab[rel = '+mytab+'] .panel-collapse').addClass('in').css('height','auto');$('.tab-content .available-tab[rel = '+mytab+'] .panel-heading a').removeClass('collapsed');$(this).addClass('active');});var thisTarget;$('.specifications__list li a').on('click',function(e){e.preventDefault();var $this=$(this);enquire.register("screen and (max-width:767px)",{match:function(){thisTarget=$('.tab-content').offset().top-180;}});enquire.register("screen and (min-width:768px)",{match:function(){thisTarget=$('.tab-content').offset().top-40;}});enquire.register("screen and (min-width:991px)",{match:function(){thisTarget=$('.tab-content').offset().top-20;}});if($this.parents('.specifications__list').hasClass('affix')){$('html, body').animate({scrollTop:thisTarget},500);}});$('.available-text').on('click',function(e){if($('#available-tab .panel-heading a').hasClass('collapsed')){$("#available-tab").find('.panel-heading a').trigger('click');}
var accordianHead=$('#available-tab').siblings().find('.panel-heading a');var OpenAccordian=accordianHead.not('.collapsed');if(OpenAccordian){OpenAccordian.trigger('click');}});$('.gallery-link a').on('click',function(e){if($('#gallery .panel-heading a').hasClass('collapsed')){$("#gallery").find('.panel-heading a').trigger('click');}
var accordianHead=$('#gallery').siblings().find('.panel-heading a');var OpenAccordian=accordianHead.not('.collapsed');if(OpenAccordian){OpenAccordian.trigger('click');}});$('.read-all-reviews-option, .write-review-option').on('click',function(e){if($('#reviews .panel-heading a').hasClass('collapsed')){$("#reviews").find('.panel-heading a').trigger('click');}
var accordianHead=$('#reviews').siblings().find('.panel-heading a');var OpenAccordian=accordianHead.not('.collapsed');if(OpenAccordian){OpenAccordian.trigger('click');}});$('.write-review-option').on('click',function(e){e.preventDefault();$('.specifications__list #tab-reviews').trigger('click');if($(".specifications").is(':visible')){var specificationsReview=$(".specifications").offset().top
$('html, body').animate({scrollTop:specificationsReview},0);}});$('.nav-tabs li').click(function(){if($(this).hasClass('tab2')){$('.search-no-result .main-breadcrumb__button').css("display","none");$('.js-resource-title').hide();}else{$('.search-no-result .main-breadcrumb__button').css("display","block");$('.js-resource-title').show();}})
$('.nav-tabs li a').on('shown.bs.tab',function(event){ACC.tkmaterialquickselector.sortClassMaterialList();});},accProfile:function(){$('.acc-profile__form_link').on('click',function(e){e.preventDefault();$('.acc-profile__info_form .acc-profile__form_view').hide();$('.acc-profile__info_form .acc-profile__form_edit').show();});$('.acc-profile__info_link').on('click',function(e){e.preventDefault();$(this).parents('.acc-profile__form').addClass('acc-profile__info_edit');});$('.acc-profile__info_button_cancel').on('click',function(e){e.preventDefault();$(this).parents('.acc-profile__form').removeClass('acc-profile__info_edit');});$('.mf-btn').click(function(){var text=$('#myfav').parent().parent().prev().children().find('.h4').text();var newtext=$('.text-replace').html().replace(text,'Search for favorite products');$('.text-replace').html(newtext);});$('.ml-btn').click(function(){var text=$('#mylist').parent().parent().prev().children().find('.h4').text();var newtext=$('.text-replace').html().replace(text,'Search for products in the list');$('.text-replace').html(newtext);});},footerAccordion:function(){$(".footer-content__materials-section h4, .footer-content__materials-section .footer-col-head").click(function(){if($(window).width()<992){$(this).next().slideToggle().prev().children("i").toggleClass("fa-angle-up");$(this).children("i").toggleClass("fa-angle-down");$(".footer-content__materials-links").not($(this).next()).slideUp().prev().children("i").removeClass("fa-angle-up").addClass("fa-angle-down");}});},stickyNavigation:function(){var height=parseInt($('.global-header').outerHeight())
if($(window).scrollTop()>2){if($('.sticky').length==0){$(".global-header").addClass("sticky");}}
$(window).scroll(function(){var scroll=$(window).scrollTop();let width=window.innerWidth;if(scroll){$(".global-header").addClass("sticky");$(".main-contentarea:first").css("margin-top",height);if($(".contact-section").length){$(".contact-section").fadeOut();$(".mobile-contact-section").fadeOut();$(".contact-section").closest('.BottomHeaderSlot').addClass("content-sticky");}}else{$(".global-header").removeClass("sticky");$(".main-contentarea").removeAttr('style');if($(".contact-section").length){width>767?$(".contact-section").fadeIn():$(".mobile-contact-section").fadeIn();$(".contact-section").closest('.BottomHeaderSlot').removeClass("content-sticky");}}});},showAlloysLinks:function(){$(".js-alloys-shape-mlp__links").on('click',function(e){e.preventDefault();var $this=$(this);if($this.hasClass("active")){$this.closest('.alloys-shape-mlp__data').find('.alloys-shape-mlp__links__all-links').addClass('hide');$this.removeClass('active');$this.find('.hide-more').addClass('hide');$this.find('.show-more').removeClass('hide');}else{$this.closest('.alloys-shape-mlp__data').find('.alloys-shape-mlp__links__all-links').removeClass('hide');$this.addClass('active');$this.find('.hide-more').removeClass('hide');$this.find('.show-more').addClass('hide');}});},footerResize:function(){$(window).resize(function(){if($(window).width()>991){$(".footer-content__materials-links").css("display","block");}
else
{$(".footer-content__materials-links").css("display","none");$(".footer-content__materials-section h4 i").removeClass("fa-angle-up").addClass("fa-angle-down")}});},checkoutPage:function(){$(document).on('submit','.acc-profile__employees-form form',function(e){e.preventDefault();$('#employeeExistsModal').modal('show');});$('.bill-same-shipp #sameaddress').click(function(){if($(this).prop("checked")==true){$('.logged_user #billing-addredd').hide();}
else if($(this).prop("checked")==false){$('.logged_user #billing-addredd').show();}});if($("#common_carrier_ups").is(":checked")){$(".billing-form__ups-account_view").show();$(".js_common_carrier").hide();}else{$(".billing-form__ups-account_view").hide();$(".js_common_carrier").show();}
if($("#commonCarrier").is(":checked")){$(".billing-form__common_carrier_view").show();$(".js_ups_account").hide();}else{$(".billing-form__common_carrier_view").hide();$(".js_ups_account").show();}
$("#common_carrier_ups").click(function(){if($(this).is(":checked")){$(".billing-form__ups-account_view").show();$(".js_common_carrier").hide();$("#carrierName").val("");$("#carrierAccountNumber").val("");$("#carrierCost").val("");}else{$(".billing-form__ups-account_view").hide();$(".js_common_carrier").show();}});$("#commonCarrier").click(function(){if($(this).is(":checked")){$(".billing-form__common_carrier_view").show();$(".js_ups_account").hide();$("#upsacc").val("");$("#upsZipcode").val("");}else{$(".billing-form__common_carrier_view").hide();$(".js_ups_account").show();}});$('.billing-form__ups-account .radio input:checked').closest('.billing-form__ups-account').find('.billing-form__ups-account_view').show();$('.billing-form__ups-account .radio input').change(function(){if($(this).is(':checked')){$('.billing-form__ups-account_view').hide();$(this).closest('.billing-form__ups-account').find('.billing-form__ups-account_view').show();}});function checkReviewSection(){if($('.checkout-step__review').is(':visible')){$('.checkout-page__summary .btn-primary').removeClass('disabled');$('.checkout-page__promotion .btn-secondry').show();}else{$('.checkout-page__promotion .btn-secondry').hide();}}
checkReviewSection();$(document).on('submit','.checkout-step__body form',function(e){checkReviewSection();});$(document).on('click','.checkout-step__success_edit a',function(e){checkReviewSection();});},pdpRating:function(){$('.write-review__button').on('click',function(e){$('.review-rating').toggleClass('hide');e.preventDefault();});$('.show-more__button').on('click',function(e){var showless=$(this).children().text();var newtext=$('.show-more__button').html().replace(showless,'SHOW LESS REVIEWS');$('.show-more__button').html(newtext);$('.main-breadcrumb__title-more').toggleClass('hide');if($('.show-more__button').hasClass('show-less__button')){var showmore=$(this).children().text();var showmoreText=$('.show-more__button').html().replace(showmore,'SHOW MORE REVIEWS');$('.show-more__button').html(showmoreText);}
$(this).toggleClass('show-less__button');e.preventDefault();});},customQuote:function(){$('.form-addproduct .form-group-submit').on('click',function(){$('.btn-submit__quote').prop('disabled','');});$(window).on('scroll',function(){if($(".specifications").is(':visible')){var testdd=$(".specifications").offset().top
var height=$(window).scrollTop();var affixHeight=$(".specifications__list").height();if(height>testdd){$(".specifications").css('padding-top',+affixHeight+'px');$(".specifications__list").addClass('affix');}else{$(".specifications__list").removeClass('affix');$(".specifications").css('padding-top','0px');}}});},emarsysServiceWorker:function(){if('${emarsysWebPush}'=='true'){if('serviceWorker'in navigator){navigator.serviceWorker.register('/service-worker.js').then(function(registration){console.log('Service Worker registered with scope:',registration.scope);}).catch(function(error){console.log('Service Worker registration failed:',error);});}}},checkAllBoxes:function(){$("#ckbCheckAll").click(function(){$(".checkBoxClass").prop('checked',$(this).prop('checked'));});$(".dropbtn").click(function(){$(this).next('.dropdown-content').toggleClass('show');});$(".checkBoxClass").change(function(){if(!$(this).prop("checked")){$("#ckbCheckAll").prop("checked",false);}});$(function(){$("#date1").datepicker();});$("#date1").datepicker({minDate:0});$('.tooltipp-content .modal-close').on('click',function(){var $this=$(this);$this.closest('.tooltipp-content').addClass('hide');setTimeout(function(){$this.closest('.tooltipp-content').removeClass('hide');},1000);});},sortSizeSelector:function(){$(document).on('click','.size-selector__table__title .js-sort-table',function(e){var $this=$(this);var sortThis=$this.data('sort');if(!$this.hasClass('sort-asc')){$('.size-selector__table__title .js-sort-table').removeClass('sort-asc');}
$this.toggleClass('sort-asc');var $divs=$(".size-selector__table__data-list form.alternative-color");var alphabeticallyOrderedDivs=$divs.sort(function(a,b){if($this.hasClass('sort-asc')){return $(a).find("."+sortThis+" .value").text().replace(/[^0-9a-zA-Z.]/g,'')-$(b).find("."+sortThis+" .value").text().replace(/[^0-9a-zA-Z.]/g,'');}else{return $(b).find("."+sortThis+" .value").text().replace(/[^0-9a-zA-Z.]/g,'')-$(a).find("."+sortThis+" .value").text().replace(/[^0-9a-zA-Z.]/g,'');}});$('.size-selector__table__data-list').mCustomScrollbar('destroy');$(".size-selector__table__data-list").html(alphabeticallyOrderedDivs);$('.size-selector__table__data-list').mCustomScrollbar({});});},numberWheel:function(){$(document).on('wheel','input[type=number]',function(e){$this=$(this);$thisval=$this.val();if(!$('.jsqty-update').length){if(e.originalEvent.deltaY<0){$('.sub-qty').prop('disabled',false);$inputval=(parseInt($thisval)+1);if($inputval>9999){$('.sub-qty').prop('disabled',false);$('.add-qty').prop('disabled',true);return false;}}else{if($thisval<=1){$this.val('2');$('.add-qty').prop('disabled',false);$('.sub-qty').prop('disabled',true);}
else{$('.add-qty').prop('disabled',false);}}}});},windowScroll:function(){$(window).scroll(function(){checkOffset();});function checkOffset(){if($(document).scrollTop()>50){$('body').addClass('sticky-header');}else{$('body').removeClass('sticky-header');$('.navbar-header__search').removeClass('sticky-show');$('.BottomHeaderSlot').show();}}
checkOffset();$('.sticky-search .fa-search').on('click',function(){$('.navbar-header__search').toggleClass('sticky-show');$('.BottomHeaderSlot').show();if($('.navbar-header__search').hasClass('sticky-show')){$('.BottomHeaderSlot').hide();$('.navbar-header__search .form-group .form-control').focus();}});},expandRow:function(){$(".order-comment__table-body .order-comment__table-row").on('click',function(){var expand=$(this).find("p");if(expand.hasClass("ellipsis")){expand.removeClass("ellipsis");}else{expand.addClass("ellipsis");}});},multiSelectCheckboxButton:function(){$('.js-select-states .checkbox-control').each(function(index,value){var $this=$(this);var $thisClosest=$this.closest('.multi-checkbox-form');if($this.is(":checked")){$thisClosest.find(".multi-checkbox_continue").prop("disabled",false);$thisClosest.find(".multi-checkbox__deselect").removeClass('disabled');return false;}else{$thisClosest.find(".multi-checkbox_continue").prop("disabled",true);$thisClosest.find(".multi-checkbox__deselect").addClass('disabled');}});},multiSelectCheckbox:function(){$(".js-show-states").on("click",function(e){$(".acc-payments__tax-exempt_inner").removeClass("hide");$(this).closest(".acc-payments__block_buttons").addClass("hide");});$('.js-custom-scrollbar').mCustomScrollbar({});$(':checkbox[readonly]').click(function(){return false;});$(".multi-checkbox__deselect").on("click",function(e){e.preventDefault();var $this=$(this);var $thisClosest=$this.closest('.multi-checkbox');$thisClosest.find(".checkbox-control:not([readonly])").attr("checked",false);ACC.global.multiSelectCheckboxButton();});$(".js-select-all .checkbox-control").change(function(){var $this=$(this);var $thisClosest=$this.closest('.multi-checkbox');if($this.is(":checked")){$thisClosest.find(".checkbox-control").prop("checked",true);}else{$thisClosest.find(".checkbox-control:not([readonly])").attr("checked",false);}
ACC.global.multiSelectCheckboxButton();});$(".js-select-states .checkbox-control").change(function(){var $this=$(this);var $thisClosest=$this.closest('.multi-checkbox-form');$thisClosest.find(".js-select-all .checkbox-control").attr("checked",false);ACC.global.multiSelectCheckboxButton();});},disableRightClick:function(){$(document).ready(function(){$('#js-payment-save, #braintree-submit-button, .checkout-button-id').bind("contextmenu",function(e){return false;});});},baseToolTip:function(){$('.base-tooltip__data').on('click touch',function(){$('.base-tooltip').removeClass('js-base-tooltip');$(this).closest('.base-tooltip').addClass('js-base-tooltip');});$('.base-tooltip .modal-close').on('click touch',function(){$(this).closest('.base-tooltip').removeClass('js-base-tooltip');});$(document).on('click touch',function(event){if(!$(event.target).parents().addBack().is('.base-tooltip__data')){$('body').find('.base-tooltip').removeClass('js-base-tooltip');}});$('.base-tooltip__data-content').on('click touch',function(event){event.stopPropagation();});},scrollToTop:function(){$(document).ready(function(){var btn=$('.scroll-to-btn');$(window).scroll(function(){if($(window).scrollTop()>0){btn.addClass('show');}else{btn.removeClass('show');}});btn.on('click',function(e){e.preventDefault();$('html, body').animate({scrollTop:0},'500');});});},navLinkClick:function(){$(document).on('click','.navbar-nav .navbartext',function(){var thisEleUrl=$(this).parent().attr('href');var thisSubLists=$(this).closest('.dropdown').find('.nav-dropdown');if($('body').width()<767||thisSubLists.is(":visible")){window.location.href=thisEleUrl;}});},hiddenContentSlot:function(){let hiddenSlotData=JSON.parse(sessionStorage.getItem("hiddenSlotData"));let width=window.innerWidth;const innitialData={BottomHeaderSlot:false}
if(hiddenSlotData&&width<768){hiddenSlotData.BottomHeaderSlot?$('.BottomHeaderSlot').hide():"";}else{sessionStorage.setItem("hiddenSlotData",JSON.stringify(innitialData));$('.BottomHeaderSlot').show();}
$('.removeContentSlotTrigger').on("click",function(){let className=$(this).parent().attr("class");let slotData=JSON.parse(sessionStorage.getItem("hiddenSlotData"));if(slotData&&className&&width<768){slotData[className]=true;$('.'+className).hide();sessionStorage.setItem("hiddenSlotData",JSON.stringify(slotData));};});},hideShowQtyMsg:function(){$('.more-text').off('click').on('click',function(){$(this).parents('.qty-discount-msg').addClass("show-all");$(this).hide();$(this).parents('.qty-discount-msg').find('.less-text').show();});$('.less-text').off('click').on('click',function(){$(this).parents('.qty-discount-msg').removeClass("show-all");$(this).hide();$(this).parents('.qty-discount-msg').find('.more-text').show();});$(document).on('click',function(event){if(!$(event.target).closest('.qty-discount-msg ').length&&$('.qty-discount-msg').hasClass('show-all')){$(this).find('.less-text').click();}});},updateDiscountpercent:function(){$('#js-pdp-qty').on('change',function(){let discountElem=$(".active-table .discount-json");let discountData=discountElem&&discountElem.length?JSON.parse(discountElem.html()):[];let price;let currencySymbol;let wasPriceContainer=$(".pdp-mainsection__item-text .js-wasprice");if($('#js-pdp-sizeselector').length){currencySymbol=$("#js-pdp-sizeselector").data("current-currency-symbol");}else{currencySymbol=$("#selectedVariantPdpPriceValue").data("current-currency-symbol");}
let variantCode=$("#productCodepopup").val();let selectedIndex,qtyVal=parseInt($(this).val());discountData.forEach((x,i)=>{qtyVal>=parseInt(x.min)&&qtyVal<=parseInt(x.max)?selectedIndex=i:"";});$('.discount-msg-table').removeClass('selected');if(selectedIndex!=undefined){$('.active-table .discount-table-body .discount-msg-table').eq(selectedIndex).addClass('selected');price=discountData[selectedIndex].price;wasPriceContainer.empty();let wasPrice;if($('#js-pdp-sizeselector').length){wasPrice=$("[id='selectedVariant"+variantCode+"']").val();}else{wasPrice=$("#selectedVariantPdpPriceValue").attr('data-product-price');}
wasPrice=(Math.round(wasPrice*100)/100).toFixed(2);let wasPriceHtml='<p class="h5 mt-0 mb-5 old-price"><em>'+ACC.wasPrice+'&nbsp;<del><span class="js-waspriceval">'+currencySymbol+''+wasPrice+'</span></del></em></p>';wasPriceContainer.append(wasPriceHtml);wasPriceContainer.removeClass("hidden");$(".item-price .get-product-price").addClass("text-orange");$(".item-price .get-product-price-for").addClass("text-orange");}else{let selectedVariantInput=$("[id='selectedVariant"+variantCode+"']");if($('#js-pdp-sizeselector').length){price=$("[id='selectedVariant"+variantCode+"']").val();}else{price=$("#selectedVariantPdpPriceValue").attr('data-product-price');}
let productIsDeals=(selectedVariantInput.attr("data-variant-deal")&&selectedVariantInput.attr("data-variant-deal")=="true")?true:false;let wasPrice=(selectedVariantInput.attr("data-variant-deal-wasprice")!="")?selectedVariantInput.attr("data-variant-deal-wasprice"):"";let savePrice=(selectedVariantInput.attr("data-variant-deal-saveprice")!="")?selectedVariantInput.attr("data-variant-deal-saveprice"):"";if(wasPrice!=""&&savePrice!=""&&productIsDeals){wasPriceContainer.addClass("hidden");wasPriceContainer.empty();var wasPriceHtml='<p class="h5 mt-0 mb-5 old-price"><em>'+ACC.wasPrice+'&nbsp;<del><span class="js-waspriceval">'+currencySymbol+''+wasPrice+'</span></del></em></p>';var savePriceHtml='<p class="h5 you-save"><span class="js-yousaveval">'+ACC.savePrice+'&nbsp;'+currencySymbol+''+savePrice+'</span></p>';wasPriceContainer.append(wasPriceHtml);wasPriceContainer.append(savePriceHtml);wasPriceContainer.removeClass("hidden");}else if(selectedVariantInput.length||!productIsDeals){wasPriceContainer.addClass("hidden");}
if(productIsDeals){$(".item-price .get-product-price").addClass("text-orange");$(".item-price .get-product-price-for").addClass("text-orange");selectedVariantInput.closest(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").addClass('isDealProduct');}else{$(".item-price .get-product-price").removeClass("text-orange");$(".item-price .get-product-price-for").removeClass("text-orange");selectedVariantInput.closest(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").removeClass('isDealProduct')}}
let pQty=$("#js-pdp-qty").val();let totalPrice=price*pQty;let totalPriceMath=currencySymbol+(Math.round(totalPrice*100)/100).toFixed(2);let productPrice=currencySymbol+(Math.round(price*100)/100).toFixed(2);$("#selectedVariantPdpPriceValue").html(productPrice+" "+ACC.priceEA);$("#selectedVariantPdpPriceValue").attr("data-product-discounted-price",price);$("#js-pdp-subtotal").text(totalPriceMath+" "+ACC.forText+" "+pQty);var selectedCutOption=$('.cutForShipping').find('.bestCutOption input[type="radio"]:checked').attr('data-p-code');var selVariant=$('#js-pdp-sizeselector').find('input[type="radio"]:checked').attr('data-variantcode');var cutQty=$('.cutForShipping').find('.bestCutOption input[type="radio"]:checked').attr('data-cut-quantity');if(selectedCutOption&&selectedCutOption===selVariant&&cutQty!==$('#js-pdp-qty').val()){$('.cutForShipping').addClass('hide');}});},zoomableImage:function(){class Zoomable{constructor(element,config){this.element=element;this.config={initialZoom:2,minZoom:1,maxZoom:4,zoomSpeed:0.01};this.img=element.querySelector(".zoomable__img");this.containerWidth=this.img.width;this.imageWidth=this.img.naturalWidth;this.config.maxZoom=this.img.naturalWidth>this.img.width?this.img.naturalWidth/this.img.width:1;this.config.initialZoom=this.config.maxZoom<=1?1:this.config.maxZoom;const{initialZoom,minZoom,maxZoom}=this.config;const indicator=element.querySelector(".zoomable .zoom-indicator");this.config.maxZoom<=1?"":indicator.classList.remove("inactive");console.log(this.config)
this.zoomed=false;this.initialZoom=Math.max(Math.min(initialZoom,maxZoom),minZoom);this.zoom=this.initialZoom;this.img.draggable=false;this.element.style.setProperty("--zoom",this.initialZoom);this._addEventListeners();}
static get Default(){return Default;}
_addEventListeners(){this.element.addEventListener("mouseover",()=>this._handleMouseover());this.element.addEventListener("mousemove",(evt)=>this._handleMousemove(evt));this.element.addEventListener("mouseout",()=>this._handleMouseout());this.element.addEventListener("wheel",(evt)=>this._handleWheel(evt));this.element.addEventListener("touchstart",(evt)=>this._handleTouchstart(evt));this.element.addEventListener("touchmove",(evt)=>this._handleTouchmove(evt));this.element.addEventListener("touchend",()=>this._handleTouchend());}
_handleMouseover(){if(this.zoomed){return;}
this.element.classList.add("zoomable--zoomed");this.zoomed=true;}
_handleMousemove(evt){if(!this.zoomed){return;}
const elPos=this.element.getBoundingClientRect();const percentageX=`${((evt.clientX - elPos.left) * 100) / elPos.width}%`;const percentageY=`${((evt.clientY - elPos.top) * 100) / elPos.height}%`;this.element.style.setProperty("--zoom-pos-x",percentageX);this.element.style.setProperty("--zoom-pos-y",percentageY);}
_handleMouseout(){if(!this.zoomed){return;}
this.element.style.setProperty("--zoom",this.initialZoom);this.element.classList.remove("zoomable--zoomed");this.zoomed=false;}
_handleWheel(evt){if(!this.zoomed){return;}
evt.preventDefault();const newZoom=this.zoom+evt.deltaY*(this.config.zoomSpeed*-1);const{minZoom,maxZoom}=this.config;this.zoom=Math.max(Math.min(newZoom,maxZoom),minZoom);this.element.style.setProperty("--zoom",this.zoom);}
_handleTouchstart(evt){evt.preventDefault();this._handleMouseover();}
_handleTouchmove(evt){if(!this.zoomed){return;}
const elPos=this.element.getBoundingClientRect();let percentageX=((evt.touches[0].clientX-elPos.left)*100)/elPos.width;let percentageY=((evt.touches[0].clientY-elPos.top)*100)/elPos.height;percentageX=Math.max(Math.min(percentageX,100),0);percentageY=Math.max(Math.min(percentageY,100),0);this.element.style.setProperty("--zoom-pos-x",`${percentageX}%`);this.element.style.setProperty("--zoom-pos-y",`${percentageY}%`);}
_handleTouchend(evt){this._handleMouseout();}
_mergeConfig(config){return{...this.constructor.Default,...(typeof config==="object"?config:{})};}}
const zoomables=document.querySelectorAll(".zoomable");for(const el of zoomables){new Zoomable(el);}},zoomableImageInit:function(){$(window).on('load',this.zoomableImage);},UpdateBestCutOption:function(sContext,variant,page){$.ajax({type:"GET",context:sContext,url:ACC.config.encodedContextPath+"/cutForShipping/getcutForShipping?productCode="+variant,success:function(data){data=JSON.parse(data);var sHTML="";data.forEach(item=>{dataQty=item.quantity;dataProductCode=item.productCode.split('_')[0];dataPriceValue=page==='plp'?sContext.parent().children("li[data-variant-code='"+item.productCode+"']").attr('value'):$('input[type="radio"][data-variantcode="'+item.productCode+'"]').attr('value');var pdpText=$('label[for="selectedVariant'+item.productCode+'"] .length-box .size').text().trim().replace(/\s+/g,' ')+' - '+$('label[for="selectedVariant'+item.productCode+'"] .length-box .price').text().trim().replace(/\s+/g,' ');pdpText=item.productCode.split('_')[2]==='0'?pdpText:pdpText.split('wt')[0].replace('-','');var plpText=sContext.parent().children("li[data-variant-code='"+item.productCode+"']").text().trim().replace(/\s+/g,' ');dataText=page==='plp'?plpText.replace(" ea."," each"):pdpText+' each';if($("[id='discount-section"+item.productCode+"']").length>0){var discount_json=JSON.parse($("[id='discount-section"+item.productCode+"']").find('.discount-json').text());var d=discount_json.find(element=>item.quantity>=+element.min&&item.quantity<=+element.max);if(d)dataText=dataText.replace(/\$\d+\.\d{2}/,d.dprice);}
sHTML=sHTML+"<div class='radio'><input id='bestShipping"+item.productCode+"' data-cut-quantity='"+dataQty+"' data-variant-text='"+dataText+"' data-p-code='"+item.productCode+"' data-price-val='"+dataPriceValue+"' class='select-best-shipping' name='cutoptions"+dataProductCode+"' type='radio'/><label for='bestShipping"+item.productCode+"' class='bestShippingRadioBtn'>QTY: "+dataQty+" @ "+dataText.split('-')[0]+" - <strong>"+dataText.split('-')[1]+"</strong></label></div>"});if(sHTML!=""){if(page==='plp'){sContext.closest('.similar-product__item').find('.cutForShipping').removeClass('hide');sContext.closest('.similar-product__item').find('.cutForShipping .bestCutOption').html(sHTML);sContext.closest('.similar-product__item').find('.heatLotOption input').attr('id','heatLotid'+data[0].productCode.split('_')[0]);sContext.closest('.similar-product__item').find('.heatLotOption label').attr('for','heatLotid'+data[0].productCode.split('_')[0]);}else{sContext.closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.cutForShipping').removeClass('hide');sContext.closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.cutForShipping .bestCutOption').html(sHTML);$('.heatLotOption input').attr('id','heatLotid'+data[0].productCode.split('_')[0]);$('.heatLotOption label').attr('for','heatLotid'+data[0].productCode.split('_')[0]);}}
data.length?$('#heatLotid'+data[0].productCode.split('_')[0]).prop('checked',false):"";},error:function(data){}});}};$(".dimension-table-row tbody tr:even").css('background-color','#EFF0F1');$(".dimension-table-row tbody tr:odd").css('background-color','#FFF');$('#signinModal').on('hidden.bs.modal',function(){$('#js_submit_signin').prop('disabled',true);});$('#signinModal').on('show.bs.modal',function(){$('.custom-cut-modal').modal('hide');});const heightAdjustment=()=>{if($('body').width()<1035){$('.sidebar-menu').removeAttr('style');$('.sub-nav').removeAttr('style');$('.main-ul').removeAttr('style');}else{let sidenavHeight=$(window).height()-($('.global-header').height()+75);$('.sidebar-menu .main-ul').css("max-height",sidenavHeight+"px");$('.sidebar-menu .sub-nav').css("max-height",sidenavHeight+"px");return sidenavHeight;}}
const sidemenuOptions=()=>{let sidenavHeight;$(".navigation-breadcrumbs li label").off();$(".toggle-sub").off();$('.navigation-breadcrumbs li label').on('click',function(){$(".toggle-sub i").attr("tabindex","0");$(".main-ul a").attr("tabindex","0");let navigationLabel=$(this).parents('.navigation-breadcrumbs').find('label');let checkedIndex=$(this).attr('data-index');$('.sub-nav').removeAttr('style');$('.main-ul').removeAttr('style');let labelId=checkedIndex>0?$(this).attr('data-prev'):$(this).attr('for');let height=$('#'+labelId+'-sub').height();sidenavHeight=heightAdjustment();checkedIndex>0?$('.sidebar-menu .main-ul').height(height+'px'):$('.sidebar-menu .main-ul').height('auto');navigationLabel.each(e=>{let id=$(navigationLabel[e]).attr('for');e>checkedIndex?$('#'+id).prop('checked',false):e==(checkedIndex-2)?$('#'+id+'-sub').css("overflow","hidden"):'';});sidenavHeight&&sidenavHeight<height?$('.sub-nav').css("height",sidenavHeight+"px"):$('.sub-nav').css("height",height+3+"px");});$('.toggle-sub').on('keypress',function(event){event.keyCode==13?$(this).trigger("click"):"";})
$('.toggle-sub').on('click',function(){let $t=$(this);let uid=$(this).attr("data-uid");$.ajax({url:"/sidenav/getchildren?uid="+uid,type:'GET',dataType:'json',contentType:'application/json',async:false,success:function(response){$("#"+uid+'-sub .innerWrapper').html(response);setTimeout(function(){$t.parent().parent().scrollTop(0);let id=$t.attr('for');$('.sub-nav').removeAttr('style');let height=$('#'+id+'-sub').height()-3;sidenavHeight=heightAdjustment();$('.sidebar-menu .main-ul').height(height+'px');sidenavHeight&&sidenavHeight<height?$('.sub-nav').css("height",sidenavHeight+"px"):$('.sub-nav').css("height",height+3+"px");$t.parent().parent().parent().css("overflow","hidden");let navLabel=$t.parent().parent().parent().find('> .navigation-breadcrumbs > li > label');navLabel.each(e=>{let id=$(navLabel[e]).attr('for');$('#'+id+'-sub').css("overflow","hidden");});$(".toggle-sub i").attr("tabindex","-1");$(".main-ul a").attr("tabindex","-1");$("#"+uid+'-sub .innerWrapper li:first-child a').focus();$("#"+uid+'-sub .innerWrapper i').attr("tabindex","0");$("#"+uid+'-sub .innerWrapper a').attr("tabindex","0");sidemenuOptions();},100);},error:function(jqXHR,textStatus,errorThrown){console.log("The following error occured: "+textStatus,errorThrown);}});});}
$(window).scroll(function(){if($('body').width()>1035){let headerHeight=$('.global-header').height();$('.sidebar-container').css("top",headerHeight+"px");}else{$('.sidebar-container').css("top","0px");}});sidemenuOptions();$('#bs-example-navbar-collapse-tablet').on('shown.bs.collapse',function(){var $clonedNav=$('.sidebar-menu').clone();$('.sidebar-menu').remove();$clonedNav.insertAfter($('.tablet-verticle-nav-content .close-dropdown'));$('.sidebar-menu .main-ul').css("max-height","none");$('.sidebar-menu .sub-nav').css("max-height","none");$('.sidebar-container').css("top","0px");$('.sidebar-menu').show();sidemenuOptions();$(this).find('.dismiss-nav').on('click',function(){$('#bs-example-navbar-collapse-tablet').collapse('hide');});});$('#bs-example-navbar-collapse-tablet').on('hide.bs.collapse',function(){var $clonedNav=$('.sidebar-menu').clone();$('.sidebar-menu').remove();$('.sidebar-container').prepend($clonedNav);$('.sidebar-menu').hide();})
$('#bs-example-navbar-collapse-1').on('shown.bs.collapse',function(){var $clonedNav=$('.sidebar-menu').clone();$('.sidebar-menu').remove();$clonedNav.insertAfter($('.header-nav'));$('.sidebar-menu').show();sidemenuOptions();});$('#bs-example-navbar-collapse-1').on('hide.bs.collapse',function(){var $clonedNav=$('.sidebar-menu').clone();$('.sidebar-menu').remove();$('.sidebar-container').prepend($clonedNav);$('.sidebar-menu').hide();})
const plpOverlay=()=>{$('.plp-overlay').on("click",function(){setTimeout(function(){$('.facet-products__close__button').trigger("click");},800);});}
plpOverlay();$(window).resize(function(){if($('body').width()>767){$('#bs-example-navbar-collapse-1').collapse('hide');$('#bs-example-navbar-collapse-tablet').collapse('hide');}
if($('body').width()>1035){$('#bs-example-navbar-collapse-1').collapse('hide');$('#bs-example-navbar-collapse-tablet').collapse('hide');heightAdjustment();}});const showPromoMsg=()=>{$('.BottomHeaderSlot').show();$(window).scroll(function(){$('.sticky-header').removeAttr('style');});$('.sticky-header').removeAttr('style');}
const hidePromoMsg=()=>{if($('body').width()<768){$('#bs-example-navbar-collapse-1').on('show.bs.collapse',function(){$('.BottomHeaderSlot').hide();$(window).scroll(function(){if($("body").hasClass("sticky-header")){$('.sticky-header').css('overflow','hidden');}else{$('.sticky-header').removeAttr('style');}});$(".close-dropdown .dismiss-dropdown").click(function(){showPromoMsg();});});$('#bs-example-navbar-collapse-1').on('hidden.bs.collapse',function(){showPromoMsg();});}}
hidePromoMsg();

ACC.ga4={_autoload:["plpSelectItem","addToCart","removeNAData"],plpSelectItem:function(){$("a[href*='/pid/']").off();$("a[href*='/pid/']").on("click",function(){const url=$(this).attr('href');const pid=url.substring(url.lastIndexOf('/')+1);let stringifyData=$("#gaData-"+pid).html();if(stringifyData){let processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));let data={event:"select_item",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:{promotion_id:processedData.promotion_id?processedData.promotion_id:null,promotion_name:processedData.promotion_name?processedData.promotion_name:null,items:[{item_id:processedData.item_id?processedData.item_id:null,item_name:processedData.item_name?processedData.item_name:null,affiliation:processedData.affiliation?processedData.affiliation:"NA",index:processedData.index?processedData.index:"NA",item_brand:processedData.item_brand?processedData.item_brand:null,item_category:processedData.item_category?processedData.item_category:null,item_category2:processedData.item_category2?processedData.item_category2:null,item_category3:processedData.item_category3?processedData.item_category3:null,item_category4:processedData.item_category4?processedData.item_category4:null,item_category5:processedData.item_category5?processedData.item_category5:null,item_category6:processedData.item_category6?processedData.item_category6:null,item_category7:processedData.item_category7?processedData.item_category7:null,item_category8:processedData.item_category8?processedData.item_category8:null,item_category9:processedData.item_category9?processedData.item_category9:false,item_list_id:processedData.item_list_id?processedData.item_list_id:null,item_list_name:processedData.item_list_name?processedData.item_list_name:null,item_variant:processedData.item_variant?processedData.item_variant:null,location_id:processedData.location_id?processedData.location_id:"NA",price:null,quantity:null}]}}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}});},getTimeStamp:function(){let today=new Date(new Date().toLocaleString("en-US",{timeZone:"America/Los_Angeles"}));let prefix=(number)=>{return number<10?"0"+number:number;};let dateString=today.getFullYear()+"-"+prefix(today.getMonth()+1)+"-"+prefix(today.getDate())+"T"+prefix(today.getHours())+":"+prefix(today.getMinutes())+":"+prefix(today.getSeconds())+"Z";return dateString;},removeNAData:function(data){if(data){data.ecommerce.items.forEach(item=>{Object.keys(item).forEach(key=>{if(item[key]==="NA"){delete item[key]}});});return data;}},addToCart:function(processedData){if(processedData){let data={event:"add_to_cart",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:{promotion_id:processedData.promotion_id?processedData.promotion_id:null,promotion_name:processedData.promotion_name?processedData.promotion_name:null,currency:"USD",value:null,items:[{item_id:processedData.item_id?processedData.item_id:null,item_name:processedData.item_name?processedData.item_name:null,affiliation:processedData.affiliation?processedData.affiliation:"NA",index:processedData.index?processedData.index:"NA",item_brand:processedData.item_brand?processedData.item_brand:null,item_category:processedData.item_category?processedData.item_category:null,item_category2:processedData.item_category2?processedData.item_category2:null,item_category3:processedData.item_category3?processedData.item_category3:null,item_category4:processedData.item_category4?processedData.item_category4:null,item_category5:processedData.item_category5?processedData.item_category5:null,item_category6:processedData.item_category6?processedData.item_category6:null,item_category7:processedData.item_category7?processedData.item_category7:null,item_category8:processedData.item_category8?processedData.item_category8:null,item_category9:processedData.item_category9?processedData.item_category9:false,item_list_id:processedData.item_list_id?processedData.item_list_id:null,item_list_name:processedData.item_list_name?processedData.item_list_name:null,item_variant:processedData.item_variant?processedData.item_variant:null,location_id:processedData.location_id?processedData.location_id:"NA",price:processedData.price&&processedData.price!=""?processedData.price.toString():null,quantity:processedData.quantity&&processedData.quantity!=""?processedData.quantity:null}]}}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},addMultipleItemToCart:function(processedData){if(processedData){let data={event:"add_to_cart",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:processedData}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},addShippingInfo:function(processedData){if(processedData){let data={event:"add_shipping_info",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:processedData}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},addPaymentInfo:function(processedData){if(processedData){let data={event:"add_payment_info",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:processedData}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},removeFromCart:function(processedData){if(processedData){let data={event:"remove_from_cart",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:{promotion_id:processedData.promotion_id?processedData.promotion_id:null,promotion_name:processedData.promotion_name?processedData.promotion_name:null,currency:"USD",value:processedData.value?processedData.value:null,items:[{item_id:processedData.item_id?processedData.item_id:null,item_name:processedData.item_name?processedData.item_name:null,affiliation:processedData.affiliation?processedData.affiliation:"NA",index:processedData.index?processedData.index:"NA",item_brand:processedData.item_brand?processedData.item_brand:null,item_category:processedData.item_category?processedData.item_category:null,item_category2:processedData.item_category2?processedData.item_category2:null,item_category3:processedData.item_category3?processedData.item_category3:null,item_category4:processedData.item_category4?processedData.item_category4:null,item_category5:processedData.item_category5?processedData.item_category5:null,item_category6:processedData.item_category6?processedData.item_category6:null,item_category7:processedData.item_category7?processedData.item_category7:null,item_category8:processedData.item_category8?processedData.item_category8:null,item_category9:processedData.item_category9?processedData.item_category9:false,item_list_id:processedData.item_list_id?processedData.item_list_id:null,item_list_name:processedData.item_list_name?processedData.item_list_name:null,item_variant:processedData.item_variant?processedData.item_variant:null,location_id:processedData.location_id?processedData.location_id:"NA",price:processedData.price&&processedData.price!=""?processedData.price.toString():null,quantity:processedData.quantity&&processedData.quantity!=""?processedData.quantity:null}]}}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},removeAllFromCart:function(processedData){if(processedData){let data={event:"remove_from_cart",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:processedData}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},beginCheckout:function(processedData){if(processedData){let data={event:"begin_checkout",hit_time_stamp:ACC.ga4.getTimeStamp(),ecommerce:processedData}
data=ACC.ga4.removeNAData(data);dataLayer.push(data);}},createAccount:function(hashedEmail){if(hashedEmail){let data={event:"create_account",user_id:hashedEmail,user_type:"new user",hit_time_stamp:ACC.ga4.getTimeStamp()}
dataLayer.push(data);}}};

ACC.tksigninvalidation={_autoload:["signInValidation","disableSubButton","validateEmail",],signInValidation:function(){$("#js_signin_form").validate({onkeypress:!1,onkeyup:!1,rules:{j_username:{required:{depends:function(){$(this).val($.trim($(this).val()));return!0}},email:!0},j_password:{required:!0,minlength:6}},messages:{j_username:{email:ACC.emailValidationError}}})},validateEmail:function(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);},disableSubButton:function(){function loginFieldCheck(){var user_val=$("#j_username").val();var pwd_val=$('#j_password').val();if(user_val!=''&&pwd_val!=''&&validateEmail(user_val)){$("#js_submit_signin").prop("disabled",false);}
else{$("#js_submit_signin").prop('disabled',true);}
var user_val=$("#j_username_for_signup").val();var pwd_val=$('#j_password_for_signup').val();if(user_val!=''&&pwd_val!=''&&validateEmail(user_val)){$("#js_submit_signin_for_signup").prop("disabled",false);}
else{$("#js_submit_signin_for_signup").prop('disabled',true);}}
loginFieldCheck();$(document).on("keyup","#js_signin_form input",function(){loginFieldCheck();});$(document).on("change","#js_signin_form input",function(){loginFieldCheck();});$(document).on("keyup","#js_signin_form_for_signup input",function(){loginFieldCheck();});$(document).on("change","#js_signin_form_for_signup input",function(){loginFieldCheck();});}};

ACC.tksignin={_autoload:["bindSignInModal","submitSignInForm","clearSignInForm","showEmailSignInModal","showEmailSignInForSignupModal","submitSignInFormForSignup","showSignUpModal"],bindSignInModal:function(){$(document).on("click",".js_signin",function(){$("#quotetext").css("display","none");$("#quoteSignButton").addClass("hide");$(".tooltip-quote").css("display","none");$("#resetPasswordsuccessmsg").addClass("hide");$("#forgotPasswordsuccessmsg").addClass("hide");$("#signinModal").removeClass("hide");$("#signinModal").modal("show");$(".asterikId").css("display","none");$("#requiredTextField").css("display","none");$('#saveCartUnauthentic').modal('hide');});$(".showHidePassword").on("click",function(){let isShow=$(this).hasClass("fa-eye");if(isShow){$(this).parents(".password-wrapper").find("input").attr("type","text");$(this).removeClass("fa-eye");$(this).addClass("fa-eye-slash");}else{$(this).parents(".password-wrapper").find("input").attr("type","password");$(this).addClass("fa-eye");$(this).removeClass("fa-eye-slash");}});},submitSignInForm:function(){$(document).on("click","#js_submit_signin",function(e){e.preventDefault();var eventSource=document.body.getAttribute("pageType")||document.body.className||"Unknown";var formAction=$("#js_signin_form").attr("action");var form=$("#js_signin_form").valid();var signInCsrfToken=$("#js_csrf_token_signin").val();if(typeof signInCsrfToken==="undefined"||signInCsrfToken==""){$("#js_csrf_token_signin").val(ACC.config.CSRFToken);}
if(form){var formData=$("#js_signin_form").serialize()+"&eventSource="+encodeURIComponent(eventSource);$.ajax({type:"POST",url:formAction,data:formData,cache:false,success:function(responseData){if(responseData=="success"){window.location.reload();}else if(responseData=="accountDeleted"){$(".js-fotgotpswd-err-msg").addClass("error");$(".js-fotgotpswd-err-msg").show();$(".js-fotgotpswd-err-msg").text(ACC.accountNotFound);$("#signinModal").modal("show");}else if(responseData=="failure"){$(".js-fotgotpswd-err-msg").addClass("error");$(".js-fotgotpswd-err-msg").show();$(".js-fotgotpswd-err-msg").text(ACC.InvalidCredentials);$("#signinModal").modal("show");}else{$.ajax({url:ACC.config.encodedContextPath+"/login/pw/request",type:"GET",success:function(data){$("#forgotModal").html(data);$("#signinModal").modal("hide");$("#forgotModal").modal("show");},error:function(){},});}},error:function(xhr,status,error){console.error("Error during sign-in:",error);},});}});$(document).on("click touch",".sign-tooltip span.fa-info-container",function(e){$(this).closest(".sign-tooltip").addClass("js-sign-tooltip");e.preventDefault();});$(document).on("click touch",".sign-tooltip .modal-close",function(e){$(this).closest(".sign-tooltip").removeClass("js-sign-tooltip");});$(document).on("click touch",function(event){if(!$(event.target).parents().addBack().is(".sign-tooltip span.fa-info-container")){$("body").find(".sign-tooltip").removeClass("js-sign-tooltip");}});$(document).on("click touch",".sign-tooltip__data-content",function(e){e.stopPropagation();e.preventDefault();});},submitSignInFormForSignup:function(){$(document).on("click","#js_submit_signin_for_signup",function(e){e.preventDefault();var formAction=$("#js_signin_form_for_signup").attr("action");var form=$("#js_signin_form_for_signup").valid();var signInCsrfToken=$("#js_csrf_token_signin").val();if(typeof signInCsrfToken==='undefined'||signInCsrfToken==""){$("#js_csrf_token_signin").val(ACC.config.CSRFToken);}
if(form){$.ajax({type:"POST",url:formAction,data:$("#js_signin_form_for_signup").serialize(),cache:!1,success:function(responseData){if(responseData=="success"){window.location.reload()}else if(responseData=="accountDeleted"){$(".js-fotgotpswd-err-msg").addClass("error");$(".js-fotgotpswd-err-msg").show();$(".js-fotgotpswd-err-msg").text(ACC.accountNotFound);$("#signinModalForLink").modal("show")}else if(responseData=="failure"){$(".js-fotgotpswd-err-msg").addClass("error");$(".js-fotgotpswd-err-msg").show();$(".js-fotgotpswd-err-msg").text(ACC.InvalidCredentials);$("#signinModalForLink").modal("show")}
else{window.location.reload()}}})}});},clearSignInForm:function(){$("#signinModal").on("hidden.bs.modal",function(e){$(this).find("input").val("").end();$(".js-fotgotpswd-err-msg").hide();$(".modal-content .error").html("");$(".modal-content .error").removeClass("error")})},clearSignInForm:function(){$("#signinModalForLink").on("hidden.bs.modal",function(e){$(this).find("input").val("").end();$(".js-fotgotpswd-err-msg").hide();$(".modal-content .error").html("");$(".modal-content .error").removeClass("error")})},showEmailSignInModal:function(){$(document).ready(function(){var signIn=$("#showSignIn").val();if(signIn=="true"){$("#quotetext").css("display","none");$("#quoteSignButton").addClass("hide");$(".tooltip-quote").css("display","none");$("#resetPasswordsuccessmsg").addClass("hide");$("#forgotPasswordsuccessmsg").addClass("hide");$("#signinModalForLink").removeClass("hide");$("#signinModalForLink").modal("show");$(".asterikId").css("display","none");$("#requiredTextField").css("display","none");$('#saveCartUnauthentic').modal('hide');}})},showEmailSignInForSignupModal:function(){$(document).ready(function(){var signIn=$("#showSignInWithoutToken").val();if(signIn=="true"){$("#quotetext").css("display","none");$("#quoteSignButton").addClass("hide");$(".tooltip-quote").css("display","none");$("#resetPasswordsuccessmsg").addClass("hide");$("#forgotPasswordsuccessmsg").addClass("hide");$("#signinModal").removeClass("hide");$("#signinModal").modal("show");$(".asterikId").css("display","none");$("#requiredTextField").css("display","none");$('#saveCartUnauthentic').modal('hide');}})},showSignUpModal:function(){$(document).ready(function(){let showSignUp=$("#signUp").val();if(showSignUp=='true'){$.ajax({url:ACC.config.encodedContextPath+'/b2bregister',type:'GET',success:function(data){$('#js-registration').html(data);$('#signinModal').modal('hide');$("#signupModal").modal('show');ACC.register.submitRegistrationForm();ACC.register.registerFormValidation();ACC.register.resetPasswordCopyPaste();ACC.register.registerFormValidation();ACC.register.openSignInModal(data);$('#saveCartUnauthentic').modal('hide');},error:function(){console.log("error");}});}});}};

ACC.tkforgottenpasswordvalidation={_autoload:["resetPasswordValidation","forgotModalEmailValidation"],forgotModalEmailValidation:function(){$("#forgotPasswordForm").validate({rules:{email:{required:!0,email:!0}},messages:{email:ACC.emailValidationError}})},resetPasswordValidation:function(){$("#resetPasswordForm").validate({rules:{pwd:{required:!0,},checkPwd:{required:!0,equalTo:"#pwd"}},messages:{required:ACC.resetModalPwd}})},};

ACC.tkforgottenpassword={_autoload:["bindForgotPasswordPopup","forgetPasswordCheck","forgotPwdValidation","submitForgotPasswordForm","resetPopup","submitResetPasswordForm","commonFunction","comparePasswords","validateEmail","disableSubButton",],commonFunction:function(){$("#resetModal, #signinModal, #forgotModal").on("shown.bs.modal",function(){$("body").addClass("modal-open")})},resetPopup:function(){if(updatePassword=="true"){$(document).ready(function(){$("#resetModalInitial").modal("show")})}},submitResetPasswordForm:function(){$(document).on("click",".js-resetpassword-btn",function(e){var form=$("#resetPasswordForm").valid();if(form){$.ajax({url:$("#resetPasswordForm").attr("action"),type:"POST",data:$("#resetPasswordForm").serialize(),success:function(data){if($(data).find("#forgotmodal").val()=="true"){$("#resetModal").html(data);$("#resetPassworderrormsg").removeClass("hide");$("#resetModalInitial").modal("hide");$("#resetModal").modal("show")}else{$("#signinModal").html(data);$("#resetPasswordsuccessmsg").removeClass("hide");$("#resetModalInitial").modal("hide");$("#resetModal").modal("hide");$("#signinModal").modal("show")}},error:function(data){}})}})},forgotPwdValidation:function(){$("#forgotPasswordForm").validate();},forgetPasswordCheck:function(){$(document).on("blur keyup",'.check-update-password',function(e){var requestedPassword=$(this).val();if(!ACC.register.validatePassword(requestedPassword)){$(this).addClass('error');$('.js-password-update-error').css("display","block");$('.js-password-update-error').html("<label  class='error'>"+ACC.registerPasswordError+"</label>")}else{$(this).removeClass('error');$('.js-password-update-error').hide()
$('.js-password-update-error').removeClass('error')}})},validateEmail:function(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);},disableSubButton:function(){function loginFieldCheck(){var user_val=$("#forgotPasswordForm #email").val();if(user_val!=''&&validateEmail(user_val)){$(".js-forgotpassword-btn").prop("disabled",false);}
else{$(".js-forgotpassword-btn").prop('disabled',true);}}
loginFieldCheck();$(document).on("keyup","#forgotPasswordForm #email",function(){loginFieldCheck();});$(document).on("change","#forgotPasswordForm #email",function(){loginFieldCheck();});var interval_delay=100;var is_interval_running=false;var myInterval;$(document).on("focus","#forgotPasswordForm #email",function(){clearInterval(myInterval);if(!is_interval_running)
myInterval=setInterval(interval_function,interval_delay);}).blur(function(){clearInterval(myInterval);is_interval_running=false;});interval_function=function(){loginFieldCheck();is_interval_running=true;}},bindForgotPasswordPopup:function(){$(document).on("click","#forgotpasswordlink",function(){$.ajax({url:ACC.config.encodedContextPath+"/login/pw/request",type:"GET",success:function(data){$("#forgotModal").html(data);$("#signinModal").modal("hide");$("#forgotModal").modal("show")},error:function(){}})})},submitForgotPasswordForm:function(){$(document).on("click",".js-forgotpassword-btn",function(e){e.preventDefault();var form=$("#forgotPasswordForm").valid();if(form){$.ajax({url:$("#forgotPasswordForm").attr("action"),type:"POST",data:$("#forgotPasswordForm").serialize(),success:function(data){var response=$(data);if($(data).find("#forgotmodal").val()=="true"){$("#forgotModal").html(data);$("#forgotPassworderrormsg").removeClass("hide");$("#forgotModal").modal("show")}else{$("#signinModal").html(data);$("#forgotPasswordsuccessmsg").removeClass("hide");$("#forgotModal").modal("hide");$("#signinModal").modal("show")}},error:function(data){}})}})},comparePasswords:function(){$(".js-resetpassword-btn").attr("disabled",true);$(document).on("keyup","#pwd, #checkPwd",function(e){var password=$("#pwd").val();var confirmPassword=$("#checkPwd").val();if(password.trim().length>0&&confirmPassword.trim().length>0&&password==confirmPassword&&$('.js-password-update-error').css('display')=='none'){$(".js-resetpassword-btn").attr("disabled",false);}else{$(".js-resetpassword-btn").attr("disabled",true);}})}};

ACC.contactus={_autoload:["createTicket","formValidation","loadRegionsInContactUsForm","loadcontactuspage","phoneNumberValidation","extValidation","sortCountryList","countriesChange","customQuoteRedirection","bindFooterUrl"],formValidation:function(){$("form[name='contactus-form']").validate({onkeyup:!1,rules:{firstName:{required:!0},email:{required:!0,email:!0},lastName:{required:!0},phoneNumber:{rangelength:[10,15]},ext:{maxlength:10},zipCode:{maxlength:15},message:{required:!0}},messages:{email:{required:"",email:ACC.emailValidationError},firstName:{required:""},lastName:{required:""},phoneNumber:{rangelength:ACC.invalidPhoneNumber},zipCode:{maxlength:ACC.invalidZipCode},ext:{maxlength:ACC.invalidExt},message:{required:""}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},loadcontactuspage:function(){$(".reset-form-field").on("click",function(){location.reload()})},$contactusRootUrl:ACC.config.encodedContextPath+"/contact-us",createTicket:function(){$("form#contactUsForm").submit(function(e){$(".contact-us .notification-error").addClass("hide");e.preventDefault();if(!$("form#contactUsForm").valid()){if($(".contactus-form .input-validation").hasClass("error")||$(".contactus-form .input-validation").val()==""){$("html,body").animate({scrollTop:200},700);$(".contact-us .notification-error").removeClass("hide")}
return}
$.ajax({url:ACC.contactus.$contactusRootUrl,type:"POST",data:$("#contactUsForm").serialize(),success:function(response){if(response=="OK"){$("#contactusModal").modal()}}})})},loadRegionsInContactUsForm:function(){$(document).on("change","#js-country",function(){var countryIso=$(this).val();if(countryIso=='US'||countryIso=='CA'||countryIso=='USA'||countryIso=='CAN'){$("#contactUsCountry").attr("style","display:block")}else{$("#contactUsCountry").attr("style","display:none")}
$.ajax({url:ACC.config.encodedContextPath+"/contact-us/showRegions",type:"GET",data:{countryIso:countryIso},contentType:"application/json",success:function(response){if(response.length==0){$("#js-region").val("").trigger("change");$("#js-region").attr("disabled","disabled")}else{var placeholder=$("#js-state-placeholder").val();$("#js-region").removeAttr("disabled");$("#js-region").empty();$("#js-region").append($("<option></option>").text(placeholder));$.each(response,function(key,value){$("#js-region").append($("<option></option>").attr("value",value.isocode).text(value.name));$("#js-region option:first").prop("selected",!0)})}}})})},phoneNumberValidation:function(){$("#telephone").on("input",function(e){e.target.value=e.target.value.replace(/[^0-9+-]/g,"")})},extValidation:function(){$("#ext").keydown(function(event){if(event.keyCode==46||event.keyCode==8||event.keyCode==9||event.keyCode==27||event.keyCode==13||(event.keyCode==65&&event.ctrlKey===!0)||(event.keyCode>=35&&event.keyCode<=39)){return}else{if(event.shiftKey||(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)){event.preventDefault()}}})},countriesChange:function(){var countryCode=$("#js-selected-country").val();$(".customCountryList option[value='US']").remove();$(".customCountryList option[value='CA']").remove();if(countryCode=='US'){$(".customCountryList").prepend("<option value='CA'>Canada</option>");$(".customCountryList").prepend("<option value='US' selected='selected'>United States</option>")}else if(countryCode=='CA'){$(".customCountryList").prepend("<option value='US'>United States</option>");$(".customCountryList").prepend("<option value='CA' selected='selected'>Canada</option>")}else{$(".customCountryList").prepend("<option value='US'>United States</option>");$(".customCountryList").prepend("<option value='CA'>Canada</option>");$("#contactUsCountry").attr("style","display:none")}},sortCountryList:function(){var my_options=$("#js-country option");var selected=$("#js-country").val();my_options.sort(function(a,b){if(a.text>b.text)return 1;if(a.text<b.text)return-1;return 0});$("#js-country").empty().append(my_options);$("#js-country").val(selected)},customQuoteRedirection:function(){var findClass=$('body').is('.page-contactUs');if(findClass==!0){$(document).ready(function(){var isAnonymousUser=document.getElementById("js-custom-quote").value;var url=ACC.config.encodedContextPath+"/customquote";if(isAnonymousUser==="true"){url="javascript:void(0);"
$(".js-contactus-custom").prop("href",url);$(".js-contactus-custom").prop("id","customSignIn")}
if(isAnonymousUser==="false"){$(".js-contactus-custom").prop("href",url)}})}},bindFooterUrl:function(){$(document).ready(function(){var wFormVal=$('#js-w9formlink').data("url");$("#w9form-footerlink").attr("href",wFormVal)})}};

ACC.tkmaterialquickselector={_autoload:["enableQuickSearch","loadCategoryResult","matrialQuickQuery","sortMaterialList","sortClassMaterialList","clearMaterialSearch","loadAlloydataHomepage"],enableQuickSearch:function(){$("#quick-search-materialbtn").removeAttr("disabled","disabled");$(".quick-search").attr("disabled","disabled");$("#selectMaterial").val("").attr("selected","selected");$(".selectMaterial").val("").attr("selected","selected");$("#selectShape").val("").attr("selected","selected");$(".selectShape").val("").attr("selected","selected");$("#selectAlloy").val("").attr("selected","selected");$(".selectAlloy").val("").attr("selected","selected");$(document).on("change","#selectMaterial,#selectShape,#selectAlloy",function(){if($("#selectMaterial").val()!=""||$("#selectShape").val()!=""||$("#selectAlloy").val()!=""){$("#quick-search-materialbtn").removeAttr("disabled")}else{$("#quick-search-materialbtn").removeAttr("disabled","disabled")}});$(document).on("change",".selectMaterial,.selectShape,.selectAlloy",function(){if($(".selectMaterial").val()!=""||$(".selectShape").val()!=""||$(".selectAlloy").val()!=""){$(".quick-search").removeAttr("disabled")}else{$(".quick-search").attr("disabled","disabled")}})},matrialQuickQuery:function(){$(document).on("change","#selectShape",function(){var shapeVal=$(this).closest('form').find("#selectShape").val();var materialVal=$(this).closest('form').find("#selectMaterial").val();var alloyVal=$(this).closest('form').find("#selectAlloy").val();var $this=$(this);ACC.global.spinnerLoad($this.closest('.module-banner__meta_form'));var isplpPage;if($('#isplpPage').length){isplpPage=true;}
$.ajax({url:ACC.config.encodedContextPath+"/category/content/mqsValueFilter",type:"GET",data:{material:materialVal,shape:shapeVal,alloy:alloyVal,isplpPage:isplpPage,},contentType:"application/json",success:function(response){$('.mqs-form-controls').empty();$('.mqs-form-controls').html(response);ACC.tkmaterialquickselector.selectedItemDropdown(shapeVal,materialVal,alloyVal,isplpPage)
ACC.global.spinnerRemove($('.module-banner__meta_form'));},error:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));},complete:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));}});});$(document).on("change",".js-selectfacet",function(){var shapeVal=$(this).closest('form').find("#selectShape").val();var materialVal=$(this).closest('form').find("#selectMaterial").val();var alloyVal=$(this).closest('form').find("#selectAlloy").val();var dimName=$(this).attr("id");var dimNameId=dimName.split(/[-]+/).pop();var dimData=$(this).find('option:selected').text()
var dimDataEncode=encodeURIComponent(dimData);var isplpPage;if($('#isplpPage').length){isplpPage=true;}
var $this=$(this);ACC.global.spinnerLoad($this.closest('.module-banner__meta_form'));$.ajax({url:ACC.config.encodedContextPath+"/category/content/mqsValueFilter",type:"GET",data:{material:materialVal,shape:shapeVal,alloy:alloyVal,dimData:dimDataEncode,dimName:dimNameId,isplpPage:isplpPage},contentType:"application/json",success:function(response){$('.mqs-form-controls').empty();$('.mqs-form-controls').html(response);ACC.tkmaterialquickselector.selectedItemDropdown(shapeVal,materialVal,alloyVal,isplpPage)
ACC.global.spinnerRemove($('.module-banner__meta_form'));},error:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));},complete:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));}});});$(document).on("change","#selectMaterial, #selectAlloy",function(){var shapeVal=$(this).closest('form').find("#selectShape").val();var materialVal=$(this).closest('form').find("#selectMaterial").val();var alloyVal=$(this).closest('form').find("#selectAlloy").val();var isplpPage;if($('#isplpPage').length){isplpPage=true;}
var dimReset=false;var $this=$(this);if(materialVal!=null||alloyVal!=null){ACC.global.spinnerLoad($this.closest('.module-banner__meta_form'));}
$.ajax({url:ACC.config.encodedContextPath+"/category/content/mqsValueFilter",type:"GET",data:{material:materialVal,shape:shapeVal,alloy:alloyVal,isplpPage:isplpPage,dimReset},contentType:"application/json",success:function(response){$('.mqs-form-controls').empty();$('.mqs-form-controls').html(response);if(materialVal==null&&alloyVal==null&&shapeVal==null&&isplpPage){$("#quick-search-materialbtn").attr("disabled","disabled")}
ACC.tkmaterialquickselector.selectedItemDropdown(shapeVal,materialVal,alloyVal,isplpPage)
$.when($(".mqsMapperValue input").each(function(){let id=$(this).attr('id').replace('plpPage','');let value=decodeURIComponent($(this).val());if(id!='Material'&&id!='Alloy'&&id!='Shape'){$("#facetDim-"+id).find("option").each(function(){var textValue=$(this).val();if(value.replace('+',' ')==textValue){$("#facetDim-"+id).val(textValue).attr("selected","selected");$("#facetDim-"+id).val(textValue).prop('selected',true);}});}else{switch(id){case'Material':$("#selectMaterial").find("option").each(function(){var textValue=$(this).val();if(decodeURIComponent($("#plpPageMaterial").val().replaceAll('+',' '))==textValue){$("#selectMaterial").val(textValue).attr("selected","selected");$("#selectMaterial").val(textValue).prop('selected',true);}});break;case'Shape':$("#selectShape").find("option").each(function(){var textValue=$(this).val();if(decodeURIComponent($("#plpPageShape").val().replaceAll('+',' '))==textValue){$("#selectShape").val(textValue).attr("selected","selected");$("#selectShape").val(textValue).prop('selected',true);}});break;case'Alloy':$("#selectAlloy").find("option").each(function(){var textValue=$(this).val();if(decodeURIComponent($("#plpPageAlloy").val().replaceAll('+',' '))==textValue){$("#selectAlloy").val(textValue).attr("selected","selected");$("#selectAlloy").val(textValue).prop('selected',true);}});break;}}})).then(function(){$(".mqsMapperValue").empty();});ACC.global.spinnerRemove($('.module-banner__meta_form'));},error:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));},complete:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));}});});},selectedItemDropdown:function(selectShape,selectMaterial,selectAlloy,pageType){$("#selectShape").find("option").each(function(){if(selectShape!=null&&pageType){$(this).parents('select').attr("selected","selected");}});$("#selectMaterial").find("option").each(function(){if(selectMaterial!=null&&pageType){$(this).parents('select').attr("selected","selected");}});$("#selectAlloy").find("option").each(function(){if(selectAlloy!=null&&pageType){$(this).parents('select').attr("selected","selected");}});$(".materialAjaX").find(".js-selectfacet").each(function(){var id=$(this).attr("name");$('#facetDim-'+id).find('option').each(function(){if($(this).is(':selected:not(:disabled)')&&pageType){$(this).parent('select').attr("selected","selected");}});});},clearMaterialSearch:function(){$(document).on("click",'.material_clear a',function(e){e.preventDefault();$(".mqsMapperValue").empty();var $this=$(this);var isplpPage;if($('#isplpPage').length){isplpPage=true;}
ACC.global.spinnerLoad($this.closest('.module-banner__meta_form'));$.ajax({url:ACC.config.encodedContextPath+"/category/content/resetMqsValueFilter",type:"GET",data:{isplpPage:isplpPage},contentType:"application/json",success:function(response){$('.materal_form').empty();$('.materal_form').html(response);ACC.global.spinnerRemove($('.module-banner__meta_form'));},error:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));},complete:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));}});});},loadCategoryResult:function(){$(document).on("click",'.quick-search',function(e){e.preventDefault();var $this=$(this);ACC.global.spinnerLoad($this.closest('.module-banner__meta_form'));var form=$("#materialQuickSelectorForm");var materialVal=$(this).closest('form').find(".selectMaterial").val();var shapeVal=$(this).closest('form').find(".selectShape").val();var alloyVal=$(this).closest('form').find(".selectAlloy").val();var materialName="";var shapeName="";var alloyName="";if(materialVal!=null){materialName=':relevance:Material:'+materialVal;}
if(shapeVal!=null){shapeName=':Shape:'+shapeVal;}
if(alloyVal!=null){alloyName=':Alloy:'+alloyVal;}
$('<input>').attr({type:'hidden',name:'q',id:'facetVal',value:materialName+shapeName+alloyName,}).appendTo(form);$('<input>').attr({type:'hidden',id:'isMQS',name:'isMQS',value:true}).appendTo('form');var query=$('#facetVal').val();var encodeQuery=encodeURIComponent(query);var isMQSPage=$('#isMQS').val();var url=ACC.config.encodedContextPath+"/buy/"+"material";var facetUrl=url+"?q="+encodeQuery+"?isMQS="+isMQSPage;$.ajax({url:url,type:'GET',data:$("#materialQuickSelectorForm").serialize(),cache:false,success:function(data){var facetQueryValueUrl=$(data).filter("#facetHiddenUrl").val();window.location.href=facetQueryValueUrl;ACC.global.spinnerRemove($('.module-banner__meta_form'));},error:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));},complete:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));}})});$(document).on("click",'#quick-search-materialbtn',function(e){e.preventDefault();var $this=$(this);ACC.global.spinnerLoad($this.closest('.module-banner__meta_form'));var form=$("#materialQuickSelectorForm");var materialVal=$("#selectMaterial").val();var shapeVal=$("#selectShape").val();var alloyVal=$("#selectAlloy").val();var materialName="";var shapeName="";var alloyName="";if(materialVal!=null){materialName=':relevance:Material:'+materialVal;}
if(shapeVal!=null&&materialVal==null){shapeName=':relevance:Shape:'+shapeVal;}
else if(shapeVal!=null){shapeName=':Shape:'+shapeVal;}
if(alloyVal!=null&&materialVal==null&&shapeVal==null){alloyName=':relevance:Alloy:'+alloyVal;}
else if(alloyVal!=null){alloyName=':Alloy:'+alloyVal;}
$('<input>').attr({type:'hidden',name:'q',id:'facetVal',value:materialName+shapeName+alloyName,}).appendTo(form);$('<input>').attr({type:'hidden',id:'isMQS',name:'isMQS',value:true}).appendTo('form');var query=$('#facetVal').val();var isMQSPage=$('#isMQS').val();var encodeQuery=encodeURIComponent(query);var url=ACC.config.encodedContextPath+"/buy/"+"material";var facetUrl=url+"?q="+encodeQuery+"?isMQS="+isMQSPage;$.ajax({url:url,type:'GET',data:$("#materialQuickSelectorForm").serialize(),cache:false,success:function(data){var facetQueryValueUrl=$(data).filter("#facetHiddenUrl").val();var dimensionSelected=$(data).filter("#MQSCall").val();var facetQuery=facetQueryValueUrl.split("?")
var categoryUrlvalue=$(data).filter("#categoryUrl").val();if(categoryUrlvalue==null||categoryUrlvalue==undefined||categoryUrlvalue==""){window.location.href=facetQueryValueUrl;}
else{if(dimensionSelected=="true")
{window.location.href=categoryUrlvalue+"?"+facetQuery[1];}
else
{window.location.href=categoryUrlvalue;}}
ACC.global.spinnerRemove($('.module-banner__meta_form'));},error:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));},complete:function(response){ACC.global.spinnerRemove($('.module-banner__meta_form'));}})})},sortMaterialList:function(){var select_Material_options=$("#selectMaterial option");var selected=$("#selectMaterial").val();select_Material_options.sort(function(a,b){if(a.text>b.text)return 1;if(a.text<b.text)return-1;return 0});$("#selectMaterial").empty().append(select_Material_options);$("#selectMaterial option[value='']").remove();$("#selectMaterial").prepend("<option value='' disabled='disabled' selected='selected'>"+ACC.selectMaterial+"</option>");$("#selectMaterial").val(selected);if($("#materialPageID").val()!==null&&$("#materialPageID").val()!==undefined){$("#selectMaterial").find("option").each(function()
{var textValue=$(this).val();if(textValue==($("#materialPageID").val())){$("#selectMaterial").val(textValue).attr("selected","selected");$("#selectMaterial").val(textValue).prop('selected',true);$("#selectMaterial").trigger('change');return false;}else if(textValue.indexOf($("#materialPageID").val())!==-1){$("#selectMaterial").val(textValue).attr("selected","selected");$("#selectMaterial").val(textValue).prop('selected',true);$("#selectMaterial").trigger('change');}});}
$.when($(".mqsMapperValue input").each(function(){let id=$(this).attr('id');switch(id){case'plpPageMaterial':$("#selectMaterial").find("option").each(function(){var textValue=$(this).val();if(decodeURIComponent($("#plpPageMaterial").val().replaceAll('+',' '))==textValue){$("#selectMaterial").val(textValue).attr("selected","selected");$("#selectMaterial").val(textValue).prop('selected',true);}});break;case'plpPageShape':$("#selectShape").find("option").each(function(){var textValue=$(this).val();if(decodeURIComponent($("#plpPageShape").val().replaceAll('+',' '))==textValue){$("#selectShape").val(textValue).attr("selected","selected");$("#selectShape").val(textValue).prop('selected',true);}});break;case'plpPageAlloy':$("#selectAlloy").find("option").each(function(){var textValue=$(this).val();if(decodeURIComponent($("#plpPageAlloy").val().replaceAll('+',' '))==textValue){$("#selectAlloy").val(textValue).attr("selected","selected");$("#selectAlloy").val(textValue).prop('selected',true);}});break;}})).then(function(){if(!$("body").hasClass("page-homepage")&&!$("body").hasClass("page-notFound")&&!$("body").hasClass("page-search")){$("#selectMaterial").trigger('change');}});},sortClassMaterialList:function(){var selectMaterial=".selectMaterial:visible";var select_Material_options_class=$(".selectMaterial:visible option");var selected_class=$(".selectMaterial").val();select_Material_options_class.sort(function(c,d){if(c.text>d.text)return 1;if(c.text<d.text)return-1;return 0});$(selectMaterial).empty().append(select_Material_options_class);$(selectMaterial+" option[value='']").remove();$(selectMaterial).prepend("<option value='' disabled='disabled' selected='selected'>"+ACC.selectMaterial+"</option>");$(selectMaterial).val(selected_class);if($("#materialPageID").val()!==null&&$("#materialPageID").val()!==undefined){$(selectMaterial).find("option").each(function()
{var textValueClass=$(this).val();if(textValueClass==($("#materialPageID").val())){$(selectMaterial).val(textValueClass).attr("selected","selected");$(selectMaterial).val(textValueClass).prop('selected',true);$(selectMaterial).trigger('change');return false;}else if(textValueClass.indexOf($("#materialPageID").val())!==-1){$(selectMaterial).val(textValueClass).attr("selected","selected");$(selectMaterial).val(textValueClass).prop('selected',true);$(selectMaterial).trigger('change');}});}},loadAlloydataHomepage:function(){if($("body").hasClass("page-homepage")||$("body").hasClass("page-notFound")||$("body").hasClass("page-search")){if($('body').width()>1035){$("body").one('mousemove',function(){$('#selectAlloy').trigger('change');});}else{$("#selectAlloy").hover(function(){$(this).trigger('change');});}}}};

ACC.tkwillcalllocationmodel={_autoload:["willcallInformation"],willcallInformation:function(){$(document).on("click","#js_will_call",function(){$.ajax({url:ACC.config.encodedContextPath+'/checkout/multi/delivery-method/will-call',type:"GET",success:function(response){$("#willCallModal").html(response);$(".seattle_pickup_data").hide();}})})}};

ACC.contentpages={_autoload:["bindingLinkAboutUs","bindingLinkLearningCenter","bindingLinkAccountOrder","bindingLinkBusinessServices","bindingLinkTermsOfUse","bindingLinkAboutUsClick","bindingLinkLearningCenterClick","bindingLinkAccountOrderClick","bindingLinkBusinessServicesClick","bindingLinkTermsOfUseClick","bindingVideoCollection","bindingGalleryContent","bookmarktag"],bindingLinkAboutUs:function(){$(".aboutus_contentpage").ready(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#aboutUs_Res").attr("href","/our-story")}else{$("#aboutUs_Res").removeAttr("href")}})},bindingLinkLearningCenter:function(){$(".learningcenter_contentpage").ready(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#learningCenter_Res").attr("href","/explore-resources")}else{$("#learningCenter_Res").removeAttr("href")}})},bindingLinkAccountOrder:function(){$(".account-order_contentpage").ready(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#accountOrderInfo_Res").attr("href","/how-it-works")}else{$("#accountOrderInfo_Res").removeAttr("href")}})},bindingLinkBusinessServices:function(){$(".business_contentpage").ready(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#businessServices_Res").attr("href","/business-support")}else{$("#businessServices_Res").removeAttr("href")}})},bindingLinkTermsOfUse:function(){$(".termsofuse_contentpage").ready(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#termsOfUse_Res").attr("href","/customer-first")}else{$("#termsOfUse_Res").removeAttr("href")}})},bindingLinkAboutUsClick:function(){$(".aboutus_contentpage").click(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#aboutUs_Res").attr("href","/our-story")}else{$("#aboutUs_Res").removeAttr("href")}})},bindingLinkLearningCenterClick:function(){$(".learningcenter_contentpage").click(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#learningCenter_Res").attr("href","/explore-resources")}else{$("#learningCenter_Res").removeAttr("href")}})},bindingLinkAccountOrderClick:function(){$(".account-order_contentpage").click(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#accountOrderInfo_Res").attr("href","/how-it-works")}else{$("#accountOrderInfo_Res").removeAttr("href")}})},bindingLinkBusinessServicesClick:function(){$(".business_contentpage").click(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#businessServices_Res").attr("href","/business-support")}else{$("#businessServices_Res").removeAttr("href")}})},bindingLinkTermsOfUseClick:function(){$(".termsofuse_contentpage").click(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#termsOfUse_Res").attr("href","/customer-first")}else{$("#termsOfUse_Res").removeAttr("href")}})},bindingVideoCollection:function(){},bindingGalleryContent:function(){$(".galleryContent_contentpage").ready(function(){if($(".footer-content__materials-links").css("display")=="none"){$("#galleryContent_Res").attr("href","/gallery-content")}else{$("#galleryContent_Res").removeAttr("href")}})},bookmarktag:function(){let headerHeight=$('.global-header').height()+$(".BottomHeaderSlot").height();if($(location).attr('hash')!=''){$('html,body').scrollTop(100);setTimeout(function(){let hashtag=decodeURIComponent($(location).attr('hash'));let elem=$(hashtag).length?$(hashtag):$('a[name="'+hashtag.replace('#','')+'"')?$('a[name="'+hashtag.replace('#','')+'"'):undefined;let elemTop;if(elem&&elem.hasClass('panel-collapse')){$('[href*="'+hashtag+'"]').removeClass('collapsed');elem.addClass('in');setTimeout(function(){elemTop=elem.offset().top;$('html').animate({scrollTop:elemTop-headerHeight});},500)}else if(elem){setTimeout(function(){elemTop=elem.offset().top;localStorage.setItem("elemHeight",elemTop);$('html').animate({scrollTop:elemTop-headerHeight});},500)}},1000)}}};

ACC.plpproduct={_autoload:["bindPaginationPageSize","bindSort","bindDimension","bindFacet","bindLengthSelector","bindPLPQty","bindSizeSelector","bindChangeLength","bindResetFilter","bindSelectorQty","bindSelectorCheckbox","bindSelectorAddToCart","bindQtyValidation","bindGridViewAlignment","bindTextBoxValidation","bindCustomModel2Width","bindCustomCutModal","bindAddToProjectList","bindCreateProjectList","bindCreateAndProjectList","bindEnableButton","bindAddToNewProjectList","bindProjectListSelectorAddToCart","plpTopFilter","dimensionSizeSelectorFilter","plpTablePid","bindCutForShipping"],bindTextBoxValidation:function(){$(".custom-cut-modal__input").keydown(function(event){if(event.keyCode==46||event.keyCode==8||event.keyCode==9||event.keyCode==27||event.keyCode==13||(event.keyCode==65&&event.ctrlKey===!0)||(event.keyCode>=35&&event.keyCode<=39)||(event.keyCode==190&&!event.shiftKey)){return}else{if(event.shiftKey||(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)){event.preventDefault()}}})},bindCustomModel2Width:function(){$(document).on("blur","#customCutWidth",function(){var parameterwidthmodel2=$("#customCutWidth").val();var maxWidthAllowed=parseFloat($("#js-maxWidth").val());if(parameterwidthmodel2>=0.5&&parameterwidthmodel2<=maxWidthAllowed){$("#cust2").text("")}else $("#cust2").text("Please provide values between 0.5 and "+maxWidthAllowed)})},bindPaginationPageSize:function(){$(document).on("click","#pagesize-selector ul li",function(){setTimeout(function(){$('<input>').attr({type:'hidden',id:'sort',name:'sort',value:currentSortCheck}).appendTo('form');$("#pagesize-form").submit()},1000)})
$(document).on("click","#pagesize-selector-mob ul li",function(){setTimeout(function(){$('<input>').attr({type:'hidden',id:'sort',name:'sort',value:currentSortCheck}).appendTo('form');$("#pagesize-form-mob").submit()},1000)})},bindSort:function(){$(document).on("click","#js-sort-selector ul li",function(){setTimeout(function(){$("#plpSort-form").submit()},1000)})},bindDimension:function(){$(document).on("click","#js-dimension-selector ul li",function(){setTimeout(function(){$("#plpDimension-form").submit()},1000)})},bindFacet:function(){$(document).on("change",".js-facet-checkbox",function(){$('<input>').attr({type:'hidden',id:'sort',name:'sort',value:currentSortCheck}).appendTo('form');$(this).parents("form").submit()})},plpTablePid:function(){$(document).ready(function(){$('.tableView-content .part a').each(function(){var link=$(this).text();link=link.split('-').join('-<br>');$(this).html(link);});})},bindLengthSelector:function(){$(document).on("click",".js-lengthSelectorCode li",function(){var productIsDeals=($(this).attr("data-variant-deal")&&$(this).attr("data-variant-deal")=="true")?true:false;var productWasPrice=($(this).attr("data-variant-deal-wasprice")&&$(this).attr("data-variant-deal-wasprice")!="")?$(this).attr("data-variant-deal-wasprice"):'';var productSavePrice=($(this).attr("data-variant-deal-saveprice")&&$(this).attr("data-variant-deal-saveprice")!="")?$(this).attr("data-variant-deal-saveprice"):'';var currency=$(this).closest(".get-product-data").find(".get-product-size").find(".selected").attr("data-current-currency-symbol");var $this=$(this);var pCode=$(this).attr("index-code");var currencySymbol=$(".selectedPriceValue"+pCode).data("current-currency-symbol");var price=$(this).data("value");var pQty=$("[id$=qty-plpqty-change"+pCode+"]").val();var totalPrice=price*pQty;var totalPriceMath=currencySymbol+(Math.round(totalPrice*100)/100).toFixed(2);var variantCode=$(this).data("variant-code");var productPriceText=$(this).data("product-price-text");var productPrice=currencySymbol+(Math.round(price*100)/100).toFixed(2);$("[id$=productCodePost"+pCode+"]").attr("value",variantCode);$(this).closest('.similar-product__item').find("[name=baseProduct]").attr("id","product_CodeMsg"+variantCode);$(".selectedPriceValue"+pCode).html(productPrice+"&nbsp;"+productPriceText);$(".selectedPriceValue"+pCode).attr("data-product-price",price);$(".selectedPriceValue"+pCode).attr("data-product-base-price",price);$("[id$=subtotal"+pCode+"]").text(totalPriceMath+" "+"for"+" "+pQty);let discountJson=$(this).attr("data-variant-qty-discounts")!=""?JSON.parse($(this).attr("data-variant-qty-discounts")):"";if(discountJson!=undefined&&discountJson!=""){let highestSavings=discountJson[discountJson.length-1].dsaving;let tableRows="";discountJson.forEach(x=>{tableRows+='<div class="row discount-msg-table "><div class="col-xs-4 discount qty"><span>'+x.dqty+'</span></div><div class="col-xs-4 discount discounted-price"><span>'+x.dprice+'</span></div><div class="col-xs-4 discount percent"><span>'+x.dsaving+'</span></div></div>';});let titleHTML='<div class="qty-discount-msg active-table " id="discount-section'+variantCode+'"><div class="msg-title"><div class="title-text"><img src="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/qty-discount.svg" width="15" height="19" class="img-responsive" alt="qty discount"><span>Buy More &amp; Save up to '+highestSavings+' !</span></div></div>';let tableHeading='<div class="row msg-heading"><div class="col-xs-4 heading-text qty-heading"><span>Qty</span></div><div class="col-xs-4 heading-text price-heading"><span>Price ea.</span></div><div class="col-xs-4 heading-text save-heading"><span>Savings</span></div></div><div class="hidden discount-json">'+JSON.stringify(discountJson)+' </div><div class="discount-table-body">';let moreLessHtml='<div class="more-less-section"><div class="text-center more-text"><a href="javascript:void(0);"><span>More</span><i class="fa fa-chevron-down" aria-hidden="true"></i></a></div><div class="text-center less-text"><a href="javascript:void(0);"><span>Less</span><i class="fa fa-chevron-up" aria-hidden="true"></i></a></div></div></div>';let dynamicHtml=titleHTML+tableHeading+tableRows+moreLessHtml;$this.closest('.similar-product__item').find('.qty-discount-plp').html(dynamicHtml);$this.closest('.similar-product__item').find('.qty-discount-plp').show();ACC.global.hideShowQtyMsg();}else{$this.closest('.similar-product__item').find('.qty-discount-plp').html("");$this.closest('.similar-product__item').find('.qty-discount-plp').hide();}
var length=$(this).attr("length-key");$("#selector"+pCode).attr("length-code",length);$this.closest('.similar-product__item').find('.js-addToCartButton').prop('disabled',false);$this.closest('.similar-product__item').find('.favourite_add').removeClass('disabled');$this.closest('.similar-product__item').find('.add-to-list .btn-secondry').prop('disabled',false);$this.closest('.similar-product__item').find('.add-to-list .custom-select').removeClass('btn-disabled');$('#addToCartForm'+pCode).find('.deal-inventory-notification u').text("");$('#addToCartForm'+pCode).find('.alreadyAdded').val("");ACC.pdpproduct.bindStockAndAddedQuantity(variantCode);$(this).closest(".get-product-data").find(".similar-product__item_option").find(".item-price").addClass("text-orange");if(productIsDeals){$(this).closest(".get-product-data").find("input[name='dealsBaseMsg']").addClass('isDealProduct');}
else
{$(this).closest(".get-product-data").find("input[name='dealsBaseMsg']").removeClass('isDealProduct');}
$(this).closest(".get-product-data").find(".js-wasprice").empty();if(productIsDeals&&productWasPrice!=""){var wasPriceHtml='<p class="h5 mb-5 old-price"><em>'+ACC.wasPrice+'&nbsp;<del>'+currency+''+productWasPrice+'</del></em></p></div>';var savePriceHtml='<p class="h5 you-save hide">'+ACC.savePrice+'&nbsp;'+currency+''+productSavePrice+'</p>';$(this).closest(".get-product-data").find(".js-wasprice").append(wasPriceHtml);$(this).closest(".get-product-data").find(".js-wasprice").append(savePriceHtml);}
setTimeout(function(){$(".js-product-list [id=qtyValue"+pCode+"]").trigger("blur");$('#addToCartForm'+pCode).find('.deal-inventory-notification').addClass('hidden');$('#addToCartForm'+pCode).find('.js-addToCartButton').removeClass("disabled").prop("disabled",false);},0);$this.closest('.similar-product__item').find('.js-lengthSelectorCode').css('display','none');$(this).parent().children().removeClass('selected');$('.js-lengthSelectorCode li[data-variant-code="'+variantCode+'"]').addClass('selected');if(!($this.closest('.similar-product__item').find('.bestCutOption').hasClass('js-selected'))){$this.closest('.similar-product__item').find('.cutForShipping').addClass('hide');$this.closest('.similar-product__item').find('.heatLotOption').addClass('hide');$this.closest('.similar-product__item').find('.select-best-shipping').prop('checked',false);ACC.global.UpdateBestCutOption($(this),variantCode,'plp');}
else{$this.closest('.similar-product__item').find('.bestCutOption').removeClass('js-selected');}});},bindPLPQty:function(){$(document).on("blur",".js-qty",function(){var qty=$(this).val();var pCode=$(this).attr("index-data");if(qty=="0"||qty=="00"||qty=="000"||qty=="0000"||qty==""){$("[id=qtyValue"+pCode+"]").val("1")}
var plpqtyUpdate=$(this).val();$("[id=qty-plpqty-change"+pCode+"]").val(plpqtyUpdate);var qty1=$("[id=qtyValue"+pCode+"]").val();let variantCode=$("[id$=productCodePost"+pCode+"]").attr("value");let rootElem=$(this).parents(".similar-product__item_option");let qtyDiscountElem=rootElem.find(".discount-json");let discountData=qtyDiscountElem&&qtyDiscountElem.length?JSON.parse(qtyDiscountElem.html()):undefined;let selectedIndex,qtyVal=parseInt($(this).val());var currencySymbol=$(".selectedPriceValue"+pCode).data("current-currency-symbol");if(discountData){discountData.forEach((x,i)=>{qty1>=parseInt(x.min)&&qty1<=parseInt(x.max)?selectedIndex=i:"";});}
let wasPrice;let isDealProduct=$(this).closest(".get-product-data").find("input[name='dealsBaseMsg']").hasClass("isDealProduct");if(selectedIndex!=undefined){wasPrice=$(".selectedPriceValue"+pCode).attr("data-product-base-price");wasPrice=(Math.round(wasPrice*100)/100).toFixed(2);let normalPrice=(Math.round(discountData[selectedIndex].price*100)/100).toFixed(2)
$(".selectedPriceValue"+pCode).attr("data-product-price",discountData[selectedIndex].price);$(".selectedPriceValue"+pCode).text(currencySymbol+normalPrice+" "+ACC.priceEA);}else{let oldPrice=$(".selectedPriceValue"+pCode).attr("data-product-base-price");oldPrice=(Math.round(oldPrice*100)/100).toFixed(2);$(".selectedPriceValue"+pCode).attr("data-product-price",oldPrice);$(".selectedPriceValue"+pCode).text(currencySymbol+oldPrice+" "+ACC.priceEA);}
var productBasePrice=$(".selectedPriceValue"+pCode).attr("data-product-price");rootElem.find('.discount-msg-table').removeClass('selected');var subtotal=((Math.round(productBasePrice*100)/100)*qty1).toFixed(2);$("[id$=subtotal"+pCode+"]").text(currencySymbol+subtotal+" "+"for"+" "+qty1);$("#qtySelectedProduct").val(qty)
if(wasPrice&&wasPrice!=""){selectedIndex!=undefined?rootElem.find('.discount-msg-table').eq(selectedIndex).addClass('selected'):'';$(this).closest(".get-product-data").find(".similar-product__item_option").find(".item-price").addClass("text-orange");var wasPriceHtml='<p class="h5 mb-5 old-price"><em>'+ACC.wasPrice+'&nbsp;<del>'+currencySymbol+''+wasPrice+'</del></em></p></div>';$(this).closest(".get-product-data").find(".old-price").remove();$(this).closest(".get-product-data").find(".item-price .js-wasprice").append(wasPriceHtml);}else if(!isDealProduct){$(this).closest(".get-product-data").find(".old-price").remove();$(this).closest(".get-product-data").find(".similar-product__item_option").find(".item-price").removeClass("text-orange");}
if($(this).closest('.similar-product__item').find('.bestCutOption input[type="radio"]:checked').length){var cutQty=$(this).closest('.similar-product__item').find('.bestCutOption input[type="radio"]:checked').attr('data-cut-quantity');var inputQtyPlp=$('#qtyValue'+pCode).val();if(cutQty!==inputQtyPlp){$(this).closest('.similar-product__item').find('.cutForShipping').addClass('hide');$(this).closest('.similar-product__item').find('.bestCutOption').removeClass('js-selected');}}
let isMarketplaceProduct=$(this).parents('.add_to_cart_form').find("#isMarketplaceProduct").val()==='true';if(isMarketplaceProduct||isDealProduct){var stockQuantity;var availableQuantity=$(this).parents('.add_to_cart_form').find('.alreadyAdded').val();let callbackFn=()=>{availableQuantity=$(this).parents('.add_to_cart_form').find('.alreadyAdded').val();if(availableQuantity>0){stockQuantity=$(this).parents('.add_to_cart_form').find('.totalStock').val();}else{stockQuantity=$(this).parents('.add_to_cart_form').find('.deal-inventory-notification u').text();}
var totalQuantity=parseInt(availableQuantity)+parseInt(qty);if(totalQuantity>stockQuantity&&totalQuantity!=null&&stockQuantity!=null){$(this).parents('.add_to_cart_form').find('.deal-inventory-notification').removeClass('hidden');$(this).parents('.add_to_cart_form').find('.js-addToCartButton').attr('disabled','disabled');}else{$(this).parents('.add_to_cart_form').find('.deal-inventory-notification').addClass('hidden');$(this).parents('.add_to_cart_form').find('.js-addToCartButton').removeClass("disabled").prop("disabled",false);}};availableQuantity==""?ACC.pdpproduct.bindStockAndAddedQuantity(variantCode,callbackFn):callbackFn();}});$(document).on("submit",".product-order__list .add_to_cart_form",function(e){e.preventDefault();});$(document).on("keyup",".js-qty",function(e){if(e.keyCode===13){$(this).blur()}});},bindSizeSelector:function(){$(document).on("click",".js_selector",function(e){e.preventDefault();var title=$(this).attr("title");var q=$(this).attr("data-q");var length=$(this).attr("length-code");var productCode=$(this).attr("index-code");var qty=$("[id*=qtyValue"+productCode+"]").val();var page='0';if(q!=null){var material=null;var shape=null;var alloy=null;var query=q.split(":");for(var i=0;i<query.length;i++){if(query[i].indexOf("material")>=0){if(material!=null){material=material+":material:"+query[i+1]}else{material=":material:"+query[i+1]}}
if(query[i].indexOf("shape")>=0){if(shape!=null){shape=shape+":shape:"+query[i+1]}else{shape=":shape:"+query[i+1]}}
if(query[i].indexOf("alloy")>=0){if(alloy!=null){alloy=alloy+":alloy:"+query[i+1]}else{alloy=":alloy:"+query[i+1]}}}
if(material!=null){if(shape!=null){if(alloy!=null){q=":"+material+shape+alloy+":cutValues:"+length}else{q=":"+material+shape+":cutValues:"+length}}else{if(alloy!=null){q=":"+material+alloy+":cutValues:"+length}else{q=":"+material+":cutValues:"+length}}}else if(shape!=null){if(alloy!=null){q=":"+shape+alloy+":cutValues:"+length}else{q=":"+shape+":cutValues:"+length}}else if(alloy!=null){q=":"+alloy+":cutValues:"+length}else{q="::cutValues:"+length}}else{q="::cutValues:"+length}
var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+title+"?lengthCode="+length+"&productCode="+productCode+"&q="+q;$.get(url,function(data){var modaldata=$(".js_size_selector").html(data);var indexvaluemy=$("#sendingindexvalue").val();var classNames=$(".addingcolumnselector").attr("class").toString().split(" ");$(".addingcolumnselector").removeClass(classNames[classNames.length-1]);$(".addingcolumnselector").addClass("size-selector"+(6-indexvaluemy));$(modaldata).modal();$(".size-selector__table__data-list").mCustomScrollbar({});if($(window).width()<768){$(".dynamicappendedhere").show()}else{$(".dynamicappendedhere").hide()}
$("#qty"+productCode).val(qty)})})},bindChangeLength:function(){$(document).on("change","#js-sizeSelector",function(e){e.preventDefault();var $this=$(this);var $thisClosest=$this.closest('.filter-bar');ACC.global.spinnerLoad($thisClosest);var length=$("option:selected",this).val();var q=$("option:selected",this).attr("data-q");var query=q.split(":");var queryKey=q.replace(query[query.length-1],length);var productCode=$("option:selected",this).attr("data");var qty=1;var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+categoryCode+"?lengthCode="+length+"&productCode="+productCode+"&q="+queryKey;var ispdp=$("#ispdp").val();if(ispdp==="true"){var url=url+"&pdp=true"}
$.get(url,function(data){if(ispdp==="true"){$("#specifications-tab1").html(data);var indexvaluemy=$("#sendingindexvalue").val();var classNames=$(".addingcolumnselector").attr("class").toString().split(" ");$(".addingcolumnselector").removeClass("size-selector0, size-selector1, size-selector2, size-selector3, size-selector4, size-selector5, size-selector6, size-selector7");if(indexvaluemy==2){$(".addingcolumnselector").addClass("size-selector"+4)}else if(indexvaluemy==1){$(".addingcolumnselector").addClass("size-selector"+5)}else if(indexvaluemy==4){$(".addingcolumnselector").addClass("size-selector"+2)}else if(indexvaluemy==3){$(".addingcolumnselector").addClass("size-selector"+3)}else if(indexvaluemy==5){$(".addingcolumnselector").addClass("size-selector"+1)}else if(indexvaluemy==6){$(".addingcolumnselector").addClass("size-selector"+0)}else{$(".addingcolumnselector").addClass("size-selector"+(6-indexvaluemy))}
$(".size-selector__table__data-list").mCustomScrollbar({});$(".size-selector__table__checked-data .tag").matchHeight()}else{var modaldata=$(".js_size_selector").html(data);var indexvaluemy=$("#sendingindexvalue").val();var classNames=$(".addingcolumnselector").attr("class").toString().split(" ");$(".addingcolumnselector").removeClass(classNames[classNames.length-1]);$(".addingcolumnselector").addClass("size-selector"+(6-indexvaluemy));$(modaldata).modal();$(".size-selector__table__data-list").mCustomScrollbar({});if($(window).width()<768){$(".dynamicappendedhere").show()}else{$(".dynamicappendedhere").hide()}}
$("#qty"+productCode).val(qty)})})},bindResetFilter:function(){$(document).on("click","#resetFilter",function(e){e.preventDefault();var product;var q;var $this=$(this);var $thisClosest=$this.closest('.filter-bar');ACC.global.spinnerLoad($thisClosest);product=$("option:selected","#js-sizeSelector").attr("data");q=$("option:selected","#js-sizeSelector").attr("data-q");if(product==undefined){var id=$(this).parents("form").find(".col-filter:first").children('select').attr("id");product=$("option:selected","#"+id).attr("data");q=$("option:selected","#"+id).attr("data-q");}
var query=q.split(":");var queryKey=q.replace(query[query.length-1],defaultLength);var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+categoryCode+"?lengthCode="+defaultLength+"&productCode="+product+"&q="+queryKey;ACC.plpproduct.bindPostSelector(url,$thisClosest)
$("#js-sizeSelector .js-sizeSelector__selected").prop('selected',true);})},bindSelectorQty:function(){$(document).on("input",".js-size-qty",function(e){e.preventDefault();var $this=$(this);var qty=$this.val();var pCode=$(this).attr("data");if(qty>0){$this.closest('.size-selector__table__checked-data').find(".js-cart-btn").removeAttr("disabled")}else{$this.closest('.size-selector__table__checked-data').find(".js-cart-btn").attr("disabled","disabled");}})},bindSelectorCheckbox:function(){$(document).on("change",".js-checkbox",function(e){e.preventDefault();var pcode=$(this).attr("data");if($(this).is(":checked")==!0){$("#qty"+pcode).val("1")}else{$("#qty"+pcode).val("0")}
if($(".js-checkbox").is(":checked")==!0)
$(".js-cart-btn").removeAttr("disabled");else $(".js-cart-btn").attr("disabled","disabled")})},bindSelectorAddToCart:function(){$(document).on("click",".js-cart",function(e){e.preventDefault();var addToCartButton=$(this).find(".js-cart-btn");addToCartButton.addClass("disabled").prop("disabled",true);var addToCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("add-cart");var itemInCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("item-cart");var productQty=[];$(".js-checkbox").each(function(){if($(this).prop("checked")==!0){var pcode=$(this).attr("data");var qty=$("#qty"+pcode).val();var code=$("#qty"+pcode).attr("data-variant");productQty.push(code+":"+qty)}});var url=addToCartUrl+"?productQty="+productQty.toString();$.get(url,function(data){var ispdp=$("#ispdp").val();if(ispdp==="true"){ACC.tkaddtocart.miniCartComponent(addToCartButton);$(".js_total_items_count").html("<label>"+data+"</label>");$(".mini-cart__item-list").mCustomScrollbar({})}else{ACC.tkaddtocart.miniCartComponent(addToCartButton);$(".js_size_selector").modal("hide");$(".js_total_items_count").html("<label>"+data+"</label>");}
addToCartButton.find(".js-addToCartButton-text").text(itemInCartButtonText);setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);ACC.tkaddtocart.closeMiniCartTimeSet();})})},bindProjectListSelectorAddToCart:function(){var MultyProQty=0;$(document).on("click",".js-cart-projectlist",function(e){e.preventDefault();let eventSource=document.body.getAttribute("pageType")||document.body.className||"Unknown";var addToCartButton=$(this).find(".js-cart-projectlist");var result=$(".js-projectListAddToCart").data("size-cart");var addToCartButtonText=$(".js-projectListAddToCart").data("add-cart");var itemInCartButtonText=$(".js-projectListAddToCart").data("item-cart");var i;let stringifyData,processedData,projectTitle;projectTitle=$("#projectlistName").text();projectTitle?stringifyData=$("#gaData-ProjectListData-"+projectTitle).html():'';if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));}
processedData.items.forEach(x=>{let code=x.item_id;x.quantity=$("[id^='js-pdp-qty_wishlist"+code+"']").val();x.price=$("[id^='selectedVariantPdpPriceValuewishlist"+code+"']").attr("data-product-price");x.item_variant=$("[id^='productCodewishlist"+code+"']").val();});var productQty=[];for(i=0;i<result;i++){var productCode=$(".add-to-cart input[name='productCodePost']")[i]?$(".add-to-cart input[name='productCodePost']")[i].value:undefined;var qty=document.getElementsByClassName("form-control qty-text js-pdp-qty")[i]?document.getElementsByClassName("form-control qty-text js-pdp-qty")[i].value:undefined;productCode?productQty.push(productCode+":"+qty):'';}
$('#js-btn-keep-quoted-pricing').on("click",function(){$('#navigateToQuoteModal').modal('hide');$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');});$('#js-btn-remove-quoted-pricing').on("click",function(){ACC.tkaddtocart.ajaxResetAndUpdateCart("addAllProduct",getCall);});var url="/en/tkaddtocart/selectorCart"+"?productQty="+productQty.toString();url+="&eventSource="+encodeURIComponent(eventSource);let getCall=()=>{$.get(url,function(data){if(data==0){$('#navigateToQuoteModal').modal('show');}else{processedData?ACC.ga4.addMultipleItemToCart(processedData):'';$(".get-all-product-data .get-product-data").each(function(index){if(index!==0){$(".mini-cart-modal__body_item:last").clone().appendTo(".mini-cart-modal__body_items");}
MultyProQty=parseInt(MultyProQty)+parseInt($(this).find('.get-product-qty .form-control').val());ACC.tkaddtocart.addToCartMiniCartPopup($(this),index,MultyProQty,$(this).hasClass('asmProduct'));});$(".js_total_items_count").html("<label>"+data+"</label>");MultyProQty=0;$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}})}
getCall();})},bindQtyValidation:function(){$(document).on("keydown",".qty-text,.item-qty",function(event){if(event.keyCode==46||event.keyCode==8||event.keyCode==9||event.keyCode==27||event.keyCode==13||(event.keyCode==65&&event.ctrlKey===!0)||(event.keyCode>=35&&event.keyCode<=39)){return}else{if(event.shiftKey||(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)){event.preventDefault()}}})},bindPostSelector:function(url,$thisClosest){var ispdp=$("#ispdp").val();if(ispdp==="true"){var url=url+"&pdp=true"}
var idLen=$("option:selected","#js-sizeSelector").attr("id");console.log(url);$.ajax({type:"POST",url:url,data:$("#plp-sizeSelector").serialize(),success:function(data){var ispdp=$("#ispdp").val();var totalNumberOfResults=$(data).filter('#js-totalNumberOfResults').val();var selectedLength=$(data).filter('#js-selectedLength').val();if(ispdp==="true"){$('#js-available-pdp-heading').empty();$('#js-available-pdp-heading').html("<div class='h3 bold modal-body__heading'>"+ACC.sizeSelectorFirstTitile
+ACC.sizeSelectorDescriptionSpace+totalNumberOfResults+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorSecondTitle+ACC.sizeSelectorDescriptionSpace
+selectedLength+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorThirdTitle+"</div>")}else{$('#js-available-plp-heading').empty();$('#js-available-plp-heading').html("<h3 class='modal-body__heading'>"+ACC.sizeSelectorFirstTitile
+ACC.sizeSelectorDescriptionSpace+totalNumberOfResults+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorSecondTitle
+ACC.sizeSelectorDescriptionSpace+selectedLength+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorThirdTitle+"</h3>")}
if($(data).filter("#sendingindexvalue").val()==undefined){var indexvaluemy=$(data).find("#sendingindexvalue").val();}else{var indexvaluemy=$(data).filter("#sendingindexvalue").val();}
$(".addingcolumnselector").removeClass("size-selector0");$(".addingcolumnselector").removeClass("size-selector1");$(".addingcolumnselector").removeClass("size-selector2");$(".addingcolumnselector").removeClass("size-selector3");$(".addingcolumnselector").removeClass("size-selector4");$(".addingcolumnselector").removeClass("size-selector5");$(".addingcolumnselector").removeClass("size-selector6");if(indexvaluemy==2){$(".addingcolumnselector").addClass("size-selector"+4)}else if(indexvaluemy==1){$(".addingcolumnselector").addClass("size-selector"+5)}else if(indexvaluemy==4){$(".addingcolumnselector").addClass("size-selector"+2)}else if(indexvaluemy==3){$(".addingcolumnselector").addClass("size-selector"+3)}else if(indexvaluemy==5){$(".addingcolumnselector").addClass("size-selector"+1)}else if(indexvaluemy==6){$(".addingcolumnselector").addClass("size-selector"+0)}else{$(".addingcolumnselector").addClass("size-selector"+6)}
$(".selected-prod-header").remove();$(".size-selector__table__checked-data .part").after($(data).filter(".selected-prod-header.hide").html());if($(data).find("#js-sizeselector-table")){$("#js-selector").empty();$(".size-selector").html(data);console.log(idLen);$("#js-sizeSelector"
+" option[id='"+idLen
+"']").attr("selected","selected");$(".size-selector__table__data-list").mCustomScrollbar({});}
if($thisClosest!=undefined){ACC.global.spinnerRemove($thisClosest);}},error:function(data){if($thisClosest!=undefined){ACC.global.spinnerRemove($thisClosest);}}})},bindGridViewAlignment:function(){$(".similar-product__item_title").matchHeight();$(".item-price").matchHeight();$(".similar-product__item_text").matchHeight()},bindCustomCutModal:function(){$(document).on("click",".js_plp_customCut",function(e){var $this=$(this);var url=ACC.config.encodedContextPath+"/buy/plp/customCut";var dimensionString=$(this).data("dimensionstring");var variantItemType=$(this).data("variantitemtype");var baseProductName=$(this).data("baseproductname");var baseProductCode=$(this).data("baseproductcode");var lengthvalue=$("#selector"+baseProductCode).attr("length-code");var variantCode=$(".productCodePost"+baseProductCode).val();var variantPrice;if($('body').hasClass('page-productGrid')){variantPrice=(Math.round($(".selectedPriceValue"+baseProductCode).attr("data-product-base-price")*100)/100).toFixed(2);}else{variantPrice=(Math.round($(".selectedPriceValue"+baseProductCode).attr("data-product-price")*100)/100).toFixed(2);}
var postData={dimensionDataString:dimensionString,productName:baseProductName,baseProductCode:baseProductCode,variantType:variantItemType,variantCode:variantCode,variantPrice:variantPrice,cutValue:lengthvalue,CSRFToken:ACC.config.CSRFToken};$.post(url,postData).done(function(result,data,status){$(".js_custom_cut_modal").html(result);$(".js_custom_cut_modal").modal("show");var $thisImgSrc=$this.closest('.get-product-data').find('.get-product-img .img-responsive').attr('src');$('.js_custom_cut_modal .get-product-img .img-responsive').attr('src',$thisImgSrc);if($(".js_custom_cut_modal").hasClass("pdp-true")){if($("#isfavcolorglyphiconpdp").hasClass("fa-heart")){$("#custom-cut-fav-icon").addClass("selected")}}else if($("#isfav"+baseProductCode).val()!=""){$("#custom-cut-fav-icon").addClass("selected")}
ACC.plpproduct.bindCustomCutPriceCal();ACC.plpproduct.bindCustomCutLengthCal();ACC.plpproduct.bindCustomCutFav();ACC.plpproduct.bindCreateProjectList();ACC.plpproduct.bindSignInRequiredError()})});$('.js_custom_cut_modal').on('hidden.bs.modal',function(){$('.js_custom_cut_modal').empty();})},bindCustomCutQtyPrice:function(){var qty=$('.js_custom_modal_qty').val();var price=$('.js_custom_modal_qty').attr("data-product-price");var productPrice=(Math.round(price*qty*100)/100).toFixed(2);var currencySymbol=$('.js_custom_modal_qty').data("currency-symbol");var pCode=$('.js_custom_modal_qty').data("baseproductcode");$("#js_variant_cost").html("<strong>"+currencySymbol+productPrice+"</strong>");$(".custom-cut-modal__input [id*=qtyValue"+pCode+"]").val(qty);$("#customCutQty").val(qty);},bindCustomCutPriceCal:function(){$(document).on("input",".js_custom_modal_qty",function(e){e.target.value=e.target.value.replace(/[^0-9]/g,'');var qty=e.target.value;if(qty=="0"||qty=="00"||qty=="000"||qty=="0000"||qty==""){$(".js_custom_cut_addtocart").attr("disabled","disabled");$(".js-custom-cut-calculate-price").attr("disabled","disabled");}else{$(".js_custom_cut_addtocart").removeAttr("disabled");$(".js-custom-cut-calculate-price").removeAttr("disabled");}});$(document).on("keyup",".js_custom_modal_qty",function(e){if(e.keyCode===13){$(this).blur()}})},bindCustomCutLengthCal:function(){$(document).on("click",".js-custom-cut-calculate-price",function(){var $this=$(this);var dimension=$(".js-custom-cut-length").data("dimension");var length=$(".js-custom-cut-length").val();var width=$(".js-custom-cut-width").val();var variantType=$(this).data("varianttype");var maxLengthAllowed=parseFloat($("#js-maxLength").val());var maxWidthAllowed=parseFloat($("#js-maxWidth").val());var custoCutQty=$('.js_custom_modal_qty').val();$("#cust1").text("");$("#cust2").text("");$(".js_custom_cut_addtocart").removeAttr("disabled");$this.attr("disabled","disabled");if(variantType=="LongVariant"&&(length==null||length<1||length>maxLengthAllowed)){$("#cust1").text("Please provide values between 1 and "+maxLengthAllowed);$(".js_custom_cut_addtocart").attr("disabled","disabled");return!1}else if(variantType!="LongVariant"){if(length==null||length<0.5||length>maxLengthAllowed){$("#cust1").text("Please provide values between 0.5 and "+maxLengthAllowed);$(".js_custom_cut_addtocart").attr("disabled","disabled");return!1}else if(width==null||width<0.5||width>maxWidthAllowed){$("#cust2").text("Please provide values between 0.5 and "+maxWidthAllowed);$(".js_custom_cut_addtocart").attr("disabled","disabled");return!1}}
var baseProductCode=$(".js-custom-cut-length").data("baseproductcode");if(width==undefined)
var url=ACC.config.encodedContextPath+"/buy/pid/findCustomCutPrice?baseProductCode="+baseProductCode+"&qty="+custoCutQty+"&cut1="+length+"&cut2="+0;else var url=ACC.config.encodedContextPath+"/buy/pid/findCustomCutPrice?baseProductCode="+baseProductCode+"&qty="+custoCutQty+"&cut1="+length+"&cut2="+width;$.get(url).done(function(result,data,status){setTimeout(function(){var res=result.split(",");var selectedVariantPrice=(Math.round(res[1]*100)/100).toFixed(2);var currencySymbol=$("#js_variant_cost").data("currency-symbol");var length=$(".js-custom-cut-length").val();var width=$(".js-custom-cut-width").val();$(".js_custom_cut_cost").val(selectedVariantPrice);$("#js_variant_cost").html("<strong>"+currencySymbol+selectedVariantPrice+"</strong>");$(".js-custom-cut-calculate-price-for").text(currencySymbol+""+selectedVariantPrice+" "+"for"+" "+custoCutQty);$(".js-custom-cut-calculate-sub-price").html(currencySymbol+""+selectedVariantPrice);$(".js_custom_modal_qty").attr("data-product-price",selectedVariantPrice);$("#customCutProductCode").val(res[0]);$("#customCutLength"+baseProductCode).attr("value",length);if(width!=undefined){$("#customCutWidth"+baseProductCode).attr("value",width)}
ACC.plpproduct.bindCustomCutQtyPrice();if(!$this.hasClass('check-add-to-cart')){$('.js_custom_cut_addtocart').trigger('click');}},ACC.waitTime);});});$(document).on("input",".js-custom-cut-length,.js-custom-cut-width",function(e){this.value=this.value.match(/^\d+\.?\d{0,3}/);var dimension=$(".js-custom-cut-length").data("dimension");var length=$(".js-custom-cut-length").val();var width=$(".js-custom-cut-width").val();var variantType=$(this).data("varianttype");var maxLengthAllowed=parseFloat($("#js-maxLength").val());var maxWidthAllowed=parseFloat($("#js-maxWidth").val());$("#cust1").text("");$("#cust2").text("");$(".js_custom_cut_addtocart").removeAttr("disabled");$(".js-custom-cut-calculate-price").removeAttr("disabled");if(variantType=="LongVariant"&&(length==null||length<1||length>maxLengthAllowed)){$("#cust1").text("Please provide values between 1 and "+maxLengthAllowed);$(".js_custom_cut_addtocart").attr("disabled","disabled");$(".js-custom-cut-calculate-price").attr("disabled","disabled");return!1}else if(variantType!="LongVariant"){if(length==null||length<0.5||length>maxLengthAllowed){$("#cust1").text("Please provide values between 0.5 and "+maxLengthAllowed);$(".js_custom_cut_addtocart").attr("disabled","disabled");$(".js-custom-cut-calculate-price").attr("disabled","disabled");return!1}else if(width==null||width<0.5||width>maxWidthAllowed){$("#cust2").text("Please provide values between 0.5 and "+maxWidthAllowed);$(".js_custom_cut_addtocart").attr("disabled","disabled");$(".js-custom-cut-calculate-price").attr("disabled","disabled");return!1}}});$(document).on("keyup",".js-custom-cut-length,.js-custom-cut-width",function(e){if(e.keyCode===13){$(this).blur()}})},bindAddToProjectList:function(){$(".similar-product__item_option .add-to-list .btn-secondry").on("click",function(){var $this=$(this);if($this.closest('.pdp-mainsection__item-favorites').hasClass('row')){$this.closest('.pdp-mainsection__item-bottom').find('.add-to-favorites label').removeClass("hide");}else{var $thisClosest=$this.closest(".add-to-list");$thisClosest.find(".error").removeClass("hide").addClass("show");}})},bindAddToProjectListPdp:function(){$(".pdp-mainsection__image .add-to-list .btn-secondry").on("click",function(){var $this=$(this);if($this.closest('.pdp-mainsection__item-favorites').hasClass('row')){$this.closest('.pdp-mainsection__item-bottom').find('.add-to-list label').removeClass("hide");}else{var $thisClosest=$this.closest(".add-to-list");$thisClosest.find(".error").removeClass("hide").addClass("show");}})},bindCreateProjectList:function(){$(".create-new-list").on("click",function(){var pcode=$(this).attr("id");var sizeSelected="";var ispdp=$("#ispdp").val();var pageType=$(this).attr("pageTypeName");var favPageProduct=pageType+pcode;if(ispdp==="true"){sizeSelected=$("[id*=productCode"+pcode+"]").val();}else if(pageType==="wishlist"){sizeSelected=document.getElementById("productCodewishlist"+pcode).value;}else if(pageType==="fav"){sizeSelected=document.getElementById("productCode"+favPageProduct).value;}else{sizeSelected=$("[id*=productCodePost"+pcode+"]").val();}
var pdpcode=$(".pdp-projList").val();$.ajax({url:ACC.config.encodedContextPath+"/tkwish-list/createprojectlist",data:{productCode:sizeSelected},type:"GET",success:function(response){$(".proj-listMsg"+sizeSelected).empty();$(".js-customcut-error"+sizeSelected).empty();$("#createlist").html(response);if($(".create-new-list").hasClass("customcut")){$(".addtoprobtn").addClass("customcutrequest")}
if(pdpcode){$("#orderdetail-projlist").addClass("hide");$("#plp-projlist").removeClass("hide")}
$("#createlist").modal("show")},error:function(){}})})},bindCreateAndProjectList:function(){$(document).on("click",".addToproj",function(){var pcode=$(this).attr("id");var projListName=$("#wishListName").val();var orderPageVal=$("#orderDetailList").val();$.ajax({type:"POST",url:ACC.config.encodedContextPath+"/tkwish-list/saveOrderlist",data:{productCodePost:pcode,projListName:encodeURIComponent(projListName),CSRFToken:ACC.config.CSRFToken},success:function(response){if(response=="productAdded"){if($(".addToproj").hasClass("customcutrequest")){var url=ACC.config.encodedContextPath+"/tkwish-list/show-projectlists";$.get(url,function(data){$("#js-projectlists").empty()
$.each(data,function(key,value){$("#js-projectlists").append($("<li class='proj-list-name js-customcut-profav'></li>").attr("id",pcode).attr("projList",value.name).text(value.name));$("#createlist").modal("hide")})})}else{window.location.reload()}}
if(response=="projectListExists"){if(orderPageVal){$("#createlist").modal("show");$(".createlistMsg").html("<label  class='error'>"+ACC.saveOrderListMsg+"</label>")}else{$("#createlist").modal("show");$(".createlistMsg").html("<label  class='error'>"+ACC.createListMsg+"</label>")}}}})})},bindEnableButton:function(){$(document).on("keyup","#wishListName",function(e){var inputVal=$("#wishListName").val().length;if(inputVal==0||inputVal==""){$(".addToproj").attr("disabled","disabled")}else{$(".addToproj").removeAttr("disabled")}})},bindAddToNewProjectList:function(){$(document).on("click",".proj-list-name",function(){var pcode=$(this).attr("id");var listName=$(this).attr("projList");var pageType=$(this).attr("pagetype");var iscustomcut=$(this).hasClass("js-customcut-profav");var sizeSelected="";var favPageProduct=pageType+pcode;var ispdp=$("#ispdp").val();if(ispdp==="true"){sizeSelected=$("[id*=productCode"+pcode+"]").val();}else if(pageType==="wishlist"){sizeSelected=document.getElementById("productCodewishlist"+pcode).value;}else if(pageType==="fav"){sizeSelected=document.getElementById("productCode"+favPageProduct).value;}else{sizeSelected=$("[id*=productCodePost"+pcode+"]").val();}
$.ajax({url:ACC.config.encodedContextPath+"/tkwish-list/addtoprojectlist",data:{productCodePost:sizeSelected,projListName:encodeURIComponent(listName),CSRFToken:ACC.config.CSRFToken},type:"POST",success:function(response){if(iscustomcut){if(response=="productAdded"){}
if(response=="ProductAlreadyExists"){$(".js-customcut-error"+pcode).text(ACC.addToListMsg)}else{$(".js-customcut-error"+pcode).empty()}}else{if(response=="productAdded"){window.location.reload()}
if(response=="ProductAlreadyExists"){$(".proj-listMsg"+pcode).text(ACC.addToListMsg)}else{$(".proj-listMsg"+pcode).empty()}}}})})},bindCustomCutFav:function(){$(".customcut-fav").on("click",function(){var pCode=$(this).attr("id");var myurl="";if($("#isCustomfav"+pCode).hasClass("fa-heart")){myurl="/tkfavourite/remove-fav"+"?CSRFToken="+ACC.config.CSRFToken;}else{myurl="/tkfavourite/add-fav"+"?CSRFToken="+ACC.config.CSRFToken;}
$.ajax({url:myurl,type:"POST",data:{"productCode":pCode},success:function(response){if(response=="Product already exits in favourite"){$(".js-customcut-error"+pCode).text(ACC.favouritesMsg);$("#custom-cut-fav-icon").addClass("selected");if($(".js_custom_cut_modal").hasClass("pdp-true")){$("#isfavcolorglyphiconpdp").addClass("fa-heart")}else{$("#isfav"+pCode).val("true")}
$("#isCustomfav"+pCode).addClass("fa-heart");}else if(response=="Product added"){$("#custom-cut-fav-icon").addClass("selected");if($(".js_custom_cut_modal").hasClass("pdp-true")){$("#isfavcolorglyphiconpdp").addClass("fa-heart")}else{$("#isfav"+pCode).val("true")}
$("#isCustomfav"+pCode).addClass("fa-heart");}else{$(".js-customcut-error"+pCode).empty();$("#custom-cut-fav-icon").removeClass("selected");if($(".js_custom_cut_modal").hasClass("pdp-true")){$("#isfavcolorglyphiconpdp").removeClass("fa-heart");}else{$("#isfav"+pCode).val("");}
$("#isCustomfav"+pCode).removeClass("fa-heart");}},error:function(response){}})})},bindSignInRequiredError:function(){$(".fav-sign-in-required").on("click",function(){$("#customCutUnfavMsg").removeClass('hide');})},plpTopFilter:function(){$(document).on("change",".select-fillter",function(e){var $this=$(this);ACC.global.spinnerLoad($this.closest('.filter-bar'));(function(w){w.URLSearchParams=w.URLSearchParams||function(searchString){var self=this;self.searchString=searchString;self.get=function(name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(self.searchString);if(results==null){return null;}
else{return decodeURIComponent(results[1])||0;}};}})(window)
var urlParams=new URLSearchParams(window.location.search);var urlparamText=urlParams.get("text");var urlparamQ=urlParams.get("q");var selectedID=[];var id=[];var dimName=[];var dimValue=[];$.each($(".select-fillter"),function(){selectedID.push($(this).attr("id"));});$.each($(".select-fillter option:selected"),function(){id.push($(this).attr("id"));dimName.push($(this).val());dimValue.push($(this).text());});var q;if(urlparamText)
{q=urlparamText+':'+currentSortCheck;}else if(urlparamQ){q=urlparamQ;}
else{q=':'+currentSortCheck;}
var itrDimName=dimName.values();var itrDimValue=dimValue.values();for(i=0;i<selectedID.length;i++){var nameDim=itrDimName.next().value;var valueDim=itrDimValue.next().value;q+=':'+nameDim+':'+valueDim;}
$('<input>').attr({type:'hidden',id:'sort',name:'sort',value:currentSortCheck}).appendTo('form');$(this).closest("form").find("input[name=q]").val(q);var index1=this.selectedIndex;var url=location.protocol+'//'+location.host
+location.pathname;$.ajax({type:"GET",url:url,data:$(this).closest("form").serialize(),success:function(response){$("body .main-contentarea").html($(response).filter(".main-contentarea"));var itrSelected=selectedID.values();var itrID=id.values();$("#"+idsel+" option").removeAttr("selected");for(i=0;i<selectedID.length;i++){var idsel=itrSelected.next().value;var idOption=itrID.next().value;console.log(idsel);console.log(idOption);$("#"+idsel
+" option[id='"+idOption
+"']").attr("selected","selected");}
ACC.global.spinnerRemove($this.closest('.filter-bar'));ACC.global.customSelectDropdown();$('#'+localStorage.getItem('activePlpView')).trigger('click');},error:function(response){ACC.global.spinnerRemove($this.closest('.filter-bar'));ACC.global.customSelectDropdown();}});});$(document).on("click","#resetFilter1",function(e){location.reload();})},dimensionSizeSelectorFilter:function(){$(document).on("keypress","#plp-sizeSelector",function(e){if(e.keyCode===13){e.preventDefault();}})
$(document).on("click","#sizeSelector-addTocart",function(e){var $this=$(this);ACC.plpproduct.bindQuickSelectorAddToCart(e,$this);})
$(document).on("change",".sizeSelector__selected",function(e){e.preventDefault();var $this=$(this);ACC.global.spinnerLoad($this.closest('.filter-bar'));var selectedID=[];var id1=[];var len1=[];var l2=[];var l3=$("option:selected","#js-sizeSelector").val();var length;$.each($(".sizeSelector__selected"),function(){if($(this).children("option:selected").text()!="Select"){selectedID.push($(this).attr("id"));}});$.each($(".sizeSelector__selected option:selected"),function(){if($(this).text()!="Select"){id1.push($(this).attr("id"));len1.push($(this).attr("data-l1"));l2.push($(this).val());}});var q=$("option:selected",this).attr("data-q");var query=q.split(":");var queryKey=q.replace(query[query.length-1],l3);var itrL1=len1.values();var itrL2=l2.values();for(i=0;i<selectedID.length;i++){var nameDim=itrL1.next().value;var valueDim=itrL2.next().value;if(nameDim!="undefined"&&valueDim!="undefined")
{queryKey+=':'+nameDim+valueDim;}}
var productCode=$("option:selected",this).attr("data");var id=$(this).children(":selected").attr("id");$(this).closest("form").find("input[name=q]").val(q);var index1=this.selectedIndex;var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+categoryCode+"?lengthCode="+l3+"&productCode="+productCode+"&q="+queryKey;console.log(url);var ispdp=$("#ispdp").val();if(ispdp==="true"){var url=url+"&pdp=true"}
$.ajax({type:"POST",url:url,data:$(this).closest("form").serialize(),success:function(data){var ispdp=$("#ispdp").val();var totalNumberOfResults=$(data).filter('#js-totalNumberOfResults').val();var selectedLength=$(data).filter('#js-selectedLength').val();if(ispdp==="true"){$('#js-available-pdp-heading').empty();$('#js-available-pdp-heading').html("<div class='h3 bold modal-body__heading'>"+ACC.sizeSelectorFirstTitile
+ACC.sizeSelectorDescriptionSpace+totalNumberOfResults+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorSecondTitle+ACC.sizeSelectorDescriptionSpace
+selectedLength+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorThirdTitle+"</div>")}else{$('#js-available-plp-heading').empty();$('#js-available-plp-heading').html("<h3 class='modal-body__heading'>"+ACC.sizeSelectorFirstTitile
+ACC.sizeSelectorDescriptionSpace+totalNumberOfResults+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorSecondTitle
+ACC.sizeSelectorDescriptionSpace+selectedLength+ACC.sizeSelectorDescriptionSpace
+ACC.sizeSelectorThirdTitle+"</h3>")}
$(".selected-prod-header").remove();$(".size-selector__table__checked-data .part").after($(data).filter(".selected-prod-header.hide").html());if($(data).find("#js-sizeselector-table")){$("#js-selector").empty();$(".size-selector").html(data);$(".size-selector__table__data-list").mCustomScrollbar({});}
var itrSelected=selectedID.values();var itrID=id1.values();$("#"+idsel+" option").removeAttr("selected");for(i=0;i<selectedID.length;i++){var idsel=itrSelected.next().value;var idOption=itrID.next().value;console.log(idsel);console.log(idOption);$("#"+idsel
+" option[id='"+idOption
+"']").prop("selected","selected");}
ACC.global.spinnerRemove($this.closest('.filter-bar'));},error:function(response){ACC.global.spinnerRemove($this.closest('.filter-bar'));}});})},bindQuickSelectorAddToCart:function(e,$this){var addToCartButton=$this;addToCartButton.addClass("disabled").prop("disabled",true);var itemInCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("item-cart");var addToCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("add-cart");var pcode=$this.closest("form").find("input[name=productQty]").attr("data");var qty=$("#qty"+pcode).val();var variantCode=$this.closest("form").find("input[name=productQty]").val();var productQTY=variantCode+':'+qty;let price=$this.closest("form").find(".get-product-price").html().replace("$","");var url=addToCartUrl+"?productQty="+productQTY.toString();$('#navigateToQuoteModal').on('hidden.bs.modal',function(){$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);});$('#js-btn-keep-quoted-pricing').on("click",function(){$('#navigateToQuoteModal').modal('hide');});$('#js-btn-remove-quoted-pricing').on("click",function(){ACC.tkaddtocart.ajaxResetAndUpdateCart("sizeSelector",apiCall);});let stringifyData=$("#gaData-"+pcode).html();if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));processedData['item_variant']=variantCode;processedData['quantity']=qty;price?processedData['price']=price:'';}
const apiCall=()=>{$.get(url,function(data){if(data==0){$('#navigateToQuoteModal').modal('show');}else{$(".js_total_items_count").html("<label>"+data+"</label>");$.ajax({url:ACC.config.encodedContextPath+'/cart/mini-cart',type:"GET",success:function(data){$(".navbar-cart").html(data);processedData?ACC.ga4.addToCart(processedData):'';}});var $thisClosest=addToCartButton.closest('.get-product-data');var getUpdateQty=$thisClosest.find('.get-product-qty .form-control').val();var getUpdatePrice=$thisClosest.find('.get-product-price').html();var getUpdatePriceSymbol=$thisClosest.find('.get-product-price').data('current-currency-symbol');var getUpdatePrice=getUpdatePrice.replace(getUpdatePriceSymbol,'');var getUpdatePriceFor=getUpdateQty*getUpdatePrice;$thisClosest.find('.get-product-price-for').html(getUpdatePriceSymbol+''+getUpdatePriceFor.toFixed(2)+" For "+getUpdateQty);$('.modal.size-selector').addClass('hide');$('.modal-backdrop.in').addClass('hide');ACC.tkaddtocart.addToCartMiniCartPopup($thisClosest);addToCartButton.find(".js-addToCartButton-text").text(itemInCartButtonText);setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}}).fail(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}).always(function(){ACC.tkaddtocart.miniCartComponent();});}
apiCall();},bindCutForShipping:function(){$(document).on("change",".bestCutOption .select-best-shipping",function(){$(this).closest('.similar-product__item').find('.similar-product__item_text_dropdown .btn-select-value').html($(this).attr('data-variant-text'));$(this).closest('.similar-product__item').find('.similar-product__item_text_dropdown .btn-select-input').val($(this).attr('data-price-val'));$(this).closest('.bestCutOption').next('.heatLotOption').removeClass('hide');$(this).closest('.bestCutOption').addClass('js-selected');var pCode=$(this).attr('data-p-code').split('_')[0];$("[id$=qty-plpqty-change"+pCode+"]").attr("value",$(this).attr('data-cut-quantity'));$("#qtyValue"+pCode).val($(this).attr('data-cut-quantity'));$("#qtyValue"+pCode).attr('value',$(this).attr('data-cut-quantity'))
$('.js-lengthSelectorCode li[data-variant-code="'+$(this).attr('data-p-code')+'"]').click();$('#js-pdp-qty').attr('value',$(this).attr('data-cut-quantity'));$("#js-pdp-qty").val($(this).attr('data-cut-quantity'));$('.sub-qty').prop('disabled',false);$('#qty').attr('value',$(this).attr('data-cut-quantity'));$('input[type="radio"][data-variantcode="'+$(this).attr('data-p-code')+'"]').prop('checked',true).change();});$(document).on("change",".heatLotOption input",function(){if($('body').attr('class').indexOf('pageType-CategoryPage')>-1){$(this).closest('.similar-product__item').find('.add_to_cart_form').find('#isHeatRequried').attr('value',$(this).is(":checked"));}else{$('#isHeatRequried').attr('value',$(this).is(":checked"));}});}};

ACC.pdpproduct={_autoload:["bindPDPSizeSelector","bindPDPQty","bindProductCode","bindAvailabeSizes","bindaddtofavouritePdp","restrictQtyBox","evenOrOdd","bindpdpadd","bindpdpsub","scrolltop","pdpEmbedVideo","customCutClick","StepNumRemove","checkWarningMsgVisiblity"],bindProductCode:function(){var selectedVariantCodeViaURL=$("#selectedVariantViaURL").attr("data-value");if(selectedVariantCodeViaURL!=undefined&&selectedVariantCodeViaURL!=null&&selectedVariantCodeViaURL!=""&&$('input:radio[name="productLength"]').filter('[data-variantcode='+selectedVariantCodeViaURL+']').length>0){$('input:radio[name="productLength"]').filter('[data-variantcode='+selectedVariantCodeViaURL+']').prop('checked',true);var newlength=$('input:radio[name="productLength"]:checked').attr("data-lengthvalue");$(".selectedLengthvalue").attr("length-code",newlength);var price=$('input:radio[name="productLength"]:checked').val();var pQty=$("#js-pdp-qty").val();var totalPrice=price*pQty;var currencySymbol=$("#js-pdp-sizeselector").data("current-currency-symbol");var totalPriceMath=currencySymbol+(Math.round(totalPrice*100)/100).toFixed(2);var productPrice=currencySymbol+(Math.round(price*100)/100).toFixed(2);$("#selectedVariantPdpPriceValue").html(productPrice+" "+ACC.priceEA);$("#selectedVariantPdpPriceValue").attr("data-product-price",price);$("#js-pdp-subtotal").text(totalPriceMath+" "+ACC.forText+" "+pQty);ACC.pdpproduct.updateSizeSelector();}
else{var lengthvalue=$(".select-length","#js-pdp-sizeselector").attr("data-lengthvalue");$('#js-pdp-sizeselector').find('.select-length:first').prop('checked',true);let isDealProduct=($('#js-pdp-sizeselector').find('.select-length:first').attr("data-variant-deal")&&$('#js-pdp-sizeselector').find('.select-length:first').attr("data-variant-deal")=="true")?true:false;isDealProduct?$(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").addClass('isDealProduct'):$(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").removeClass('isDealProduct');$(".selectedLengthvalue").attr("length-code",lengthvalue);var dealPcs=$('.deals-inventory-check').find('.item-price').hasClass('text-orange');if(dealPcs){$(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").addClass('isDealProduct');}
var baseProductCode=$('#js-pdp-sizeselector').find('.select-length:first').attr("data-variantcode");let isMarketplaceProduct=$("#isMarketplaceProduct").val()==='true';if(isMarketplaceProduct||isDealProduct)
{ACC.pdpproduct.bindStockAndAddedQuantity(baseProductCode);}}
var variantCode=$('input:radio[name="productLength"]:checked').attr("data-variantcode");var pricevalue=$('input:radio[name="productLength"]:checked').val();if(variantCode!=undefined){$("[id*=productCode]").val(variantCode)
$("#productCodepopup").val(variantCode);$("[id*=product_CodeMsg]").attr("id","product_CodeMsg"+variantCode)}
if(variantCode==undefined){$(".addToCartButtonPDP").removeAttr("disabled");$(".pdpCustomCut").removeAttr("disabled")}else if(pricevalue==""||pricevalue==undefined){$(".addToCartButtonPDP").attr("disabled","disabled");$(".pdpCustomCut").attr("disabled","disabled")}},bindPDPSizeSelector:function(){$(document).on("change","#js-pdp-sizeselector .select-length",function(){var $this=$(this);var productIsDeals=($this.attr("data-variant-deal")&&$this.attr("data-variant-deal")=="true")?true:false;var wasPrice=($this.attr("data-variant-deal-wasprice")!="")?$this.attr("data-variant-deal-wasprice"):"";var savePrice=($this.attr("data-variant-deal-saveprice")!="")?$this.attr("data-variant-deal-saveprice"):"";var wasPriceContainer=$(".pdp-mainsection__item-text .js-wasprice");if($(this).hasClass('pdpCustomCut')){e.preventDefault();}
var price=$(this).val();var pQty=$("#js-pdp-qty").val();var totalPrice=price*pQty;var currencySymbol=$("#js-pdp-sizeselector").data("current-currency-symbol");var totalPriceMath=currencySymbol+(Math.round(totalPrice*100)/100).toFixed(2);var productPrice=currencySymbol+(Math.round(price*100)/100).toFixed(2);$("#selectedVariantPdpPriceValue").html(productPrice+" "+ACC.priceEA);$("#selectedVariantPdpPriceValue").attr("data-product-price",price);$("#js-pdp-subtotal").text(totalPriceMath+" "+ACC.forText+" "+pQty);var variantCode=$(this).attr("data-variantcode");$("[id*=productCode]").val(variantCode);$("[id*=product_CodeMsg]").attr("id","product_CodeMsg"+variantCode)
$("#productCodepopup").val(variantCode);var lengthvalue=$(this).attr("data-lengthvalue");$(".selectedLengthvalue").attr("length-code",lengthvalue);ACC.pdpproduct.updateSizeSelector();if(price==""||price==undefined){$(".addToCartButtonPDP").attr("disabled","disabled");$(".pdpCustomCut").attr("disabled","disabled")}else{$(".addToCartButtonPDP").removeAttr("disabled");$(".pdpCustomCut").removeAttr("disabled")}
var isBestCutSelected=$(this).closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.bestCutOption').hasClass('js-selected');var bestCut=$(this).closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.bestCutOption input:checked').attr('data-p-code');if(!isBestCutSelected||bestCut!==variantCode){$(this).closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.cutForShipping').addClass('hide');$(this).closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.heatLotOption').addClass('hide');$(this).closest('#js-pdp-sizeselector').next('.cutForShippingPdp').find('.select-best-shipping').prop('checked',false);ACC.global.UpdateBestCutOption($(this),variantCode,'pdp');$('#js-pdp-qty').attr('value','1');}
$(".qty-discount-msg").removeClass("active-table");$("[id='discount-section"+variantCode+"']").addClass("active-table");wasPriceContainer.empty();if(wasPrice!=""&&savePrice!=""&&productIsDeals){var wasPriceHtml='<p class="h5 mt-0 mb-5 old-price"><em>'+ACC.wasPrice+'&nbsp;<del><span class="js-waspriceval">'+currencySymbol+''+wasPrice+'</span></del></em></p>';var savePriceHtml='<p class="h5 you-save"><span class="js-yousaveval">'+ACC.savePrice+'&nbsp;'+currencySymbol+''+savePrice+'</span></p>';wasPriceContainer.append(wasPriceHtml);wasPriceContainer.append(savePriceHtml);wasPriceContainer.removeClass("hidden");}else{wasPriceContainer.addClass("hidden");}
let isMarketplaceProduct=$("#isMarketplaceProduct").val()==='true';if(isMarketplaceProduct||productIsDeals)
{ACC.pdpproduct.bindStockAndAddedQuantity(variantCode);}
if(productIsDeals){$(".item-price .get-product-price").addClass("text-orange");$(".item-price .get-product-price-for").addClass("text-orange");$(this).closest(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").addClass('isDealProduct');}else{$(".item-price .get-product-price").removeClass("text-orange");$(".item-price .get-product-price-for").removeClass("text-orange");$(this).closest(".pdp-mainsection__item-text").find("input[name='dealsBaseMsg']").removeClass('isDealProduct')}
dataLayer.push({'ProductVariantSKU':[variantCode],'ProductPrice':[productPrice]});$('.addToCartButtonPDP').prop('disabled',false).removeClass('disabled');$('.add-to-favorites .btn-secondry').prop('disabled',false).removeClass('btn-disabled');$('.add-to-favorites .favourite_add').removeClass('disabled');$('.add-to-list .btn-secondry').prop('disabled',false).removeClass('btn-disabled');$('.add-to-list .custom-select').removeClass('btn-disabled');var baseProductCode=$('#js-pdp-sizeselector').find('.selectedLengthvalue').attr('id').replace("selector","");$('.pdp-notification').addClass('hidden');$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification u').text("");$('#addToCartForm'+baseProductCode).find('.alreadyAdded').val("");pQty>1?$('#js-pdp-qty').trigger("change"):"";})},bindStockAndAddedQuantity:function(productCode,callbackFn){console.log("Fetching stock info for productCode:",productCode);$.ajax({url:`/buy/pid/productStockInfo`,type:'GET',data:{productCode:productCode},success:function(data){var baseProductCode=$("[id*='product_CodeMsg"+productCode+"']").val();for(const[warehouseId,stockLevel]of Object.entries(data)){$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification u').text(warehouseId);$('#addToCartForm'+baseProductCode).find('.alreadyAdded').val(stockLevel);var totalAvailableStock=parseInt(warehouseId)-parseInt(stockLevel);if(stockLevel>0){$.ajax({url:ACC.config.encodedContextPath+'/cart/mini-cart',type:"GET",success:function(data){$(".navbar-cart").html(data);$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification .text-content').html("");var checkSize=$("[id*='dealData-"+productCode+"']").parents('.mini-cart__section').find('.product-size').html();var size="";if(checkSize!==undefined&&checkSize.includes("Size:")){var size=checkSize;}
let updateHtml="<input type='hidden' class='alreadyAdded' value="+stockLevel+">"+"<input type='hidden' class='totalStock' value="+warehouseId+">"+"<p class='stock-in-cart'><strong>"+stockLevel+"</strong> Already in Cart.</p>"+"<p class='remaining-stock'>Only <strong><u>"+warehouseId+"</u></strong> available.</p>"+"<p>Please Adjust QTY.</p>"+"<p class='product-info'>"+"<span><strong>Part #"+baseProductCode+" </strong></span>"+"<span class='size-update'><strong>"+size+"</strong></span>"+"</p>"
$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification .text-content').html(updateHtml);if(size==""){$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification .text-content').find('.size-update').addClass('hide');}else{$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification .text-content').find('.size-update').removeClass('hide');}},error:function(){}})}else{$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification .text-content').html("");let updateHtml="<input type='hidden' class='alreadyAdded' value="+stockLevel+">"+"<p class='stock-in-cart'>Only <strong><u>"+warehouseId+"</u></strong> left in stock!</p>"+"<p class='remaining-stock'>Please adjust your quantity.</p>"
$('#addToCartForm'+baseProductCode).find('.deal-inventory-notification .text-content').html(updateHtml);}}
callbackFn?setTimeout(function(){callbackFn()},500):"";},error:function(xhr,status,error){console.error(`Error fetching stock info: ${status} - ${error}`);}});},bindPDPQty:function(){$("#js-pdp-qty").on("blur",function(){var productBasePrice;var qty=$(this).val();if(qty>1){$('.sub-qty').prop('disabled',false);}else{$('.sub-qty').prop('disabled',true);}
if(qty<9999){$('.add-qty').prop('disabled',false);}
else{$('.add-qty').prop('disabled',true);}
if(qty=="0"||qty=="00"||qty=="000"||qty=="0000"||qty==""||qty>9999){$("#js-pdp-qty").val("1");$("#qty").val("1");}else{$("#qty").val(qty);}
var currencySymbol=$("#selectedVariantPdpPriceValue").data("current-currency-symbol");if(!$('.qty-discount-msg').length){productBasePrice=$("#selectedVariantPdpPriceValue").attr("data-product-price");}else{productBasePrice=$("#selectedVariantPdpPriceValue").attr("data-product-discounted-price");}
var subtotal=productBasePrice*$(this).val();var roundSubTotal=(Math.round(subtotal*100)/100).toFixed(2);$("#js-pdp-subtotal").text(currencySymbol+roundSubTotal+" "+ACC.forText+" "+$(this).val());var currentElement=$(this);let isDealProduct=$(this).closest(".get-product-data").find("input[name='dealsBaseMsg']").hasClass("isDealProduct");let isMarketplaceProduct=$("#isMarketplaceProduct").val()==='true';if(isMarketplaceProduct||isDealProduct)
{ACC.pdpproduct.bindStockAvailablity(currentElement,qty);}
ACC.pdpproduct.updateSizeSelector()
ACC.pdpproduct.checkWarningMsgVisiblity()});$("#js-pdp-qty").on("input",function(e){var qttyln=$(this).val().length;if(qttyln>=4){$(this).val($(this).val().slice(0,4));return false;}});$(document).on("keyup","#js-pdp-qty",function(e){if(e.keyCode===13){$(this).blur();}
setTimeout(()=>{$(this).trigger("change")},500);});},bindpdpadd:function(){$('.add-qty').click(function(){if($(this).prev().val()<9999){$(this).prev().prev().prop('disabled',false);$(this).prev().val(+$(this).prev().val()+1);$('.cart-notification:not(.hidden)').closest('.product-card').find('.warning-mtr-msg').removeClass('warning-shown');$(this).prev().trigger("change");if($(this).prev().hasClass('js-updateqty')){$(this).prev().trigger('blur');ACC.cartPage.checkInventoryWarning();}
var productBasePrice;var qty=$(this).prev().val();var currencySymbol=$("#selectedVariantPdpPriceValue").data("current-currency-symbol");if(!$('.qty-discount-msg').length){productBasePrice=$("#selectedVariantPdpPriceValue").attr("data-product-price");}else{productBasePrice=$("#selectedVariantPdpPriceValue").attr("data-product-discounted-price");}
var subtotal=productBasePrice*qty;var roundSubTotal=(Math.round(subtotal*100)/100).toFixed(2);$("#js-pdp-subtotal").text(currencySymbol+roundSubTotal+" "+ACC.forText+" "+qty);ACC.pdpproduct.updateSizeSelector();$("#qty").val(qty);}
if($(this).prev().val()==9999)
{$(this).prop('disabled',true);}
var currentElement=$(this);let isDealProduct=$(this).closest(".get-product-data").find("input[name='dealsBaseMsg']").hasClass("isDealProduct");let isMarketplaceProduct=$("#isMarketplaceProduct").val()==='true';if(isMarketplaceProduct||isDealProduct)
{ACC.pdpproduct.bindStockAvailablity(currentElement,qty);}
ACC.pdpproduct.checkWarningMsgVisiblity()});},bindpdpsub:function(){$('.sub-qty').click(function(){if($(this).next().val()==2)
{$(this).prop('disabled',true);}
if($(this).next().val()>1){$('.add-qty').prop('disabled',false);if($(this).next().val()>1)
{$('.cart-notification:not(.hidden)').closest('.product-card').find('.warning-mtr-msg').removeClass('warning-shown');$(this).next().val(+$(this).next().val()-1);$(this).next().trigger("change");if($(this).next().hasClass('js-updateqty')){$(this).next().trigger('blur');ACC.cartPage.checkInventoryWarning();}
var productBasePrice;var qty=$(this).next().val();var currencySymbol=$("#selectedVariantPdpPriceValue").data("current-currency-symbol");if(!$('.qty-discount-msg').length){productBasePrice=$("#selectedVariantPdpPriceValue").attr("data-product-price");}else{productBasePrice=$("#selectedVariantPdpPriceValue").attr("data-product-discounted-price");}
var subtotal=productBasePrice*qty;var roundSubTotal=(Math.round(subtotal*100)/100).toFixed(2);$("#js-pdp-subtotal").text(currencySymbol+roundSubTotal+" "+ACC.forText+" "+qty);ACC.pdpproduct.updateSizeSelector();$("#qty").val(qty);}}
var currentElement=$(this);let isDealProduct=$(this).closest(".get-product-data").find("input[name='dealsBaseMsg']").hasClass("isDealProduct");let isMarketplaceProduct=$("#isMarketplaceProduct").val()==='true';if(isMarketplaceProduct||isDealProduct)
{ACC.pdpproduct.bindStockAvailablity(currentElement,qty);}
ACC.pdpproduct.checkWarningMsgVisiblity()});},bindStockAvailablity:function(thisObj,qty){var stockQuantity;var availableQuantity=$('.alreadyAdded').val();let productBaseCode=thisObj.parents('.deals-inventory-check').find('.js-addToCartButton').attr("data-product-code");let variantCode=thisObj.parents('.deals-inventory-check').find('.productCodePost'+productBaseCode).val();let callbackFn=()=>{availableQuantity=$('.alreadyAdded').val();if(availableQuantity>0){stockQuantity=$('.pdp-notification').find('.totalStock').val();}else{stockQuantity=$('.pdp-notification').find('u').text();}
var totalQuantity=parseInt(availableQuantity)+parseInt(qty);if(totalQuantity>stockQuantity&&totalQuantity!=null&&stockQuantity!=null){thisObj.parents('.deals-inventory-check').find('.deal-inventory-notification').removeClass('hidden');thisObj.parents('.deals-inventory-check').find('.js-addToCartButton').attr('disabled','disabled');}else{thisObj.parents('.deals-inventory-check').find('.deal-inventory-notification').addClass('hidden');thisObj.parents('.deals-inventory-check').find('.js-addToCartButton').removeClass("disabled").prop("disabled",false);}};availableQuantity==""?ACC.pdpproduct.bindStockAndAddedQuantity(variantCode,callbackFn):callbackFn();},scrolltop:function(){$(document).on("click",".js-scroll-top",function(){window.scrollTo({top:0,behavior:'smooth'});});},bindAvailabeSizes:function(){$(document).on("click",".js-available-sizes",function(){ACC.pdpproduct.updateSizeSelector()})},updateSizeSelector:function(){var title="material";var material=$("#js-available-sizes").attr("data-material");var alloy=$("#js-available-sizes").attr("data-alloy");var shape=$("#js-available-sizes").attr("data-shape");var temper=$("#js-available-sizes").attr("data-temper");var color=$("#js-available-sizes").attr("data-color");var q;var length=$("#js-pdp-sizeselector .select-length:checked").attr("data-decimallengthvalue");if($("#js-pdp-sizeselector").is(":visible")){if(length==undefined){var length=$("#js-pdp-sizeselector option:eq(1)").data("lengthvalue");}}
var productCode=$("#js-available-sizes").attr("data-productcode");var qty=$("#js-pdp-qty").val();var alloyQuery="";var temperQuery="";var colorQuery="";if(alloy!=""){alloyQuery=":Alloy:"+alloy;}
if(temper!=""){temperQuery=":Temper:"+temper;}
if(color!=""){colorQuery=":Color:"+color;}
q="::Material:"+material+":Shape:"+shape+alloyQuery+temperQuery+colorQuery;if(length==undefined){var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+title+"?&productCode="+productCode+"&q="+q+"&pdp=true"}else{q=q+":cutValues:"+length;var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+title+"?lengthCode="+length+"&productCode="+productCode+"&q="+q+"&pdp=true"}
$.get(url,function(data){$("#specifications-tab1").html(data);var indexvaluemy=$("#sendingindexvalue").val();var classNames=$(".addingcolumnselector").attr("class").toString().split(" ");$(".addingcolumnselector").removeClass("size-selector0, size-selector1, size-selector2, size-selector3, size-selector4, size-selector5, size-selector6, size-selector7");if(indexvaluemy==2){$(".addingcolumnselector").addClass("size-selector"+4)}else if(indexvaluemy==1){$(".addingcolumnselector").addClass("size-selector"+5)}else if(indexvaluemy==4){$(".addingcolumnselector").addClass("size-selector"+2)}else if(indexvaluemy==3){$(".addingcolumnselector").addClass("size-selector"+3)}else if(indexvaluemy==5){$(".addingcolumnselector").addClass("size-selector"+1)}else if(indexvaluemy==6){$(".addingcolumnselector").addClass("size-selector"+0)}else{$(".addingcolumnselector").addClass("size-selector"+(6-indexvaluemy))}
$(".size-selector__table__data-list").mCustomScrollbar({});$("#qty"+productCode).val(qty);$(".size-selector__table__checked-data .tag").matchHeight()})},bindaddtofavouritePdp:function(){$(".pdpfavcolorglyphicon").on("click",function(){var glyphicon_productcode=$(this).attr("id");var myurl="";if($("#isfavcolorglyphiconpdp").hasClass("fa-heart")){myurl="/tkfavourite/remove-fav"+"?CSRFToken="+ACC.config.CSRFToken;}else{myurl="/tkfavourite/add-fav"+"?CSRFToken="+ACC.config.CSRFToken;}
$.ajax({url:myurl,type:"POST",data:{"productCode":glyphicon_productcode},success:function(response){if(response=="Product already exits in favourite"){$("#isfavcolorglyphiconpdp").addClass("fa fa-heart")}
if(response=="Product added"){$("#isfavcolorglyphiconpdp").addClass("fa fa-heart");$("#js-favoriteBtn").text(ACC.productAddedToFavorites).val()}
if(response=="Product removed"){$("#isfavcolorglyphiconpdp").removeClass("fa fa-heart");$("#js-favoriteBtn").text(ACC.AddToFavorites).val()}},error:function(response){}})})},restrictQtyBox:function(){$(document).on('keyup','input[type=number][maxlength]',function(event){if(!$('.jsqty-update').length){var key=event.keyCode||event.charCode;var charcodestring=String.fromCharCode(event.which);var txtVal=$(this).val();var maxlength=$(this).attr('maxlength');var regex=new RegExp('^[0-9]+$');if(key==8||key==46||key==13||key==37||key==39||key==9){return true;}
if(txtVal.length>maxlength){event.preventDefault();$(this).val('9999');return false;}
$('.sub-qty').prop('disabled',false);if(txtVal==9999){$('.add-qty').prop('disabled',true);}
else{$('.add-qty').prop('disabled',false);}
if(txtVal==1){$('.sub-qty').prop('disabled',true);}
if(event.keyCode==40){if(txtVal>1){txtVal--;$('.sub-qty').prop('disabled',false);}
if(txtVal<2){$('.sub-qty').prop('disabled',true);}
$(this).val(txtVal)};if(!regex.test(charcodestring)){event.preventDefault();return false;}
return true;}});$(document).on('paste','input[type=number][maxlength]',function(event){if(!$('.jsqty-update').length){var ref=$(this);var regex=new RegExp('^[0-9]+$');var maxlength=ref.attr('maxlength');var clipboardData=event.originalEvent.clipboardData.getData('text');var txtVal=ref.val();var filteredString='';var combined_input=txtVal+clipboardData;for(var i=0;i<combined_input.length;i++){if(filteredString.length<maxlength){if(regex.test(combined_input[i])){filteredString+=combined_input[i];}}}
setTimeout(function(){ref.val('').val(filteredString)},100);}});},evenOrOdd:function(){var count=$(".all-pdp-length .all-pdp-length__option").length;var lengthContainer=$(".all-pdp-length");if(count%2==0)
lengthContainer.addClass("even");else
lengthContainer.addClass("odd");},pdpEmbedVideo:function(){$(".thumb-video img").click(function(){var $this=$(this);var videoId=$this.attr("id");var iframdId=$(".embed-responsive-item iframe");var videoUrl='https://www.youtube.com/embed/'+videoId;console.log(iframdId);if(iframdId.length===0){$('<iframe>',{src:'https://www.youtube.com/embed/'+videoId,id:'myFrame',frameborder:0,scrolling:'no',allowfullscreen:'allowfullscreen'}).appendTo('.embed-responsive-item');}else{iframdId.attr("src",videoUrl);}});},customCutClick:function(){$('.custom-cut-radio input').change(function(){if($(this).is(':checked')){$('.custom-cut-radio input').prop('checked',false);}});},StepNumRemove:function(){var pdpLength=$('.pdp-mainsection__item-text__length').length;var pdpDimension=$('.pdp-dimensions').length;if(pdpLength===0&pdpDimension===0){$('.step3_pdp').hide();}
else if(pdpLength===0){$('.step3_pdp').html('2');}},checkWarningMsgVisiblity:function(){if($('body').hasClass('page-productDetails')){var dealsAvailableStock=$('.pdp-notification').hasClass('hidden');if(dealsAvailableStock){$('.discounted-qty-msg-available').removeClass('msg-visible');}else{$('.discounted-qty-msg-available').addClass('msg-visible');}}}};

var AlloySteelArray=new Array("('Select alloy','',true,true)","('4130','0.282')","('4135','0.282')","('4140','0.282')","('4330','0.283')","('4340','0.284')","('9310','0.284')");var aluminumArray=new Array("('Select alloy','',true,true)","('1100','0.098')","('2011','0.102')","('2024','0.101')","('2219','0.103')","('3003','0.099')","('5052','0.097')","('5083','0.096')","('5086','0.096')","('6013','0.098')","('6061','0.098')","('6063','0.097')","('6262','0.098')","('7050','0.102')","('7075','0.101')","('7150','0.102')","('Alca Max','0.1')","('Alca Plus','0.101')","('MIC-6','0.101')","('QC-7','0.101')");var brassArray=new Array("('Select alloy','',true,true)","('240 - Low Brass','0.313')","('260 - Cartridge Brass','0.308')","('353 - Leaded Brass','0.306')","('360 - Brass','0.307')","('365 - Brass','0.304')","('380 - Brass','0.306')","('385 - Brass','0.306')","('464 - Brass','0.304')");var bronzeArray=new Array("('Select alloy','',true,true)","('18 - Aluminum Bronze','0.269')","('21 - Aluminum Bronze','0.26')","('314 - Commercial Bronze','0.306')","('425 - Am Bronze','0.316')","('485 - Naval Bronze','0.305')","('510 - Phos Bronze','0.32')","('524 - Phos Bronze','0.317')","('532 - Phos Bronze','0.323')","('534 - Phos Bronze','0.322')","('544 - Phos Bronze','0.32')","('613 - Al Bronze','0.287')","('614 - Al Bronze','0.285')","('623 - Al Bronze','0.276')","('624 - Al Bronze','0.269')","('625 - Al Bronze','0.26')","('630 - Ni-Al Bronze','0.274')","('642 - Al-Si Bronze','0.278')","('863 - Manganese Bronze','0.278')","('932 - Bearing Bronze','0.322')","('954 - Al Bronze','0.269')","('SAE841 - Powdered Bronze','0.236')","('SAE843 - Powdered Bronze','0.216')","('Oil-Lite - Bronze','0.236')");var copperArray=new Array("('Select alloy','',true,true)","('101','0.323')","('102','0.323')","('103','0.323')","('110','0.322')","('122','0.323')","('145','0.323')");var copperalloyArray=new Array("('Select alloy','',true,true)","('145 - Tellurium Copper','0.323')","('194 - Iron Copper','0.322')","('195 - Iron Copper','0.322')","('172 - Beryllium Copper','0.298')","('182 - Class 2','0.321')","('655 - Copper-Silicon','0.308')","('706 - Copper-Nickel','0.323')","('715 - Nickel Silver','0.323')","('725 - Nickel Silver','0.321')","('735 - Nickel Silver','0.319')","('752 - Nickel Silver','0.316')","('762 - Nickel Silver','0.31')","('770 - Nickel Silver','0.314')","('1751 - Class 3','0.317')","('1758 - Copper-Nickel','0.323')","('Moldmax - Be/Cu','0.302')","('Protherm - Be/Cu','0.319')");var magnesiumArray=new Array("('Select alloy','',true,true)","('AZ31B','0.064')");var nickelArray=new Array("('Select alloy','',true,true)","('201','0.321')","('400','0.319')","('210','0.32')","('220','0.318')","('230','0.316')");var plasticArray=new Array("('Select alloy','',true,true)","('ABS','0.0394')","('Acetal','0.0514')","('Acrylic','0.0434')","('Acrylic','0.0375')","('Benelex','0.0496')","('Biton','0.0673')","('Buna-N','0.0507')","('Butyl','0.0427')","('CAB','0.0431')","('Cellulose Acetate','0.047')","('CPVC','0.0565')","('Delrin','0.0514')","('Delrin AF','0.0557')","('Duraboard','0.0181')","('E-CTFE','0.0608')","('EPDM','0.0427')","('Ertacetel H','0.0514')","('Ertalyte','0.0503')","('Fiber Sheet','0.0503')","('Flourosilicone','0.0507')","('Glastherm HT','0.0615')","('Glastherm S','0.0615')","('GPO-1','0.0717')","('GPO-2','0.0651')","('GPO-3','0.0659')","('Gum Rubber','0.0333')","('Halar','0.0608')","('Haysite EHC-P','0.0724')","('Haysite HST-11-P','0.0586')","('Hypalan','0.0427')","('ICE','0.0326')","('Kapton','0.0514')","('Kydex','0.0489')","('Kynar','0.0633')","('Lead','0.4104')","('Lexan','0.0434')","('Marinete P','0.0326')","('Mylar','0.0503')","('Natural Rubber','0.0333')","('Neoprene','0.047')","('Nitrile','0.0362')","('Noryl','0.0384')","('Nylatron GS','0.042')","('Nylon 6/6','0.0413')","('Peek','0.0478')","('PET','0.0503')","('PETG','0.046')","('Phenolic CE','0.0413')","('Phenolic G-10','0.0659')","('Phenolic G-11','0.0659')","('Phenolic G-3','0.0651')","('Phenolic G-5','0.0706')","('Phenolic G-7','0.067')","('Phenolic G-9','0.0688')","('Phenolic LE','0.0413')","('Phenolic N-1','0.0427')","('Phenolic XX','0.0485')","('Phenyleneoxide','0.0384')","('Polyamide','0.0413')","('Polyamide-Imide','0.0514')","('Polybenzimidazote','0.047')","('Polycarbonate','0.0434')","('Polyethelene LD','0.0344')","('Polyetherimide','0.046')","('Polymethylpentene','0.03')","('Polymides Grafite','0.0561')","('PolyPro Copolymer','0.0326')","('Polypro HomoPolymer','0.0329')","('Polystyrene','0.038')","('Polysulfone','0.0449')","('PPO','0.0384')","('PTFE','0.0778')","('PVC Type I','0.051')","('PVC Type II','0.0489')","('Red Sheet','0.0626')","('SBR','0.034')","('SG-200','0.0615')","('Silicone','0.0507')","('Silver','0.38')","('Styrene','0.038')","('Torlon','0.0514')","('TPX','0.03')","('Transite','0.0507')","('Transite','0.0615')","('UHMW','0.0344')","('Ultem','0.046')","('Urethane','0.047')","('Vespel','0.0518')","('Vinyl','0.047')","('Vulcanized Fiber','0.0503')","('X Link Styrene','0.038')");var stainlessArray=new Array("('Select alloy','',true,true)","('301','0.287')","('302','0.287')","('303','0.287')","('304','0.287')","('305','0.287')","('316','0.286')","('321','0.285')","('409','0.278')","('410','0.278')","('420','0.28')","('430','0.278')","('15-5','0.287')","('17-4','0.29')");var steelArray=new Array("('Select alloy','',true,true)","('1010','0.283')","('1012','0.283')","('1015','0.283')","('1018','0.283')","('1541','0.283')","('4140','0.283')","('A-36','0.283')");var titaniumArray=new Array("('Select alloy','',true,true)","('6Al-4V','0.163')","('Grade 2','0.163')","('Grade 4','0.163')","('Grade 5','0.163')");var toolsteelArray=new Array("('Select alloy','',true,true)","('S-7','0.283')");var ZincArray=new Array("('Select alloy','',true,true)","('190','0.259')","('310','0.258')","('320','0.258')","('500','0.259')","('700','0.259')","('720','0.259')","('750','0.259')");function populateAlloy(inForm,selected){if(selected=="magnesium"){$("#shopProduct").hide();}
if(selected==''){$("#shopProduct").prop("disabled",true);}else{$("#shopProduct").prop("disabled",false);$("#shopProduct").show();}
var selectedArray=eval(selected+"Array");while(selectedArray.length<inForm.alloy.options.length){inForm.alloy.options[(inForm.alloy.options.length-1)]=null}
for(var i=0;i<selectedArray.length;i++){eval("inForm.alloy.options[i]="+"new Option"+selectedArray[i])}
if(inForm.material.options[0].value==""){inForm.material.options[0]=null}}
var focusflag=!1;var RoundOff=5;function ConvertToInch(value,type){if(type=="ft")
value=value*12;if(type=="yd")
value=value*36;if(type=="cm")
value=value/2.54;if(type=="m")
value=(value*100)/2.54;if(type=="mm")
value=(value/10)/2.54;return value}
function CalculateWeight(){var Param=new Array(5);var Units=new Array(4);var Convert;var FormType;var Result;var Good;var myShape;var myPieces;var myDensity;var myWeight;var myPcWeight;var totalWeight;var dim1;var dim2;var dim3;var dim4;var alloy;var alloyRes;myDensity=document.weightcalc.alloy.value;dim1=ConvertToInch(document.weightcalc.dim1.value,document.weightcalc.unitsdim1.value);dim2=ConvertToInch(document.weightcalc.dim2.value,document.weightcalc.unitsdim1.value);dim3=ConvertToInch(document.weightcalc.dim3.value,document.weightcalc.unitsdim1.value);dim4=ConvertToInch(document.weightcalc.dim4.value,document.weightcalc.unitsdim1.value);myPieces=document.weightcalc.pieces.value;myShape=document.weightcalc.matshape.value;document.calcweight.pcweight.rsize="4";document.calcweight.totalweight.rsize="4";if(myShape=="round"){myWeight=new String(dim1*dim1*9.42*myDensity*(dim2/12));document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="square"){myWeight=new String(dim1*dim1*myDensity*dim2);document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="hex"){myWeight=new String(dim1*dim1*myDensity*10.4*(dim2/12));document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="flat"){myWeight=new String(dim1*dim2*myDensity*dim3);document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="sheet"){myWeight=new String(dim1*dim2*myDensity*dim3);document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="rectangle"){myWeight=new String(dim1*dim2*myDensity*dim3);document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="plate"){myWeight=new String(dim1*dim2*myDensity*dim3);document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="tube"||myShape=="pipe"){myWeight=new String((dim1-dim2)*dim2*myDensity*37.7*(dim3/12));document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="ring"){myWeight=new String((dim2-((dim2-dim3)/2))*((dim2-dim3)/2)*myDensity*37.7*(dim1/12));document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="rectangle tube"){myWeight=new String(((dim1*dim2*12*myDensity)-((dim1-(dim3*2))*(dim2-(dim3*2))*12*myDensity))*(dim4/12));document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
if(myShape=="square tube"){myWeight=new String(37.7*myDensity*dim2*(dim1-dim2)*1.27*(dim3/12));document.calcweight.pcweight.value=myWeight.substring(0,myWeight.indexOf(".")+RoundOff)}
myPcWeight=document.calcweight.pcweight.value;totalWeight=new String(myPcWeight*myPieces);totalWeight=totalWeight.substring(0,myWeight.indexOf(".")+RoundOff);document.calcweight.totalweight.value=totalWeight;return!1}
function ClearFields(){$("input[name='dim1']").val("");$("input[name='dim2']").val("");$("input[name='dim3']").val("");$("input[name='dim4']").val("");$("input[name='pieces']").val("1");$("input[name='totalweight']").val("");$("input[name='pcweight']").val("");$("#select-Material").val("").attr("selected","selected");$("#shopProduct").prop("disabled",true);var myvaluehere=$("#select-Material").val();if(myvaluehere=""||myvaluehere==null){var placeholder=$("#js-materials-placeholder").val();$("#select-Material").append($("<option></option>").attr("value","").attr("selected","selected").text(placeholder))}else{$("#select-Material").val("").attr("selected","selected")}
$("#select-Shape").val("").attr("selected","selected");$("#select-Alloy").val("").attr("selected","selected")}
function ChangeLabel(){var myShape;myShape=$("select[name=\"matshape\"] option:selected").val();if(myShape=="round"){$("textarea[name=\"dim1label\"]").val(ACC.selectDiameter+":");$("textarea[name=\"dim2label\"]").val(ACC.selectLength);$("textarea[name=\"dim3label\"],[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"]").show();$("input[name='dim3'],[name='dim4']").hide();$("input[name='dim1'],[name='dim2']").show()}
if(myShape=="square"){$("textarea[name=\"dim1label\"]").val("Width:");$("textarea[name=\"dim2label\"]").val(ACC.selectLength);$("textarea[name=\"dim3label\"],[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"]").show();$("input[name='dim3'],[name='dim4']").hide();$("input[name='dim1'],[name='dim2']").show()}
if(myShape=="hex"){$("textarea[name=\"dim1label\"]").val(ACC.selectDiameter+":");$("textarea[name=\"dim2label\"]").val(ACC.selectLength);$("textarea[name=\"dim3label\"],[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"]").show();$("input[name='dim3'],[name='dim4']").hide();$("input[name='dim1'],[name='dim2']").show()}
if(myShape=="flat"||myShape=="sheet"||myShape=="coil"||myShape=="plate"||myShape=="rectangle"){$("textarea[name=\"dim1label\"]").val("Thickness:");$("textarea[name=\"dim2label\"]").val("Width:");$("textarea[name=\"dim3label\"]").val(ACC.selectLength);$("textarea[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"],[name=\"dim3label\"]").show();$("input[name='dim1'],[name='dim2'],[name='dim3").show();$("input[name='dim4']").hide()}
if(myShape=="tube"||myShape=="pipe"){$("textarea[name=\"dim1label\"]").val("Outer Diameter:");$("textarea[name=\"dim2label\"]").val(ACC.selectWall);$("textarea[name=\"dim3label\"]").val(ACC.selectLength);$("textarea[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"],[name=\"dim3label\"]").show();$("input[name='dim1'],[name='dim2'],[name='dim3").show();$("input[name='dim4']").hide()}
if(myShape=="circular"){$("textarea[name=\"dim1label\"]").val(ACC.selectDiameter+":");$("textarea[name=\"dim2label\"]").val("Thickness:");$("textarea[name=\"dim3label\"],[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"]").show();$("input[name='dim3'],[name='dim4']").hide();$("input[name='dim1'],[name='dim2']").show()}
if(myShape=="ring"){$("textarea[name=\"dim1label\"]").val("Thickness:");$("textarea[name=\"dim2label\"]").val("Outer Diameter:");$("textarea[name=\"dim3label\"]").val("Inner Diameter:");$("textarea[name=\"dim4label\"]").hide();$("textarea[name=\"dim1label\"],[name=\"dim2label\"],[name=\"dim3label\"]").show();$("input[name='dim1'],[name='dim2'],[name='dim3']").show();$("input[name='dim4']").hide()}
if(myShape=="square tube"){$("textarea[name=\"dim1label\"]").val("Outer Diameter (A):");$("textarea[name=\"dim2label\"]").val(ACC.selectWall+" (B):");$("textarea[name=\"dim3label\"]").val(ACC.selectLength);$("textarea[name=\"dim4label\"]").val("");$("textarea[name=\"dim1label\"],[name=\"dim2label\"],[name=\"dim3label\"]").show();$("input[name='dim1'],[name='dim2'],[name='dim3']").show();$("input[name='dim4']").hide()}
if(myShape=="rectangle tube"){$("textarea[name=\"dim1label\"]").val("Height (A):");$("textarea[name=\"dim2label\"]").val("Width (B):");$("textarea[name=\"dim3label\"]").val(ACC.selectWall+" (C):");$("textarea[name=\"dim4label\"]").val(ACC.selectLength);$("textarea[name=\"dim1label\"],[name=\"dim2label\"],[name=\"dim3label\"],[name=\"dim4label\"]").show();$("input[name='dim1'],[name='dim2'],[name='dim3'],[name='dim4']").show()}
if(myShape=="angle"||myShape=="channel"||myShape=="tee"||myShape=="zee"){$("textarea[name=\"dim1label\"]").val("");$("textarea[name=\"dim2label\"]").val("");$("textarea[name=\"dim3label\"]").val("");$("textarea[name=\"dim4label\"]").val("");$("input[name='dim1'],[name='dim2'],[name='dim3'],[name='dim4']").hide()}}
function resetimage(){$(".no_image_reset").hide();document.images.pictures.src=""}
function showimage(){var myShape;var myPicture;$("#js-size-selector").show();myShape=document.weightcalc.matshape.options[document.weightcalc.matshape.selectedIndex].value;if(myShape=="round"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/round_bar_large.jpg"}
if(myShape=="flat"||myShape=="rectangle"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/rectangle_bar_large.jpg"}
if(myShape=="rectangle tube"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/rectangle_tube_large.jpg"}
if(myShape=="plate"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/sheet_plate_large.jpg"}
if(myShape=="coil"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/coil.jpg"}
if(myShape=="sheet"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/sheet_sheet_large.jpg"}
if(myShape=="hex"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/hexrod_large.jpg"}
if(myShape=="square"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/square_bar_large.jpg"}
if(myShape=="square tube"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/square_tube_large.jpg"}
if(myShape=="ring"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/Ring.png"}
if(myShape=="pipe"||myShape=="tube"){myPicture="/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/weightcalc/round_tube_large.jpg"}
document.images.pictures.src=myPicture;{if(!document.images)
return}}
$(".weight-information__parameter__input, .weight-information__left__parameter__input").keydown(function(event){if(event.keyCode==110||event.keyCode==46||event.keyCode==8||event.keyCode==9||event.keyCode==27||event.keyCode==13||(event.keyCode==65&&event.ctrlKey===!0)||(event.keyCode>=35&&event.keyCode<=39)||(event.keyCode==188&&!event.shiftKey)||(event.keyCode==190&&!event.shiftKey)){return}else{if(event.shiftKey||(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)){event.preventDefault()}}});ChangeLabel();ClearFields();function changeHref(value){var a=$("#js-category-selected").val(value)}
function ShopProduct(){var material=$("#select-Material option:selected").val();var materialName=$("#select-Material option:selected").text();var shape=$("#select-Shape option:selected").val();var alloyvalue=$("#select-Alloy option:selected").text();var alloys=alloyvalue.split("-");var alloy=alloys[0].trim();var text;if(material==='Select Material'){material=null}
if(shape==='Select Shape'){shape=null}
if(alloy==='Select alloy'){alloy=null}
if(material!=null&&material!=""&&material!='Select Material'){if(material=='brass'){text="material?q=%3Arelevance%3AMaterial%3ABrass"}else if(material=='bronze'){text="material?q=%3Arelevance%3AMaterial%3ABronze"}else if(material=='aluminum'){text="material?q=%3Arelevance%3AMaterial%3AAluminum"}else if(material=='AlloySteel'){text="material?q=%3Arelevance%3AMaterial%3AAlloy%2BSteel%3AMaterial%3AMaraging%2BSteel"}else if(material=='copperalloy'){text="material?q=%3Arelevance%3AMaterial%3ABrass%3AMaterial%3ACopper%3AMaterial%3ABronze%3AMaterial%3ANickel%2BSilver"}else if(material=='Zinc'){text="material?q=%3Arelevance%3AMaterial%3AZinc"}else if(material=='copper'){text="material?q=%3Arelevance%3AMaterial%3ABeryllium%2BCopper%3AMaterial%3ACopper"}else if(material=='nickel'){text="material?q=%3Arelevance%3AMaterial%3ANickel"}else if(material=='plastic'){text="material?q=%3Arelevance%3AMaterial%3APlastic"}else if(material=='stainless'){text="material?q=%3Arelevance%3AMaterial%3AStainless"}else if(material=='steel'){text="material?q=%3Arelevance%3AMaterial%3ASteel%3AMaterial%3ACold%2BRoll%3AMaterial%3AMild%2BSteel%3AMaterial%3AMaraging%2BSteel%3AMaterial%3ACarbon%3AMaterial%3ACarbon%2BSteel%3AMaterial%3AHot%2BRoll"}else if(material=='titanium'){text="buy/material?q=%3Arelevance%3AMaterial%3ATitanium"}else{text=material+"?q=::material:"+materialName}}
var selectedCategory=$("#js-category-selected").val().toLowerCase().trim();if(selectedCategory.length>0){window.location.href=ACC.config.encodedContextPath+"/buy/"+text}}
function ErrorMsgDisplay(){$(".total-weight__product").on("click",function(){$(".weight-information__left select").each(function(){if($(this).val()===""||$(this).val()===null){$(".total-weight__result .error-message").removeClass("hide");$(".total-weight__result .error-message").addClass("show")}else{$(".total-weight__result .error-message").removeClass("show");$(".total-weight__result .error-message").addClass("hide")}})})};

ACC.refferencenumber={_autoload:["enableSaveButton","saveReferencedata","disableInputBox"],enableSaveButton:function(){$(document).ready(function(){$(".select-job-number,.select-custom-part,.select-drawing-number").keyup(function(e){var fullId=$(this).attr("id");var id=fullId.split(/[_ ]+/).pop();var selectjobNumber=$("#selectJobNumber_"+id);var selectcustomerPart=$("#selectCustomPart_"+id);var editButton=$("#refference-number-editButton_"+id);var saveButton=$("#refference-number-saveButton_"+id);if(($("#selectCustomPart_"+id).val().length<=0)&&($("#selectJobNumber_"+id).val().length<=0)&&($("#selectDrawingNumber_"+id).val().length<=0)){$(saveButton).attr("disabled","disabled")}else{$(saveButton).removeAttr("disabled")}})})},saveReferencedata:function(){$(document).on("click",".js-edit-btn",function(e){e.preventDefault();var fullId=$(this).attr("id");var id=fullId.split(/[_ ]+/).pop();var selectjobNumber=$("#selectJobNumber_"+id);var selectCustomPart=$("#selectCustomPart_"+id);var selectDrawingNumber=$("#selectDrawingNumber_"+id);var editButton=$("#refference-number-editButton_"+id);var saveButton=$("#refference-number-saveButton_"+id);$(selectjobNumber).removeAttr("readonly");$(selectCustomPart).removeAttr("readonly");$(selectDrawingNumber).removeAttr("readonly");$(editButton).hide();ACC.refferencenumber.showSaveButton(id)});$(document).on("blur",".js-reference-input",function(e){e.preventDefault();var fullId=$(this).attr("id");var id=fullId.split(/[_ ]+/).pop();var selectjobNumber=$("#selectJobNumber_"+id);var selectCustomPart=$("#selectCustomPart_"+id);var jobNumber=$("#selectJobNumber_"+id).val();var customerPart=$("#selectCustomPart_"+id).val();var drawingNumber=$("#selectDrawingNumber_"+id).val();var entryNumber=id;ACC.refferencenumber.sendReferencedata(jobNumber,customerPart,drawingNumber,entryNumber)})},sendReferencedata:function(jobNumber,customerPart,drawingNumber,entryNumber){$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath+"/cart/savereference?jobNumber="+encodeURIComponent(jobNumber)+"&customerPart="+encodeURIComponent(customerPart)+"&drawingNumber="+encodeURIComponent(drawingNumber)+"&entryNumber="+entryNumber,cache:!0,success:function(response){$("#js-saveKey").hide();ACC.refferencenumber.showEditButton(entryNumber);},error:function(x,error,errorData){}})},showSaveButton:function(buttonId){var saveText=$("#js-cart-save-btn").val().trim();$("#button"+buttonId).html("<div id =\"js-saveKey"+buttonId+"\""+" class=\"col-sm-2 col-xs-12\">"+"<button id=\"refference-number-saveButton_"+buttonId+"\""+" class=\"btn btn-secondry js-save-btn\" >"+saveText+"</button>"+"</div>");$("#button"+buttonId).on("click",".js-save-btn",function(e){e.preventDefault();var fullId=$(this).attr("id");var id=fullId.split(/[_ ]+/).pop();var jobNumber=$("#selectJobNumber_"+id).val();var customerPart=$("#selectCustomPart_"+id).val();var drawingNumber=$("#selectDrawingNumber_"+id).val();var entryNumber=id;ACC.refferencenumber.sendReferencedata(jobNumber,customerPart,drawingNumber,entryNumber)})},showEditButton:function(buttonId){var editText=$("#js-cart-edit-btn").val().trim();$("#button"+buttonId).html("<div id =\"js-editKey"+buttonId+"\""+" class=\"col-sm-2 col-xs-12\">"+"<button id=\"refference-number-editButton_"+buttonId+"\""+" class=\"btn-secondry js-edit-btn\" >"+editText+"</button>"+"</div>");$("#button"+buttonId).on("click",".js-edit-btn",function(e){e.preventDefault();var selectJobNumber=$("#selectJobNumber_"+buttonId);var selectCustomPart=$("#selectCustomPart_"+buttonId);var selectDrawingNumber=$("#selectDrawingNumber_"+buttonId);$(selectJobNumber).attr("readonly","readonly");$(selectCustomPart).attr("readonly","readonly");$(selectDrawingNumber).attr("readonly","readonly")})},disableInputBox:function(e){$(".js-entryNumber-ip").each(function(OptionDiv){var id=OptionDiv;var selectjobNumber=$("#selectJobNumber_"+id);var selectCustomPart=$("#selectCustomPart_"+id);var selectDrawingNumber=$("#selectDrawingNumber_"+id);if(selectjobNumber.val()!=""||selectCustomPart.val()!=""||selectDrawingNumber.val()!=""){selectjobNumber.removeAttr("readonly");selectCustomPart.removeAttr("readonly");selectDrawingNumber.removeAttr("readonly");}})}};

ACC.tkaddtocart={_autoload:["bindAddToCart","addonServiceProduct","miniCartComponent","bindremoveitem"],bindAddToCart:function()
{$('#miniCartModal').on('hidden.bs.modal',function(){$('.modal.size-selector').removeClass('hide');$('.modal-backdrop.in').removeClass('hide');$(".mini-cart-modal__body_item:not(:last)").remove();$('.qty-disc-minicart-container').find('.qty-discount-msg').remove();});$(document).on("click",".js-addToCartButton",function(e){var baseProductFormCode=$(this).data("product-form-code");var baseProductCode=$(this).data("product-code");var customCutModal=$(this).data("customcutmodal");var addToCartButton=$(this);var asmUpdatedEntry=$(this).data("asmUpdatedEntry");if(!addToCartButton.hasClass('disabled')){$('.js-custom-cut-calculate-price').prop("disabled",false);if($('.js-custom-cut-calculate-price').hasClass('check-add-to-cart')){$('.js-custom-cut-calculate-price').removeClass('check-add-to-cart');$('.js-custom-cut-calculate-price').trigger('click');}else{addToCartButton.addClass("disabled").prop("disabled",true);if(customCutModal=="customcutmodal"||customCutModal=="normal")
{if(baseProductFormCode==undefined){ACC.tkaddtocart.ajaxCustomCutAddToCart(baseProductCode,customCutModal,addToCartButton,(customCutModal=="normal"?true:false));}else{ACC.tkaddtocart.ajaxCustomCutAddToCart(baseProductFormCode,customCutModal,addToCartButton,true);}}else{ACC.tkaddtocart.ajaxAddToCart(baseProductCode,addToCartButton);$("#js-pdp-qty_"+baseProductCode).val(1);$("#js-pdp-qty_"+baseProductCode).trigger("blur")}
var quantityinPLP=$("[id*=qty-plpqty-change"+baseProductCode+"]").val();var quantityinPDP=$("#js-pdp-qty").val();if(quantityinPLP!==null&&quantityinPLP!==undefined&&quantityinPLP>0){window.mediator.publish("trackAddToCart",{productCode:baseProductCode.toString(),quantity:parseInt(quantityinPLP),cartData:quantityinPLP});}
if(quantityinPDP!==null&&quantityinPDP!==undefined&&quantityinPDP>0){window.mediator.publish("trackAddToCart",{productCode:baseProductCode.toString(),quantity:parseInt(quantityinPDP),cartData:quantityinPDP});}}}})},openMiniCart:function(){$(".navbar-cart").addClass("open")},closeMiniCart:function(){$(".navbar-cart").on("mouseleave",function(){$(".navbar-cart").removeClass("open")})},closeMiniCartTimeSet:function(){var setTimeVar;clearTimeout(setTimeVar);setTimeVar=setTimeout(function(){$(".navbar-cart").removeClass("open");},3000);},addToCartMiniCartPopup:function($thisClosest,thisIndex,MultyProQty,isASM){var productCode=$thisClosest.find("[name='productCode']").val();var viewListSelector='.js-viewlist'+productCode;var getProImage=$thisClosest.find('.get-product-img .img-responsive').attr('src');var getAltText=$thisClosest.find('.get-product-img .img-responsive').attr('alt');var getProTitle=$thisClosest.find('.get-product-title').html();var getProPart=$thisClosest.find('.get-product-title-part').html();var getDimension1Selector=($(viewListSelector).length)?viewListSelector+' .get-dimension1':'.get-dimension1';var getDimension2Selector=($(viewListSelector).length)?viewListSelector+' .get-dimension2':'.get-dimension2';var getDimension1=($(viewListSelector).length)?$(getDimension1Selector).clone():$thisClosest.find(getDimension1Selector).clone();var getDimension2=($(viewListSelector).length)?$(getDimension2Selector).clone():$thisClosest.find(getDimension2Selector).clone();var isASMProduct=isASM;var sellerName=$thisClosest.find('.get-seller-name').html();var isSalePrice=$thisClosest.find('.isDealProduct');var isWasPrice=($thisClosest.find('.js-wasprice:visible').text().trim()!="")?$thisClosest.find('.js-wasprice').html():'';if($('.get-product-price').attr("data-value")){var getPrice=$thisClosest.find('.get-product-price').attr('data-value')!=''?$thisClosest.find('.get-product-price').attr('data-value')+'ea':$thisClosest.find('.get-product-price').html();var getPriceFor=$thisClosest.find('.get-product-price-for').attr('data-value')!=''?$thisClosest.find('.get-product-price-for').attr('data-value')+' for '+$thisClosest.find('.get-product-qty .form-control').val():$thisClosest.find('.get-product-price-for').html();}else{var getPrice=$thisClosest.find('.get-product-price').html();var getPriceFor=$thisClosest.find('.get-product-price-for').html();}
if(getPriceFor==='$0.00 for 0'){getPriceFor=getPrice.replace('ea','')+' for 1';}
var dataLayerQty=$thisClosest.find('.get-product-qty .form-control').val();if(MultyProQty==undefined){var getQty=$thisClosest.find('.get-product-qty .form-control').val();}else{var getQty=MultyProQty;}
if(thisIndex==undefined){var miniCartProList=$('.mini-cart-modal__body_item');}else{var miniCartProList=$('.mini-cart-modal__body_item:eq('+thisIndex+')');}
if(getDimension1.length&&$.trim(getDimension1)!=""){miniCartProList.find('.mini-cart-modal__body_dimention').removeClass('hide');}else{miniCartProList.find('.mini-cart-modal__body_dimention').addClass('hide');}
if(getDimension2.length&&$.trim(getDimension2)!=""){miniCartProList.find('.mini-cart-modal__body_dimen2').removeClass('hide');}else{miniCartProList.find('.mini-cart-modal__body_dimen2').addClass('hide');}
if($thisClosest.find('#js-pdp-sizeselector').length){var getSize=$thisClosest.find('.all-pdp-length__option input:checked').attr('data-product-size');}else if($('body').hasClass('page-orderHistory')||$('body').hasClass('page-orderDetail')){var getSize=$thisClosest.find('.mini-cart__section--length span').text();}else if($thisClosest.find('.get-product-size').hasClass('js_custom_cut_length')){var getSize=$thisClosest.find('.get-product-size').val();}else if($thisClosest.closest('.js_size_selector').find('#js-sizeSelector').length){var getSize=$thisClosest.closest('.js_size_selector').find('#js-sizeSelector .js-sizeSelector__selected').attr('value')}else{var getSize=$thisClosest.find('.get-product-size .selected').attr('data-product-size');}
if(getSize==undefined||getSize==''){miniCartProList.find('.mini-cart-modal__body_size').addClass('hide');}else{if(!getSize.split('X')[0].includes('"')&&getSize.split('X').length>1){getSize=getSize.split('X').map(dim=>dim.trim()+'"').join('X');}else if(!getSize.split('X')[0].includes('"')&&getSize.split('X').length==1){getSize=getSize+'"';}
miniCartProList.find('.mini-cart-modal__body_size').removeClass('hide');}
miniCartProList.find('.mini-cart-modal__body_img .img-responsive').attr('src',getProImage);miniCartProList.find('.mini-cart-modal__body_img .img-responsive').attr('alt',getAltText);miniCartProList.find('.mini-cart-modal__body_title').html(getProTitle+" <span> "+getProPart+"</span>");if(sellerName==undefined){miniCartProList.find('.mini-cart-modal__body_seller_name').html("");}else{miniCartProList.find('.mini-cart-modal__body_seller_name').html(sellerName);}
if(getDimension1&&getDimension1!=""){miniCartProList.find('.mini-cart-modal__body_dimen1').html("").html(getDimension1);}
if(getDimension2&&getDimension2!=""){miniCartProList.find('.mini-cart-modal__body_dimen2').html("").html(getDimension2);}
miniCartProList.find('.mini-cart-modal__body_size span').html(getSize);$('.mini-cart-modal__qty').html(getQty);miniCartProList.find('.mini-cart-modal__body_price .total-price').html(getPrice);miniCartProList.find('.mini-cart-modal__body_price .single-price').html(getPriceFor);isASMProduct?miniCartProList.addClass("hidden"):miniCartProList.removeClass("hidden");productCode=getProPart.split(":")[1].trim();var cutPrice=$thisClosest.find('#subtotalCustomCut'+productCode).text();if(cutPrice!=undefined&&cutPrice!=''&&cutPrice){getPrice=cutPrice;}
var listViewPrice=$thisClosest.find('.selectedPriceValue'+productCode).attr('data-product-price');if(listViewPrice!=undefined&&listViewPrice!=''&&listViewPrice){getPrice=listViewPrice;}
if(getPrice==undefined){getPrice=$('#price'+productCode).text();}
if(getPrice!=undefined){if(getPrice.includes('&'))
{ getPrice=getPrice.split('&')[0];}
 if(getPrice.includes('ea'))
{getPrice=getPrice.split('ea')[0];}
 if(getPrice.includes('$'))
{getPrice=getPrice.split('$')[1];}
 if(getPrice.includes('\n'))
{getPrice=getPrice.split('\n')[0];}
if(getPrice.includes('<strong>'))
{getPrice=getPrice.split('<strong>')[1];}
if(getPrice.includes('</strong>'))
{getPrice=getPrice.split('</strong>')[0];}
 variant=$('.productCodePost'+productCode).val(); if(variant==undefined)
{variant=$thisClosest.find('#qty'+productCode).val();}
if(variant==undefined)
{variant=$thisClosest.find('#customCutProductCode').val();}
if(variant==undefined)
{variant=$('#productCodePost'+productCode).val()
}
if(variant==undefined)
{variant=$('#productBaseCode'+productCode).val()
}}
miniCartProList.find('.mini-cart-modal__body_price .promotional-wrapper').remove();miniCartProList.find('.mini-cart-modal__body_price .single-price').removeClass('text-orange');miniCartProList.find('.mini-cart-modal__body_price .total-price').removeClass('text-orange pt-5');if(isSalePrice&&isSalePrice.length&&isSalePrice.val().length){let html='<div class="promotional-wrapper"><span class="sale-ribbon right">SALE! </span><span class="promo-text text-orange">'+isSalePrice.val()+'</span></div>';miniCartProList.find('.mini-cart-modal__body_price').prepend(html);miniCartProList.find('.mini-cart-modal__body_price .single-price').addClass('text-orange');miniCartProList.find('.mini-cart-modal__body_price .total-price').addClass('text-orange pt-5');$('.mini-cart-modal__body_price .js-wasprice').remove();}
$('.mini-cart-modal__body_price .js-wasprice').remove();if(isWasPrice&&isWasPrice!=''){let wasPriceHtml='<div class="js-wasprice was-price">'+isWasPrice+'</div>';miniCartProList.find('.mini-cart-modal__body_price').append(wasPriceHtml);miniCartProList.find('.mini-cart-modal__body_price').find(".you-save").removeClass("hide").addClass('text-orange');miniCartProList.find('.mini-cart-modal__body_price .single-price').addClass('text-orange');miniCartProList.find('.mini-cart-modal__body_price .total-price').addClass('text-orange pt-5');}
var inCheckStep=$('#inCheckoutStep').html();if(inCheckStep=='true'){window.location.href='/cart';}else{$('#miniCartModal').modal('show');let discountSection=$("[id='discount-section"+variant+"']");if(discountSection.length&&discountSection.hasClass('active-table')){discountSection.addClass('show-all');var oClone=discountSection.clone();$('.qty-disc-minicart-container').html(oClone);}}},ajaxAddToCart:function(baseProductCode,addToCartButton){var addToCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("add-cart");var itemInCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("item-cart");var data;let price;let eventSource=document.body.getAttribute("pageType")||document.body.className||"Unknown";if($('.js-product-list').length&&$('.js-product-list').css('display')!='none'){data=$(".js-product-list [id=addToCartForm"+baseProductCode+"]").serialize();price=$(".js-product-list .selectedPriceValue"+baseProductCode).attr("data-product-price");}
else{data=$("[id=addToCartForm"+baseProductCode+"]").serialize();price=$(".selectedPriceValue"+baseProductCode).attr("data-product-price");}
if(addToCartButton.hasClass('compare-page')){var $thisClosest=$("[id*=addToCartForm"+baseProductCode+"]").closest('.get-product-data');}else{var $thisClosest=addToCartButton.closest('.get-product-data');}
$('#navigateToQuoteModal').on('hidden.bs.modal',function(){setTimeout(function(){resetAddTOCartButton();},2000);});$('#js-btn-keep-quoted-pricing').on("click",function(){$('#navigateToQuoteModal').modal('hide');});$('#js-btn-remove-quoted-pricing').on("click",function(){ACC.tkaddtocart.ajaxResetAndUpdateCart("normal",[baseProductCode,addToCartButton]);});const resetAddTOCartButton=()=>{var peicesproduct=$(addToCartButton).data("ispiecesvariant");if(!$('.tabel-view').length||$('.tabel-view').css('display')=='none'){addToCartButton.removeClass("disabled").prop("disabled",false);}else if(peicesproduct==true){addToCartButton.removeClass("disabled").prop("disabled",false);}
else{addToCartButton.removeClass("disabled").prop("disabled",true);}
addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}
var form=$("[id*=addToCartForm"+baseProductCode+"]");var formUrl=$("[id*=addToCartForm"+baseProductCode+"]").attr("action");let processedData;if(form.length>1){form=addToCartButton.closest("form");data=form.serialize();formUrl=form.attr("action");}
let arrayData=form.serializeArray();let itemsObject={};arrayData.forEach(x=>{itemsObject[x.name]=x.value;});let stringifyData=$("#gaData-"+baseProductCode).html();if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));processedData['item_variant']=itemsObject.productCodePost;processedData['quantity']=itemsObject.qty;price?processedData['price']=price:'';}
data+="&eventSource="+encodeURIComponent(eventSource);$.ajax({url:formUrl,type:"POST",data:data,success:function(data){if(data=="accepted"){$('#navigateToQuoteModal').modal('show');}else if(data.addToCartLayer!=null&&data.addToCartLayer.includes('insufficient.stock')){const callbackFn=()=>{addToCartButton.parents('.add_to_cart_form').find('.deal-inventory-notification').removeClass('hidden');addToCartButton.attr('disabled','disabled');}
ACC.pdpproduct.bindStockAndAddedQuantity(itemsObject.productCodePost,callbackFn);ACC.pdpproduct.checkWarningMsgVisiblity()}else{ACC.tkaddtocart.addToCartMiniCartPopup($thisClosest);processedData?ACC.ga4.addToCart(processedData):'';let currentQty=addToCartButton.parents('.add_to_cart_form').find('.alreadyAdded').val();let updatedQty=parseInt(itemsObject.qty)+parseInt(currentQty);addToCartButton.parents('.add_to_cart_form').find('.alreadyAdded').val(updatedQty);$(".navbar-cart").html(data);addToCartButton.find(".js-addToCartButton-text").text(itemInCartButtonText);setTimeout(function(){resetAddTOCartButton();},2000);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}},error:function(data){addToCartButton.removeAttr("disabled").prop("disabled",false);}});},addonServiceProduct:function()
{$(document).on("change",".js-addonService",function(e){var entryNumber=$(this).attr("name");var id=entryNumber.split(/[_ ]+/).pop();var addonServiceCode=$(this).attr("value");$.ajax({url:ACC.config.encodedContextPath+"/cart/addonservice",data:{"addonServiceCode":addonServiceCode,"entryNumber":id},type:"GET",success:function(response){var json=jQuery.parseJSON(response);$("#addonTotaltopSection").html("<p>"+json.cartAddonTotal+"</p>");$("#addonTotalbottomSection").html("<p>"+json.cartAddonTotal+"</p>");$("#cartTotal").html("<p class=\"h3 bold total\">"+json.cartTotal+"</p>");$("#entryAddonTotal"+id).html("<p class=\"h3 bold\">"+json.entryAddonServiceTotal+"</p>")},error:function(e){}})})},ajaxResetAndUpdateCart:function(option,params){let param1,param2,param3;$('#navigateToQuoteModal').modal('hide');var url=ACC.config.encodedContextPath+'/cart/detachQuoteFromCart';$.ajax({url:url,type:'POST',data:{CSRFToken:ACC.config.CSRFToken},success:function(response){if(response){switch(option){case"normal":param1=params[0];param2=params[1];ACC.tkaddtocart.ajaxAddToCart(param1,param2);break;case"customCut":param1=params[0];param2=params[1];param3=params[2];ACC.tkaddtocart.ajaxCustomCutAddToCart(param1,param2,param3);break;case"projectList":param1=params[0];param2=params[1];param3=params[2];ACC.projectlistandfavorite.ajaxFavAndWishlistAddToCart(param1,param2,param3);break;case"removeItem":case"addAllProduct":case"sizeSelector":params();break;}}}});},ajaxCustomCutAddToCart:function(baseProductCode,customCutModal,addToCartButton,isOrderAgain)
{let data;var addToCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("add-cart");var itemInCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("item-cart");$('#navigateToQuoteModal').on('hidden.bs.modal',function(){$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);});let eventSource=document.body.getAttribute("pageType")||document.body.className||"Unknown";$('#js-btn-keep-quoted-pricing').on("click",function(){$('#navigateToQuoteModal').modal('hide');});$('#js-btn-remove-quoted-pricing').on("click",function(){ACC.tkaddtocart.ajaxResetAndUpdateCart("customCut",[baseProductCode,customCutModal,addToCartButton]);});let arrayData=$("#addToCartForm_"+customCutModal+baseProductCode).serializeArray();let itemsObject={},processedData;arrayData.forEach(x=>{itemsObject[x.name]=x.value;});let price;let stringifyData;if(isOrderAgain){let productCode=$(addToCartButton).attr("data-product-code");productCode.indexOf('-')>-1?productCode=productCode.substring(0,productCode.indexOf('-')):'';stringifyData=$("#gaData-"+productCode).html();if(stringifyData==undefined){productCode=$(addToCartButton).attr("data-product-code");stringifyData=$("#gaData-"+productCode).html();}
price=$(addToCartButton).closest('form').parent().find(".item-price__price span").attr("data-value").replaceAll('$','');price=parseFloat(price);}else{stringifyData=$("#gaData-"+baseProductCode).html();price=$('.js-custom-cut-calculate-sub-price').html()?parseFloat($('.js-custom-cut-calculate-sub-price').html().replaceAll('$','')):undefined;}
let customCutValue=itemsObject.width>0?itemsObject.width:"";customCutValue+=itemsObject.width>0&&itemsObject.length>0?","+itemsObject.length:itemsObject.length>0?itemsObject.length:"";if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));processedData['item_variant']=customCutValue&&customCutModal!="normal"?customCutValue:itemsObject.productCodePost;processedData['quantity']=itemsObject.qty;price?processedData['price']=price:'';}
data=$("#addToCartForm_"+customCutModal+baseProductCode).serialize();data+="&eventSource="+encodeURIComponent(eventSource);$.ajax({url:$("#addToCartForm_"+customCutModal+baseProductCode).attr("action"),type:"POST",data:data,success:function(data){if(data=="accepted"){$('#navigateToQuoteModal').modal('show');}else{var $thisClosest=addToCartButton.closest('.get-product-data');processedData?ACC.ga4.addToCart(processedData):'';if($thisClosest.hasClass('modal-dialog')){var customCutLength=$thisClosest.find('.js_custom_cut_length').val();var customCutWidth=$thisClosest.find('.js_custom_cut_width').val();var customCutMulSymbol=$thisClosest.find('.get-product-size').attr('data-mul-symbol');var customCutInch=$thisClosest.find('.get-product-size').attr('data-inch');if(customCutWidth==undefined||customCutWidth==0){$thisClosest.find('.get-product-size .selected').attr('data-product-size',customCutLength+''+customCutInch);}else{$thisClosest.find('.get-product-size .selected').attr('data-product-size',customCutWidth+''+customCutInch+' '+customCutMulSymbol+' '+customCutLength+''+customCutInch)}}
$(".modal.in").modal("hide");ACC.tkaddtocart.addToCartMiniCartPopup($thisClosest);$('.qty-disc-minicart-container').find('.qty-discount-msg').remove();$(".navbar-cart").html(data);addToCartButton.find(".js-addToCartButton-text").text(itemInCartButtonText);setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}},error:function(data){addToCartButton.removeClass("disabled").prop("disabled",false);}})},miniCartComponent:function(){var hoverMiniCart=true;$('.navbar-cart').on('mouseover',function(){if(!$('#minicartComp').hasClass('nodropdown')){if(hoverMiniCart){hoverMiniCart=false;$.ajax({url:ACC.config.encodedContextPath+'/cart/mini-cart',type:"GET",success:function(data){$(".navbar-cart").html(data);if($(window).width()<768){ACC.tkaddtocart.closeMiniCart()}else{ACC.tkaddtocart.openMiniCart();ACC.tkaddtocart.closeMiniCart()}
$(".mini-cart__item-list").mCustomScrollbar({});$(".continue-shopping").click(function(){$(".mini-cart").addClass("hide");setTimeout(function(){$('.mini-cart').removeClass('hide')},500);})},error:function(){hoverMiniCart=true;}})}}});},bindremoveitem:function(){$(document).on('click','.js-mini-remove-button',function(){ACC.global.spinnerLoad($('.spinner-bar'));let value=$(this).attr('data-value');var saleRibbon=$(this).parents('.mini-cart__section').find('.sale-ribbon');let gaDataElm=$(this).parents('.mini-cart__section').find('[id^="gaData"');let stringifyData,processedData;gaDataElm?stringifyData=$(gaDataElm).html():'';if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));}
let afterCallback=()=>{ACC.global.spinnerRemove($('.spinner-bar'));if($(window).width()<768){ACC.tkaddtocart.closeMiniCart()}else{ACC.tkaddtocart.openMiniCart();ACC.tkaddtocart.closeMiniCart()}
$(".mini-cart__item-list").mCustomScrollbar({});}
let isMarketplaceProduct=$(this).parents('.mini-cart__section').find("[id*='isMarketplaceProduct"+processedData.item_variant+"']").val()==='true';let ajaxCall=()=>{$.ajax({url:ACC.config.encodedContextPath+'/cart/removeCartEntryFromMiniCart?entryNumber='+value,type:"GET",success:function(data){if(data=="accepted"){$('#navigateToQuoteModal').modal('show');}else if(data!='ERROR'){processedData?ACC.ga4.removeFromCart(processedData):'';$(".navbar-cart").html(data);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}
afterCallback();if(saleRibbon.length||isMarketplaceProduct){ACC.pdpproduct.bindStockAndAddedQuantity(processedData.item_variant);var productAdded=$('.mini-cart__item-list').find('#gaData-'+processedData.item_id);$("[id*='addToCartForm"+processedData.item_id+"']").find('.deal-inventory-notification').addClass('hidden');$("[id*='addToCartForm"+processedData.item_id+"']").find('.js-addToCartButton').removeClass("disabled").prop("disabled",false);}}})};$('#navigateToQuoteModal').on('hidden.bs.modal',function(){afterCallback();$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');});$('#js-btn-keep-quoted-pricing').on("click",function(){$('#navigateToQuoteModal').modal('hide');});$('#js-btn-remove-quoted-pricing').on("click",function(){ACC.global.spinnerLoad($('.spinner-bar'));ACC.tkaddtocart.ajaxResetAndUpdateCart("removeItem",ajaxCall);});ajaxCall();});}};

ACC.cartPage={_autoload:["bindCartProductStock","checkInventoryWarning"],bindCartProductStock:function(){setTimeout(()=>{$.ajax({url:ACC.config.encodedContextPath+'/cart/getCartProductStockInfo',type:'GET',success:function(data){data.forEach(result=>{$("[class*='cart"+result.variantProductCode+"'] .deal-inventory-notification u").text(result.availableStock);$("[class*='cart"+result.variantProductCode+"'] .alreadyAdded").val(result.addedStock);$(".checkout-button-id").addClass("disabled");$("[class*='cart"+result.variantProductCode+"'] .stockLevel").text(result.availableStock);const totalSize=$("[class*='cart"+result.variantProductCode+"'] .deal-inventory-notification").length;if(totalSize>1)
{$("[class*='cart"+result.variantProductCode+"'] .product-info").removeClass('hidden')}
else
{$("[class*='cart"+result.variantProductCode+"'] .product-info").addClass('hidden')}
$("[class*='cart"+result.variantProductCode+"'] .deal-inventory-notification").removeClass('hidden');$("[class*='cart"+result.variantProductCode+"'] .deal-inventory-notification").get(0)?.scrollIntoView({behavior:"smooth",block:"center"});ACC.cartPage.checkInventoryWarning();});},error:function(xhr,status,error){console.error(`Error fetching stock info: ${status} - ${error}`);}});},500);},checkInventoryWarning:function(){$('.cart-notification:not(.hidden)').each(function(){var isShown=$(this).is(':visible');if(isShown){var dimHeight=$(this).closest('.product-card').find('.cart-page-dimension').height();if(dimHeight<120){$(this).closest('.product-card').find('.warning-mtr-msg').addClass('warning-shown');$(this).closest('.product-card').find('.product-details__qty').removeClass('qty-margin');}else{$(this).closest('.product-card').find('.warning-mtr-msg').removeClass('warning-shown');$(this).closest('.product-card').find('.product-details__qty').addClass('qty-margin');}}else{$(this).closest('.product-card').find('.warning-mtr-msg').removeClass('warning-shown');$(this).closest('.product-card').find('.product-details__qty').removeClass('qty-margin');}});}}
function isValidEmailAddress(emailAddress){var regExp=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return regExp.test(emailAddress)}
var validflag=0;var shareflag=0;function validateCartEmail(){if($("#save-cart-email").val()!=""){if($("#save-cart-email").val()==""&&$("#checkbox-email").is(":checked")){$("#singleErrorMsg").text("Please enter a valid email address");$("#save-cart-email").addClass("error-brd");$("#singleErrorMsg").addClass("error");$("#singleErrorMsg").show();$("button#shareCart-btn").attr("disabled","disabled")
shareflag=0;return!1}else if($("#save-cart-email").val()==""){return!0}else if(ACC.quote.isValidProjectListEmailAddress($("#save-cart-email").val())){shareflag=1;$("#singleErrorMsg").removeClass("error");$("#singleErrorMsg").hide();$("#save-cart-email").removeClass("error-brd");if(shareflag==1&&validflag==1){$("button#shareCart-btn").removeAttr("disabled");}
return!0}else{$("#singleErrorMsg").text("Please enter a valid email address");$("#singleErrorMsg").addClass("error");$("#singleErrorMsg").show();$("#save-cart-email").addClass("error-brd");$("button#shareCart-btn").attr("disabled","disabled")
shareflag=0;return!1}}
else{$("#singleErrorMsg").removeClass("error");$("#singleErrorMsg").hide();$("#save-cart-email").removeClass("error-brd");shareflag=0;}}
function validateMultipleEmailsCommaSeparated(){var emails=$("#multiple-email").val();var commalen=(emails.match(/,/g)||[]).length;var diffemailLen=(emails.match(/@/g)||[]).length;var emailArray=emails.split(",");if(emails!=''){for(var i=0;i<=(emailArray.length-1);i++){if(isValidEmailAddress(emailArray[i].trim())){$("#errorMsg").removeClass("error");$("#multiple-email").removeClass("error-brd");$("#errorMsg").hide();validflag=1;$('#checkbox-email').is(':checked')
if(validflag==1&&$('#checkbox-email').is(':checked')==false){$("button#shareCart-btn").removeAttr("disabled");}
else if(shareflag==1&&validflag==1){$("button#shareCart-btn").removeAttr("disabled")}}else if((emailArray[i].trim())!=""&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$("#errorMsg").text("Email id's must be comma separated");$("#errorMsg").addClass("error");$("#errorMsg").show();validflag=0;}else{$("#shareCart").css("display","block");$("contactusModal").css("display","none");$("#errorMsg").text("Please enter a valid email address");$("#errorMsg").addClass("error");$("#multiple-email").addClass("error-brd");$("#errorMsg").show();$("button#shareCart-btn").attr("disabled","disabled");validflag=0;}}}
else{$("#errorMsg").removeClass("error");$("#multiple-email").removeClass("error-brd");$("#errorMsg").hide();validflag=0;}}
$('.cart-details__btn-group__share').on('click',function(){$("#multiple-email,#save-cart-email").removeClass("error-brd");$("#errorMsg,#singleErrorMsg").hide();$("button#shareCart-btn").attr("disabled","disabled");});$("#multiple-email").on('blur',function(){validateMultipleEmailsCommaSeparated();})
$("#multiple-email").on('input',function(){var email=$("#multiple-email").val();var emailReg=/^(([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)(\s*(;|,)\s*|\s*$))*$/;if(emailReg.test(email)){validateMultipleEmailsCommaSeparated();}
else{$("button#shareCart-btn").attr("disabled","disabled");}})
$("#save-cart-email").on('blur',function(){validateCartEmail();})
$("#save-cart-email").on('input',function(){var email=$("#save-cart-email").val();var emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(emailReg.test(email)){validateCartEmail();}
else{$("button#shareCart-btn").attr("disabled","disabled");}})
$('#checkbox-email').on('click',function(){if($("#checkbox-email").is(':checked')){if(shareflag==1&&validflag==1){$("button#shareCart-btn").removeAttr("disabled")}
else{$("button#shareCart-btn").attr("disabled","disabled");}}
else if($("#checkbox-email").is(':not(:checked)')){if(validflag==1){$("button#shareCart-btn").removeAttr("disabled")}
else{$("button#shareCart-btn").attr("disabled","disabled");}}});$("#shareCart-btn").on('click',function(e){e.preventDefault();var email=$("#multiple-email").val();var copyemail=$("#save-cart-email").val();var seperator=",";if(copyemail!=""){email=email+seperator+copyemail}
var url=ACC.config.encodedContextPath+"/cart/share-cart-email";if(email!=""){var postData={email:email,CSRFToken:ACC.config.CSRFToken};$.post(url,postData).done(function(data){$("#shareCart").modal("hide");$("#contactusModal").modal()})}})
$("#multiple-email").keyup(function(){if($("#multiple-email").val()==""){$("button#shareCart").attr("disabled","disabled")}});$("#multiple-email").keypress(function(e){if(e.which===32)
return!1});$('.checkout-button-id').on("click",function(event){event.preventDefault();setTimeout(()=>{$.ajax({url:ACC.config.encodedContextPath+'/cart/getCartProductStockInfo',type:'GET',success:function(data){let isStockAvailable=(data.length===0)?true:false;if(!isStockAvailable)
{window.location.reload();}
else
{upadatCartVisited();}},error:function(xhr,status,error){console.error("Error fetching stock info:",error);}});},500);});$(document).on('mouseout',".special-instructions",function(e){e.preventDefault();var commentValue=$('.special-instructions').val();var url="/cart";saveSpecialInstructions(url,commentValue)});let globalWarehouseCode="";$(document).on('click',".js_reship_warehouse",function(){globalWarehouseCode=$(this).text();});$(document).on('mouseout',".add-to-handling-instruction",function(e){e.preventDefault();var currentComment=$('.special-instructions').val()||'';var existingComment=$('.special-instructions').val()||'';var commentValue=existingComment.split(',')[0];var reshipCategoryValue=$('.js_reship_category.selected').attr('value');var reshipSubCategoryValue=$('#js_reship_selected_subcategory').val();var selectedWarehouseValue=$('.js_reship_warehouse.selected').attr('value');var hybrisOrderValue=$('#js_reship_selected_hybris_order').val();var eniteoOrderValue=$('#js_reship_selected_eniteo_order').val();commentValue=commentValue.includes("Category")?"":commentValue;if(reshipCategoryValue&&reshipSubCategoryValue&&selectedWarehouseValue&&hybrisOrderValue&&eniteoOrderValue){if(!commentValue){commentValue+=`Category: ${reshipCategoryValue}`;}else{commentValue+=`, Category: ${reshipCategoryValue}`;}
commentValue+=`, Subcategory: ${reshipSubCategoryValue}`;commentValue+=`, Warehouse: ${selectedWarehouseValue} ${globalWarehouseCode}`;commentValue+=`, Hybris Order Number: ${hybrisOrderValue}`;commentValue+=`, Eniteo Order Number: ${eniteoOrderValue}`;var url="/cart";if(commentValue!==currentComment){$('.special-instructions').val(commentValue);saveSpecialInstructions(url,commentValue)}}});function saveSpecialInstructions(url,commentValue){$.ajax({url:ACC.config.encodedContextPath+'/cart/save-special-instructions',type:"GET",data:{'commentValue':commentValue},async:!1,success:function(data){if(url!='/cart'){window.location.href=url}},error:function(){}})}
$(document).on('keypress','.js-updateform',function(event){if(event.keyCode===13){event.preventDefault();}});$(document).on('keyup','.js-updateqty',function(event){if(event.keyCode===13){$(this).blur()}});function updateQty(enteredQty,previousQty,productCode,entryNumber){const entryNum=entryNumber;const originQty=$(`.quoteEntry${entryNum}`).val();const baseProductCode=$("[id*='baseProductCode"+productCode+"']").val();let initialStockLevel=parseInt($("[class*='cart"+productCode+"'] .stockLevel").val());let prevStockLevel=parseInt($("[class*='cart"+productCode+"'] .prevStockLevel").val());let isDealProduct=$("[class*='cart"+productCode+"'] .isDeal").val();$('.cart-notification:not(.hidden)').closest('.product-card').find('.warning-mtr-msg').removeClass('warning-shown');if(enteredQty.value<=0){enteredQty.value=previousQty;}
if(previousQty!==enteredQty.value){window.mediator.publish("trackAddToCart",{productCode,quantity:previousQty,cartData:enteredQty.value});if($('#quote-isAccepted').val()==='true'){$('#modify-qty').modal('show');$('.update-qty-btn, .cancel-qty-btn').attr('data-entryNumber',entryNumber);}else if(enteredQty.value>0){handleProductUpdate(entryNum,baseProductCode,previousQty,enteredQty,isDealProduct,productCode,initialStockLevel,prevStockLevel);}}}
function handleProductUpdate(entryNum,baseProductCode,previousQty,enteredQty,isDealProduct,productCode,initialStockLevel,prevStockLevel){let isMarketplaceProduct=$("[id*='isMarketplaceProduct"+productCode+"']").val().toLowerCase()==='true';$("[class*='cart"+productCode+"'] .deal-inventory-notification").addClass('hidden');if(isDealProduct==='true'||isMarketplaceProduct){updateDealProduct(entryNum,baseProductCode,previousQty,enteredQty,productCode,initialStockLevel,prevStockLevel);}else{$(`#updateCartForm${entryNum}`).submit();}
ACC.cartPage.checkInventoryWarning();}
function updateDealProduct(entryNum,baseProductCode,previousQty,enteredQty,productCode,initialStockLevel,prevStockLevel){$.ajax({url:`/buy/pid/productStockInfo`,type:'GET',data:{productCode},success:function(data){handleStockInfo(data,entryNum,baseProductCode,productCode,previousQty,enteredQty,initialStockLevel,prevStockLevel);},error:function(xhr,status,error){console.error(`Error fetching stock info: ${status} - ${error}`);}});}
function handleStockInfo(data,entryNum,baseProductCode,productCode,previousQty,enteredQty,initialStockLevel,prevStockLevel){for(const[warehouseId,stockLevel]of Object.entries(data)){let qtyDiff=enteredQty.value-previousQty;initialStockLevel=updateStockLevels(initialStockLevel,stockLevel,prevStockLevel,productCode);initialStockLevel+=qtyDiff;updateUIComponents(warehouseId,initialStockLevel,productCode);if(parseInt(warehouseId)>=initialStockLevel){$("[class*='cart"+productCode+"'] .deal-inventory-notification").addClass('hidden');$(`#updateCartForm${entryNum}`).submit();ACC.cartPage.checkInventoryWarning();}else{setTimeout(function(){handleInsufficientStock(entryNum,baseProductCode,productCode,initialStockLevel,enteredQty,stockLevel);},500);}}}
function updateStockLevels(initialStockLevel,stockLevel,prevStockLevel,productCode){if((initialStockLevel&&initialStockLevel!=="")||prevStockLevel!==stockLevel){initialStockLevel=stockLevel;$("[class*='cart"+productCode+"'] .prevStockLevel").text(stockLevel);$("[class*='cart"+productCode+"'] .stockLevel").text(stockLevel);}
return initialStockLevel;}
function updateUIComponents(warehouseId,initialStockLevel,productCode){$("[class*='cart"+productCode+"'] .deal-inventory-notification u").text(warehouseId);$("[class*='cart"+productCode+"']  .alreadyAdded").val(initialStockLevel);}
function handleInsufficientStock(entryNum,baseProductCode,productCode,initialStockLevel,enteredQty,stockLevel){$("[class*='cart"+productCode+"'] .deal-inventory-notification").removeClass('hidden');$(".checkout-button-id").addClass("disabled");$(`#updateCartForm${entryNum} input[name='initialQuantity']`).value=enteredQty.value;$("[class*='cart"+productCode+"'] .stockLevel").text(initialStockLevel);const totalSize=$("[class*='cart"+productCode+"'] .deal-inventory-notification").length;(totalSize>1)?$("[class*='cart"+productCode+"'] .product-info").removeClass('hidden'):$("[class*='cart"+productCode+"'] .product-info").addClass('hidden');ACC.cartPage.checkInventoryWarning();}
$(".update-qty-btn").on("click",function(){var formNum=$(".update-qty-btn").attr('data-entryNumber');var url=ACC.config.encodedContextPath+'/cart/detachQuoteFromCart';$.ajax({url:url,type:'POST',data:{CSRFToken:ACC.config.CSRFToken},success:function(response){if(response){$("#updateCartForm"+formNum).submit();}}});});$(".cancel-qty-btn, [data-dismiss=modal]").on("click",function(){var formNum=$(".cancel-qty-btn").attr('data-entryNumber');var formName=$("#updateCartForm"+formNum);var originQty=formName.find(".form-control[type=number]").attr('data-preval');formName.find(".form-control[type=number]").val(originQty);});$(".js-remove-entry").on("click",function(){var entryNumber=$(this).attr("id");var form=$("#updateCartForm"+entryNumber);var productCode=form.find("input[name=productCode]").val();var initialCartQuantity=form.find("input[name=initialQuantity]").val();let gaDataElm=$(this).parents('.product-details').find('[id^="gaData"');let stringifyData,processedData;gaDataElm?stringifyData=$(gaDataElm).html():'';if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));}
window.mediator.publish("trackRemoveFromCart",{productCode:productCode,initialCartQuantity:parseInt(initialCartQuantity)});var removeForm=$("<form></form>",{action:form.attr("action"),id:"removeitem"+entryNumber,method:"POST"});removeForm.append($("<input>",{type:"hidden",name:"quantity",value:"0"}));removeForm.append($("<input>",{type:"hidden",name:"CSRFToken",value:ACC.config.CSRFToken}));removeForm.append($("<input>",{type:"hidden",name:"productCode",value:productCode}));removeForm.append($("<input>",{type:"hidden",name:"entryNumber",value:entryNumber}));$(document.body).append(removeForm);if($('#quote-isAccepted').val()=='true'){$('#remove-item-modal').modal('show');$('.remove-item-btn').attr('data-entryNumber',entryNumber);$('.remove-item-btn').attr('data-itemId',processedData.item_id);}else{processedData?ACC.ga4.removeFromCart(processedData):'';removeForm.submit();}});$(".remove-item-btn").on("click",function(){var formNum=$(".remove-item-btn").attr('data-entryNumber');var itemId=$(".remove-item-btn").attr('data-itemId');let stringifyData,processedData;itemId?stringifyData=$("#gaData-"+itemId).html():'';if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));}
var url=ACC.config.encodedContextPath+'/cart/detachQuoteFromCart';$.ajax({url:url,type:'POST',data:{CSRFToken:ACC.config.CSRFToken},success:function(response){if(response){processedData?ACC.ga4.removeFromCart(processedData):'';$("#removeitem"+formNum).submit();}}});});$("#shareCart").on("hidden.bs.modal",function(){$(this).find("input,textarea,select").val("").end().find("input[type=checkbox]").prop("checked","").end();$("#singleErrorMsg").text("");$("#errorMsg").text("");$(".sharecart-modal__email-input").css("display","none");$("#checkbox-email").removeAttr("checked");$("button#shareCart").attr("disabled","disabled");validflag=0;shareflag=0;});$("#listName").on("keyup",function(){$("button#saveCart").removeAttr("disabled");if($("#listName").val()==""){$("button#saveCart").attr("disabled","disabled")}});$("#savecartviaproject").on("hidden.bs.modal",function(){$(this).find("input").val("").end()});function enableSubmit(){$("button#shareCart").removeAttr("disabled")}
$(document).on("click",".save-list-cart",function(){var pcode=$(this).attr("id");var projListName=$("#wishListname").val();$.ajax({url:ACC.config.encodedContextPath+'/tkwish-list/saveOrderlist',data:{productCodePost:pcode,projListName:encodeURIComponent(projListName),CSRFToken:ACC.config.CSRFToken},type:"POST",success:function(response){if(response=="productAdded"){window.location.reload()}
if(response=="projectListExists"){$(".createlistMsg").text(ACC.createListMsg)}}})});$(document).on('keyup',"#wishListname",function(e){var inputVal=$("#wishListname").val().length;if(inputVal==0||inputVal==""){$(".save-list-cart").attr('disabled','disabled')}else{$(".save-list-cart").removeAttr('disabled')}});$('.create-cart-list').on('click',function(){var pcode=$(this).attr("id");var pdpcode=$(".pdp-projList").val();var sizeSelected=document.getElementById("productCodePost"+pcode).value;$.ajax({url:"/tkwish-list/createprojectlist",data:{productCode:sizeSelected},type:"GET",success:function(response){$(".proj-listMsg"+pcode).empty();$("#createlist").html(response);if(pdpcode){$('#orderdetail-projlist').addClass('hide');$("#plp-projlist").removeClass("hide")}
$("#createlist").modal("show")},error:function(){}})});$('#addCommentModal').on('hidden.bs.modal',function(){$('#commentErrorMsg').hide();});$('#js-add-ordercomment').on('click',function(){var comment=$("#js-cart-ordercomment").val().trim();var cartId=$("#cart-id").val();var pageType=$("#pageType").val();if(comment.length==0){$("#commentErrorMsg").text("Please enter valid comment");$("#commentErrorMsg").addClass("error");$("#commentErrorMsg").show();}else{$.ajax({type:"POST",url:ACC.config.encodedContextPath+"/cart/add-comments",data:{comment:encodeURIComponent(comment),cartId:cartId,pageType:pageType,CSRFToken:ACC.config.CSRFToken},cache:false,success:function(result){location.reload()}});}});$("#savecartviaproject").on("hidden.bs.modal",function(){$('.createlistMsg').text('')});$(document).on('click','#js-adjust-price',function(){$('.js-enable-price').removeAttr('disabled');});$('.tax-tooltip__data').on('click touch',function(){$(this).closest('.tax-tooltip').addClass('js-tax-tooltip');});$('.tax-tooltip .modal-close').on('click touch',function(){$(this).closest('.tax-tooltip').removeClass('js-tax-tooltip');});$(document).on('click touch',function(event){if(!$(event.target).parents().addBack().is('.tax-tooltip__data')){$('body').find('.tax-tooltip').removeClass('js-tax-tooltip');}});$('.tax-tooltip__data-content').on('click touch',function(event){event.stopPropagation();});function upadatCartVisited(){$.ajax({url:ACC.config.encodedContextPath+"/cart/update-page-visited",type:"POST",cache:false,async:!1,data:{'CSRFToken':ACC.config.CSRFToken,'pageType':'cart'},success:function(data){let stringifyData,processedData;stringifyData=$("#gaData-CartData").html();if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));}
processedData?ACC.ga4.beginCheckout(processedData):'';redirectToCheckout();}})}
function redirectToCheckout(){var isDiscontinued=$("#discontinuedProduct").val();var commentId=$('.special-instructions').attr("id");var commentValue=$('.special-instructions').val();var url=$('.checkout-button-id').attr("href");if(commentValue.length>0||commentId.length>0){saveSpecialInstructions(url,commentValue)}else if(isDiscontinued=="false"){event.preventDefault()}else{window.location.href=url}}
var priceToggle=$('.price-adjustments');var priceInput=$(".discountQuoteModule input");priceToggle.change(function(){if(this.checked){$('.discountQuoteModule, .product-level-discount').removeClass('hide');}
else{if(!priceInput.val()){$('.discountQuoteModule, .product-level-discount').addClass('hide');}
else{priceToggle.prop('checked',true);$('#cartNotesModal').modal('show');}}});var previousValue=$(".expiryDateModule #date1").val();$('.modify-date').on('change',function(){if($(this).is(':checked')){$('.expiryDateModule').removeClass('hide');}
else{if(!$('#date1').val()){$('.expiryDateModule').addClass('hide');}
else{if($('.applyExpiryDate-js').hasClass('clicked')){chkDateChnage();}
else if($('.isDateModified').val()=='true'){$('.modify-date').prop('checked',true);$('#cartModifyExpiryDate').modal('show');}
else{$('.expiryDateModule').addClass('hide');}}}});function chkDateChnage(){var currentValue=$(".expiryDateModule #date1").val();if(currentValue!=previousValue){$('.modify-date').prop('checked',true);$('#cartModifyExpiryDate').modal('show');}};$('.personalized-notes').on('change',function(){if($(this).is(':checked')){$('.personalize-panel').removeClass('hide');}else{if(!$('.js-personalizednotes').val()){$('.personalize-panel').addClass('hide');}else{$(this).prop('checked',true);$('#cartModifyPersonalizeNotes').modal('show');}}});$('.Vendor-notes').on('change',function(){if($(this).is(':checked')){$('.vendor-panel').removeClass('hide');}
else{if(!$('.js-vendornotes').val()){$('.vendor-panel').addClass('hide');}else{$(this).prop('checked',true);$('#cartNotesModal').modal('show');}}});$(".jspriceadjust").on("input",function(e){if(e.target.value!=0){$('.errorapply').hide();}
if(e.target.value>100){$(this).val(100);}
checkdecimal(e.target.value,".jspriceadjust");});$('.jspriceadjust').keypress(function(e){var key=e.which;if(key==13)
{$(".btnapplyjs").trigger('click');}});var storeval=0;$(".js-enable-price").on("keypress",function(e){var keyCode=e.keyCode||e.which;if(keyCode==43||keyCode==45||keyCode==187||keyCode==189||keyCode==101||keyCode==69){return false;}});$(".js-enable-price").on("input",function(e){$(this).closest('.price-details').find('.erroradjust').hide();var symbol=$(this).closest('.adjustprices').find('.symbol-select').val();console.log(e.target.value)
if(symbol=="percentage"&&e.target.value>100){$(this).val(100);}
var val=$(this).val();var val1=(/^\d{0,6}(\.\d{1,2})?$/gm).exec(val);if(val1==null){$(this).val(storeval);}
else{storeval=val}});$(".symbol-select").on("change",function(e){$(this).closest('.adjustprices').find('.js-enable-price').val('0.00');$(this).closest('.price-details').find('.erroradjust').hide();});function checkdecimal(value,adclass){var val=value;var re=/^([0-9]+[\.]?[0-9]?[0-9]?|[0-9]+)$/g;var re1=/^([0-9]+[\.]?[0-9]?[0-9]?|[0-9]+)/g;if(re.test(val)){}else{val=re1.exec(val);if(val){$(adclass).val(val[0]);}else{$(adclass).val('');}}}
$(".btnapplyjs").on("click",function(){var asmCartDiscount=document.getElementById("asmCartDiscount").value;if($(".jspriceadjust").val()==''){$('.errorapply').show();}else{$('.errorapply').hide();$.ajax({type:"GET",url:ACC.config.encodedContextPath+"/cart/applyDiscount?discount="+asmCartDiscount,cache:!0,success:function(){window.location.reload()},error:function(){}})}})
$(".js-reset-entry").on("click",function(e){e.preventDefault();var entryNumber=$(this).attr("id");$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath
+"/cart/reset-entryPrice?entryNumber="
+entryNumber,cache:!0,success:function(response){var data=JSON.parse(response);$('#js-base-price_'+entryNumber).val('0.00');var html='<p class="h3 bold">'+data.TotalPrice+'</p>'+'<p class="h5"><span>'+
data.basePrice+' </span><span class="">ea.</span></p>';$('#price_js_details_'+entryNumber).html(html);},error:function(){}})})
$(".js-adjustprice").on("click",function(e){e.preventDefault();var entryNumber=$(this).attr("id");var sellPrice=$('#js-base-price_'+entryNumber).val().replace(/\$/g,"");if(sellPrice==''){$('#erroradjust_'+entryNumber).show();}else{$('#erroradjust_'+entryNumber).hide();var markupPercentage=$('#js-base-price_'+entryNumber).data("markup");var configuredMarkUp=$('#js-base-price_'+entryNumber).val();var basePrice=$('#js-base-price_'+entryNumber).attr("data-baseprice");var symbolselectd=$('#select-symbol_'+entryNumber).val();if(basePrice!=sellPrice){$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath
+"/cart/update-entryPrice?sellPrice="
+encodeURIComponent(sellPrice)
+"&entryNumber="+entryNumber
+"&discountType="+symbolselectd,cache:!0,success:function(response){var data=JSON.parse(response);$('#js-base-price_'+entryNumber).val('0.00');var html='<p class="h3 bold discount-success">'+data.TotalPrice+'</p>'+'<p class="h5"><span class="discount-success">'+
data.basePrice+' </span><span class="">ea.</span></p>';$('#price_js_details_'+entryNumber).html(html);},error:function(){}})}}})
$('.modify-price').on('change',function(){if($(this).is(':checked')){$('#confirmpriceadjustment').modal({backdrop:'static',keyboard:false},'show');$('.price-calc-wrapper').show();}else{$('#nopriceadjustment').modal({backdrop:'static',keyboard:false},'show');}});$('body').on('click','.js-confirmadjustprice',function(){$('.adjustasmprice').removeClass('hide');$('.js-enable-price').removeAttr('disabled');$('.adjustpricesection').removeClass('hide');$('#confirmpriceadjustment').modal('hide');});$('body').on('click','.js-confirmadjustpriceno',function(){if(!$('.modify-price').is(':checked')){$('.modify-price').prop('checked',true);}
else{$('.modify-price').prop('checked',false);}});$('body').on('click','#confirmpriceadjustment .close-button',function(){if(!$('.modify-price').is(':checked')){$('.adjustasmprice').addClass('hide');$('.js-enable-price').addAttr('disabled');}
$('.modify-price').prop('checked',false);});$('body').on('click','#nopriceadjustment .close-button',function(){if(!$('.modify-price').is(':checked')){$('.modify-price').prop('checked',true);}
else{$('.modify-price').prop('checked',false);}});$(document).on("ready",function(){let isQuotedCartReverted=$("#quotedCartPriceReverted");if(isQuotedCartReverted.length){setTimeout(function(){$('#quote-reverted-modal').modal({backdrop:'static',keyboard:false},'show');},100);}});var dropdownEvent=()=>{$('#shipping-options .dropdown-radio').find('input').change(function(){let dropdown=$(this).closest('.custom-radio-dropdown');let radioname=$(this).attr('name');let checked='input[name='+radioname+']:checked';let checkedtext=$(checked).closest('.dropdown-radio').find('label').html();let checkedValue=$(checked).val();dropdown.find('.dropdown-value').html(checkedtext);$('#summary-loader').show();$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath
+"/cart/selectShippingCharge?selectedDeliveryMethod="
+checkedValue,cache:!0,success:function(response){updateCartPricing(JSON.parse(response));$('#summary-loader').hide();},error:function(){$('#summary-loader').hide();}})});}
dropdownEvent();var checkAddressType=()=>{$('.address-btn .address-radio').find('input').change(function(){let addressTypeName=$(this).attr('name');let checked='input[name='+addressTypeName+']:checked';let checkedText=$(checked).closest('.address-radio').find('label').text();let isCommercial=(checkedText==='Residential');$('.spinner').show();$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath+"/cart/updateAddressType",data:{addressType:isCommercial},cache:false,success:function(response){$('.spinner').hide();window.location.reload();}})})}
checkAddressType();var updateCartPricing=(data)=>{$('[id^="subtotal"').find('p').text(data.subtotal);$('[id^="shippingCost"').find('p').text(data.shippingAmount);$('[id^="totalTax"').find('p').text(data.taxAmount);$('[id^="cartTotal"').find('p').text(data.grandTotal);}
$('#updatePincode').on('click',function(){let pincode=$('#pincodeInput').val();let thisRef=$(this);thisRef.find('.text').hide();thisRef.find('.spinner').show();$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath
+"/cart/getShippingMethod?postalCode="
+pincode,cache:!0,success:function(response){let res=JSON.parse(response);let html="";if(!res.zipCodeError&&res.deliveryList.length){thisRef.parent().removeClass('hasError');thisRef.parent().next().html('');thisRef.find('.text').show();thisRef.find('.spinner').hide();let selectedValue=res.deliveryList.filter(x=>x.code==res.shippingDetails)[0];res.deliveryList.forEach(x=>{html+='<li><div class="radio dropdown-radio"><input type="radio" value="'+
x.code+'" id="'+x.code+'" name="shipping-options" class="form-radio" '+(x.code==res.shippingDetails?'checked':'')+'><label for="'+
x.code+'">'+x.displayName+'</label></div></li>'});$('#shipping-options').find('.dropdown-menu').html(html);$('#shipping-options').find('.dropdown-value').html(selectedValue.deliveryCost+' - '+selectedValue.name);$('#shipping-options').slideDown();if(!$('[name="addressType"]').is(':checked')){$('[name="addressType"]').eq(0).attr('checked',true);}
$('.address-type-radio-button').removeClass('hidden');updateCartPricing(res);dropdownEvent();window.location.reload();$('.with-shipped-location').find('.operator-product').parents('.shipment-info').removeClass('hidden');}else{thisRef.parent().addClass('hasError');thisRef.parent().next().html('Please enter a valid zip code & try again.');thisRef.find('.text').show();thisRef.find('.spinner').hide();$('#shipping-options').slideUp();$('.address-type-radio-button').addClass('hidden');$('.with-shipped-location').find('.operator-product').parents('.shipment-info').addClass('hidden');}},error:function(){thisRef.parent().addClass('hasError');thisRef.parent().next().html('Please enter a valid zip code & try again.');thisRef.find('.text').show();thisRef.find('.spinner').hide();$('#shipping-options').slideUp();$('.address-type-radio-button').addClass('hidden');$('.with-shipped-location').find('.operator-product').parents('.shipment-info').addClass('hidden');}})});var estimateTooltip=()=>{$(".estimate-tooltip span.fa-info-container").hover(function(){$(this).closest('.estimate-tooltip').addClass('js-estimate-tooltip');},function(){$(this).closest('.estimate-tooltip').removeClass('js-estimate-tooltip');});}
var mtrTooltip=()=>{$(".mtr-tooltip").hover(function(){$(this).find('.mtr-tooltip__data-content').addClass('tooltip-open');},function(){$('.mtr-tooltip__data-content').removeClass('tooltip-open');});}
mtrTooltip();estimateTooltip();var warehouseDropDownASM=()=>{$('.asm-active').each(function(){var entryId=$(this).data('entry');var selectedText=$('#warehouse_'+entryId).text();$('#warehouse_'+entryId).closest('.warehouse-dropdown').find(".warehouse-select-item").each(function(){var dropdownText=$(this).text();if(selectedText==dropdownText){$(this).addClass('selected');}else{$(this).removeClass('selected')}});});$('.warehouse-select').on('click',function(){$(this).next('.warehouse-select-body').toggleClass('hide');$('.warehouse-select').not(this).next('.warehouse-select-body').addClass('hide');-$('.warehouse-select').not(this).removeClass('open');if($(this).next('.warehouse-select-body').hasClass('hide')){$(this).removeClass('open');}else{$(this).addClass('open');}});$(".warehouse-select-item").on("click",function(){$(this).closest('.warehouse-dropdown').find('.warehouse-select-item').removeClass('selected');$(this).addClass('selected');$(this).closest('.warehouse-dropdown').find('.dropdown.warehouse-select span').text($(this).text());$(this).closest('.warehouse-select-body').toggleClass('hide');if($(this).closest('.warehouse-select-body').hasClass('hide')){$(this).closest('.warehouse-dropdown').find('.warehouse-select').removeClass('open');}else{$(this).closest('.warehouse-dropdown').find('.warehouse-select').addClass('open');}
var entryNumberWarehouse=$(this).attr("value");if(entryNumberWarehouse&&entryNumberWarehouse.includes("_")){var splitWarehouseEntryNumber=entryNumberWarehouse.split("_");var entryNumber=parseInt(splitWarehouseEntryNumber[0],10);var warehouse=parseInt(splitWarehouseEntryNumber[1],10);$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath
+"/cart/save-warehouse-entry-asm?entryNumber="+entryNumber
+"&warehouse="+warehouse,cache:!0,success:function(response){},error:function(){}})}});$(document).on('click',function(event){if(!$(event.target).closest('.warehouse-select ').length&&$('.warehouse-select').hasClass('open')){if($('.warehouse-select ').hasClass('open')){$('.warehouse-select ').next('.warehouse-select-body').addClass('hide');$('.warehouse-select ').removeClass('open');}}});}
var updateContainerHeight=()=>{var cartHeading=$('.left-cart-heading').height();if($('body').width()<768){$('.right-col').css('margin-top','0');$('.right-col.only-mobile').css('margin-top','24px');}else{$('.right-col').css('margin-top','-'+cartHeading+'px');}
$(window).resize(function(){if($('body').width()<768){$('.right-col').css('margin-top','0');$('.right-col.only-mobile').css('margin-top','24px');}else{$('.right-col').css('margin-top','-'+cartHeading+'px');}});}
warehouseDropDownASM();updateContainerHeight();

ACC.autocomplete={_autoload:["bindSearchAutocomplete","bindDisableSearch"],bindSearchAutocomplete:function(){$.widget("custom.yautocomplete",$.ui.autocomplete,{_create:function(){var option=this.element.data("options");this._setOptions({minLength:option.minCharactersBeforeRequest,displayProductImages:option.displayProductImages,delay:option.waitTimeBeforeRequest,autocompleteUrl:option.autocompleteUrl,source:this.source});$.ui.autocomplete.prototype._create.call(this)},options:{cache:{},focus:function(){return!1},select:function(event,ui){window.location.href=ui.item.url}},_renderItem:function(ul,item){var renderHtml;if(item.type=="autoSuggestion"){renderHtml="<a href='"+item.url+"' ><div class=''>"+item.value+"</div></a>";return $("<li>").data("item.autocomplete",item).append(renderHtml).appendTo(ul)}else if(item.type=="productResult"){var price=item.price;renderHtml="<a href='"+item.url+"' >";if(item.image!=null){renderHtml+="<div class='thumb'><img src='"+item.image+"'  /></div>"}
renderHtml+="<div class='name'>"+item.value+"</div>";renderHtml+="<div class='price'>"+item.currencySymbol+price.toFixed(2)+"</div>";renderHtml+="</a></div>";return $("<li>").data("item.autocomplete",item).append(renderHtml).appendTo(ul)}},source:function(request,response){var self=this;var term=request.term.toLowerCase();if(term in self.options.cache){return response(self.options.cache[term])}
$.getJSON(self.options.autocompleteUrl,{term:request.term},function(data){var autoSearchData=[];if(data.suggestions!=null){$.each(data.suggestions,function(i,obj){autoSearchData.push({value:obj.term,url:ACC.config.encodedContextPath+"/search/results?text="+obj.term,type:"autoSuggestion"})})}
if(data.products!=null){$.each(data.products,function(i,obj){try{var priceData=obj.variantMinPrice;autoSearchData.push({value:ACC.autocomplete.escapeHTML(obj.name),code:obj.code,desc:obj.description,manufacturer:obj.manufacturer,url:ACC.config.encodedContextPath+obj.url,price:priceData,currencySymbol:data.currentCurrency,type:"productResult",image:(obj.images!=""&&self.options.displayProductImages)?obj.images[0].url:"/_ui/addons/thyssenkruppnastorefrontaddon/responsive/common/images/ajax-content-image.jpg"})}catch(e){console.log(e)}})}
self.options.cache[term]=autoSearchData;return response(autoSearchData)})}});$search=$(".js-site-search-input");if($search.length>0){$search.yautocomplete()}},bindDisableSearch:function(){$("#js-site-search-input").keyup(function(){$("#js-site-search-input").val($("#js-site-search-input").val().replace(/^\s+/gm,""));$(".js_search_button").prop("disabled",this.value==""?!0:!1)})},escapeHTML:function(input){return input.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};

ACC.search={_autoload:["bindTitle","bindCurrentTab","bindaddtofavouritecolor","bindOrderSearch","bindSearchInput","bindSearchFormValidation"],bindaddtofavouritecolor:function(){$("body").on("click",".changefavcolorglyphicon",function(){var glyphicon_productcode=$(this).attr("id");var myurl="";if($(this).find(".isfavcolorglyphicon").hasClass("fa-heart")){myurl="/tkfavourite/remove-fav"+"?CSRFToken="+ACC.config.CSRFToken;}else{myurl="/tkfavourite/add-fav"+"?CSRFToken="+ACC.config.CSRFToken;}
if(!$(this).closest('.favourite_add').hasClass('disabled')){$.ajax({url:myurl,type:"POST",data:{"productCode":glyphicon_productcode},success:function(response){if(response=="Product already exits in favourite"){$(".favMsg"+glyphicon_productcode).text(ACC.favouritesMsg)}else{$(".favMsg"+glyphicon_productcode).empty()}},error:function(response){}})}})},bindTitle:function(){$(document).on("click","#tabs li",function(){var tab=$(this).attr("value");if(tab==="Products"){$("#title").text(productResult);$("#currentPage").text(currentPage);$("#pagination").text(productResult);if(productResult==0){$("#title").text(productResult+" "+"results for");$("#filters").hide();$(".contentSearch").css("display","none");$(".emptySearch").css("display","block");$(".productSearch").css("display","none");$("#searchClass").addClass("no-search-result")}else{$("#filters").show();$(".contentSearch").css("display","none");$(".emptySearch").css("display","none");$(".productSearch").css("display","block");$("#searchClass").removeClass("no-search-result")}}else{$("#title").text(textResult);$("#currentPage").text(contentCurrentPage);$("#pagination").text(textResult);if(textResult==0){$("#title").text(textResult+" "+"results for");$("#filters").hide();$(".contentSearch").css("display","none");$(".emptySearch").css("display","block");$(".productSearch").css("display","none");$("#searchClass").addClass("no-search-result")}else{$(".contentSearch").css("display","inline-block");$(".emptySearch").css("display","none");$(".productSearch").css("display","none");$("#filters").show();$("#searchClass").removeClass("no-search-result")}}})},bindCurrentTab:function(){$(document).on("click",".js-tab",function(){var url=$(this).data("url")+$(this).attr("value");$.get(url)})},bindOrderSearch:function(){$(document).on("click",".orderSearch",function(){var code=$("#orderCode").val().trim();if($('#open-order').hasClass('active')){$("#orderStatus").val("OPEN")}else if($('#cancelled-order').hasClass('active')){$("#orderStatus").val("CANCELLED")}
$("#searchOrderForm").submit();$("#orderCode").val(code)})},bindSearchInput:function(){$("#orderCode").on("input",function(e){e.target.value=e.target.value.replace(/[^a-zA-Z0-9`!@$%^&*()_ +\-=\[\]{};':"\\|,.\/?~]/g,"");})},bindSearchFormValidation:function(){$("#searchOrderForm").validate({onkeyup:!1,rules:{orderCode:{required:!0}},messages:{orderCode:{required:"",}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})}};

function isValidPDPEmailAddress(emailAddress){var regExp=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return regExp.test(emailAddress)}
function validatePDPEmail(){if($("#save-pdp-email").val()==""&&$('#checkbox-email').is(":checked")){$('#singleErrorMsg').text("Please provide a valid email address");$('#singleErrorMsg').addClass("error");$('#singleErrorMsg').show();return!1}else if($("#save-pdp-email").val()==""){return!0}else if(isValidPDPEmailAddress($("#save-pdp-email").val())){$('#singleErrorMsg').removeClass("error");$('#singleErrorMsg').hide();return!0}else{$('#singleErrorMsg').text("Please provide a valid email address");$('#singleErrorMsg').addClass("error");$('#singleErrorMsg').show();return!1}}
function validateMultipleShareEmailsCommaSeparated(){var emails=$("#multiple-email").val();var flag=!1;var commalen=(emails.match(/,/g)||[]).length;var diffemailLen=(emails.match(/@/g)||[]).length;var emailArray=emails.split(",");for(var i=0;i<=(emailArray.length-1);i++){if(isValidPDPEmailAddress(emailArray[i].trim())){$('#errorMsg').removeClass("error");$('#errorMsg').hide();flag=!0}else if((emailArray[i].trim())!=""&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$('#errorMsg').text("Email id's must be comma separated");$('#errorMsg').addClass("error");$('#errorMsg').show();flag=!1
break}else{$('#sharepdp').css('display','block');$('#contactusModal').css('display','none');$('#errorMsg').text("Please provide a valid email address");$('#errorMsg').addClass("error");$('#errorMsg').show();flag=!1
break}}
var secondflag=validatePDPEmail();if(flag==!0&&secondflag==!0){var shareProductCode=$("#productCodepopup").val();var email=$("#multiple-email").val();var copyemail=$("#save-pdp-email").val();var seperator=",";if(copyemail!=""){email=email+seperator+copyemail}
if(email!=""){var url=ACC.config.encodedContextPath+"/buy/pid/share-pdp-email";var postData={email:email,productCode:shareProductCode,CSRFToken:ACC.config.CSRFToken};$.post(url,postData).done(function(data){})}
$('#sharepdp').modal('hide');$('#contactusModal').modal()}}
$('#multiple-email').keypress(function(e){if(e.which===32)
return!1});$('#sharepdp').on('hidden.bs.modal',function(){$(this).find("textarea,select").val('').end().find("input[type=checkbox]").prop("checked","").end();$(this).find("textarea,select").val('').end().find("input[type=email]").val('').end();$('#singleErrorMsg').text('');$('#errorMsg').text('');$('.sharecart-modal__email-input').css('display','none');$('#checkbox-email').removeAttr("checked");$("button#sharepdpbtn").attr("disabled","disabled")})
function enablepdpSubmit(){$("button#sharepdpbtn").removeAttr("disabled")}
$('#multiple-email').keyup(function(){if($('#multiple-email').val()==""){$("button#sharepdpbtn").attr("disabled","disabled")}});$('.js-pdp-carousel .owl-carousel').owlCarousel({stagePadding:0,responsive:{0:{items:1,nav:true,stagePadding:60,},768:{items:4,nav:true,stagePadding:60,},993:{items:5,nav:false}},navText:['<span class="glyphicon glyphicon-menu-left"></span>','<span class="glyphicon glyphicon-menu-right"></span>'],onInitialized:function(event){var itemHeight=$(event.target).height();$(event.target.parentElement).find(".carousel-item").css("height",itemHeight+"px");if(event.item.index==0){$(".owl-stage").css("padding-left","0");}else{$(".owl-stage").css("padding-left","50px")}},onChanged:function(event){if(event.item.index==0){$(event.target).find(".owl-stage").css("padding-left","0");}else{$(event.target).find(".owl-stage").css("padding-left","50px");}},onResized:function(event){if(event.item.index==0){$(event.target).find(".owl-stage").css("padding-left","0");}else{$(event.target).find(".owl-stage").css("padding-left","50px");}}});

ACC.account={_autoload:["bindBusinessTypeModal","bindPhoneNumberValidation","changePasswordCheck","compareNewPassword","bindJobTitleModal","bindEditUserModal","bindDeleteUserValues","bindCreateUserValidation","deleteUser","saveUserDetails","createUser","bindCustomJobTitleValue","removeCustomBusinessTypeValue","emailCheck","editModalScroll","bindUpdateUserValidation","bindChangeEmailValidation","changeEmail","resetChangeEmailModal","bindChangePwdValidation","updatePwdFormSubmit","resetChangePasswordModal","emailPreferenceValidation","submitEmailPreferenceForm","bindfaxNumValidation","clearfields","blogFeed","sortBusinessType","linkToPdp","addUPSShippingAccount","destroyPasswordModal"],bindUpdateUserValidation:function(){$(".acc-profile__form.acc-profile__form_edit form").validate({onkeyup:!1,rules:{firstName:"required",lastName:"required",phone:{rangelength:[10,15]},fax:{rangelength:[10,15]}},messages:{firstName:ACC.firstName,lastName:ACC.lastName,phone:{rangelength:ACC.invalidPhoneNumber},fax:{rangelength:ACC.invalidPhoneNumber}}})},bindBusinessTypeModal:function(){$(document).on("click","#js-businessTypeBtn",function(e){var businesstypeVal=$("#custombusinesstype").val().trim();var businessType=$("#BusinessType").val().trim();if(businessType!=""){if(businesstypeVal.toLowerCase()===businessType.toLowerCase()){$("#js-businessType-error").html("<label  class='error'>"+ACC.businessTypeExists+"</label>")}else{var url="/my-account/update-businesstype/"+businessType;$.get(url,function(response){if(response=="OK"){$("#js-businessType").val(businessType);$("#business-type-span").html(businessType);$("#businessTypeModal").modal("hide")}else{$("#js-businessType-error").html("<label  class='error'>"+ACC.businessTypeExists+"</label>")}})}}})},bindfaxNumValidation:function(){$("#fax").on("input",function(e){e.target.value=e.target.value.replace(/[^0-9+-]/g,"")})},bindPhoneNumberValidation:function(){$("#js-accountphone").on("input",function(e){e.target.value=e.target.value.replace(/[^0-9+-]/g,"")})},bindJobTitleModal:function(){$(document).on("click","#js-JobTitleBtn",function(e){var id="#"+$(this).data("currentid");var span="#"+$(this).data("span");var jobTitleVal=$(this).data("jobtitle");var jobTitle=$("#jobTitleAdd").val().trim();if(jobTitle!=""){if(jobTitle.toLowerCase()===jobTitleVal.toLowerCase()){$("#js-jobtitle-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}else{var url="/my-account/update-jobtitle/"+jobTitle;$.get(url,function(response){if(response=="OK"){$(id).val(jobTitle);$(span).html(jobTitle);$("#jobTitleModal").modal("hide")}else{$("#js-jobtitle-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}})}}})},bindEditUserModal:function(){$(document).on("click","#js-edit-user",function(e){var id=$(this).data("id");var url=ACC.config.encodedContextPath+"/my-account/edit-user?user="+id;$.get(url,function(data){$("#js-editEmployeesModal").html(data);$("#editEmployeesModal").modal("show");ACC.account.bindEditUserValidation();ACC.account.emailCheck()})});$('#editEmployeesModal').on('shown.bs.modal',function(){ACC.global.customSelectDropdown();console.log("Open");})},bindDeleteUserValues:function(){$(document).on("click","#js-delete-user",function(e){var name=$(this).data("name");var email=$(this).data("email");$("#delete-user-name").html(name);$("#js-userdelete-btn").data("email",email)})},deleteUser:function(){$(document).on("click","#js-userdelete-btn",function(e){var email=$(this).data("email");var url=ACC.config.encodedContextPath+"/my-account/disable-user?user="+email;$.ajax({url:url,type:"POST",data:{CSRFToken:ACC.config.CSRFToken},success:function(response){location.reload();},error:function(xhr,status,error){console.error("Error disabling the user:",error);console.log("XHR Object:",xhr);console.log("Status:",status);}});});},saveUserDetails:function(){$(document).on("click","#js-editUser-savebtn",function(e){if(!$("form[name='editUserForm']").valid()){if($(".edit-user-form .form-control.mandatory").hasClass("error")||$(".edit-form .form-control.mandatory").val()==""){$(".js-edit-user-error").html("<label  class='error'>"+ACC.accountRequiredField+"</label>")}
return}
var url=$(this).data("url");$.ajax({url:url,type:"POST",data:$("form[name='editUserForm']").serialize(),success:function(response){if(response=="OK"){location.reload()}else if(response=="CONFLICT"){$(".js-edit-email-exist-error").html("<label  class='error'>"+ACC.userExists+"</label>")}else{$(".js-edit-user-error").html("<label  class='error'>"+ACC.accountRequiredField+"</label>")}}})})},createUser:function(){$(document).on("click","#js-create-user-btn",function(e){if(!$("form[name='tkcreateUserForm']").valid()){if($(".create-user-form .form-control.mandatory").hasClass("error")||$(".create-user-form .form-control.mandatory").val()==""){$(".js-create-user-error").html("<label  class='error'>"+ACC.accountRequiredField+"</label>")}
return}
var url=$(this).data("url");$.ajax({url:url,type:"POST",data:$("form[name='tkcreateUserForm']").serialize(),success:function(response){if(response=="OK"){location.reload()}else if(response=="CONFLICT"){$(".js-email-exist-error").html("<label  class='error'>"+ACC.userExists+"</label>")}else{$(".js-create-user-error").html("<label  class='error'>"+ACC.accountRequiredField+"</label>")}}})})},bindCreateUserValidation:function(){$("form[name='tkcreateUserForm']").validate({onkeyup:!1,rules:{firstName:{required:!0},email:{required:!0,email:!0},lastName:{required:!0}},messages:{email:{required:"",email:ACC.emailValidationError},firstName:{required:""},lastName:{required:""}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},bindEditUserValidation:function(){$("form[name='editUserForm").validate({onkeyup:!1,rules:{firstName:{required:!0},email:{required:!0,email:!0},lastName:{required:!0}},messages:{email:{required:"",email:ACC.emailValidationError},firstName:{required:""},lastName:{required:""}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},bindCustomJobTitleValue:function(){$(document).on("click",".custom-select ul span.viewModal.customjob-title",function(e){var jobtitle=$(this).data("jobtitle");var id=$(this).data("currentid");var span=$(this).data("span");$("#js-JobTitleBtn").data("jobtitle",jobtitle);$("#js-JobTitleBtn").data("currentid",id);$("#js-JobTitleBtn").data("span",span);$("#jobTitleAdd").val("");$("#js-jobtitle-error").html("")})},removeCustomBusinessTypeValue:function(){$(document).on("click",".custom-select ul span.viewModal.js-custom-businesstype",function(e){$("#BusinessType").val("");$("#js-businessType-error").html("")})},emailCheck:function(){$(document).on("blur",".check-email",function(e){var email=$(this).data("email");if($(".check-email").hasClass("error")){if(email!=null){$(".js-edit-email-exist-error").html("")}else{$(".js-email-exist-error").html("")}}})},editModalScroll:function(){$(".modal").on("hidden.bs.modal",function(e){if($(".modal:visible").length){$("body").addClass("modal-open")}})},bindChangeEmailValidation:function(){$("form[name='change-email-form']").validate({onkeyup:!1,rules:{email:{required:!0,email:!0},chkEmail:{equalTo:"#newemail"}},messages:{email:{required:ACC.emailRequired,email:ACC.emailValidationError},chkEmail:{equalTo:ACC.emailMismatch},}})},changeEmail:function(){$(document).on("click","#js-change-email-btn",function(e){if(!$("form[name='change-email-form']").valid()){return}
$.ajax({url:ACC.config.encodedContextPath+"/my-account/change-email",type:"POST",data:$("form[name='change-email-form']").serialize(),success:function(response){if(response=="OK"){location.reload()}else{$("#change-email-id-exists").html("<label  class='error'>"+ACC.userExists+"</label>")}}})})},resetChangeEmailModal:function(){$(document).on("click","#js-changeemail-modal",function(e){$("form[name='change-email-form']")[0].reset();$("form[name='change-email-form'] label.error").css("display","none");$("#change-email-id-exists").html("")})},bindChangePwdValidation:function(){$("form[name='change-pwd-form']").validate({onkeyup:!1,rules:{currentPassword:{required:!0,},newPassword:{required:!0},checkNewPassword:{required:!0,equalTo:"#newpsw"}},messages:{currentPassword:{required:ACC.resetCurrentModalPwd,},newPassword:{required:ACC.resetNewModalPwd},checkNewPassword:{required:ACC.resetconfirmnewModalPwd,equalTo:ACC.pwdMismatch},}})},updatePwdFormSubmit:function(){$(document).on("click","#js-change-pwd-btn",function(e){if(!$("form[name='change-pwd-form']").valid()||$('.js-password-change-error').hasClass('error')){return}
$.ajax({url:ACC.config.encodedContextPath+"/my-account/updates-password",type:"POST",data:$("form[name='change-pwd-form']").serialize(),success:function(response){if(response=="OK"){location.reload()}else{$("#js-current-password-validate").html("<label  class='error'>"+ACC.currentPasswordModalPwd+"</label>")}}})})},resetChangePasswordModal:function(){$(document).on("click","#js-changepwd-modal",function(e){$("form[name='change-pwd-form']")[0].reset();$("form[name='change-pwd-form'] label.error").css("display","none")})},changePasswordCheck:function(){$(document).on("blur keyup",'#newpsw',function(e){var requestedPassword=$(this).val();if(!ACC.register.validatePassword(requestedPassword)){$(this).addClass('error');$('.js-password-change-error').css("display","block");$('.js-password-change-error').html("<label class='error'>"+ACC.registerPasswordError+"</label>")}else{$(this).removeClass('error');$('.js-password-change-error').hide()
$('.js-password-change-error').removeClass('error')}})},destroyPasswordModal:function(){$('#changepsw').on('hidden.bs.modal',function(){$("#js-change-pwd-btn").attr("disabled",true);})},compareNewPassword:function(){$("#js-change-pwd-btn").attr("disabled",true);$(document).on("keyup","#newpsw, #cnewpsw",function(e){var password=$("#newpsw").val();var confirmPassword=$("#cnewpsw").val();if(password.trim().length>0&&confirmPassword.trim().length>0&&password==confirmPassword&&$('.js-password-change-error').css('display')=='none'){$("#js-change-pwd-btn").attr("disabled",false);}else{$("#js-change-pwd-btn").attr("disabled",true);}})},emailPreferenceValidation:function(){$("form[name='email-preference-form']").validate({onkeyup:!1,rules:{email:{required:!0,email:!0}},messages:{email:{required:ACC.emailRequired,email:ACC.emailValidationError}}})},clearfields:function(){$(document).on("click","#js-create-cancel-btn",function(){$("#firstNameEdit").val("");$("#lastNameEdit").val("");$("#emailEdit").val("");$("#create-job-title-span").empty();$("label.error").hide();if($(".acc-profile__employees-form").hasClass("acc-profile__info_edit")){$(".acc-profile__employees-form").removeClass("acc-profile__info_edit")}})},submitEmailPreferenceForm:function(){$(document).on("click","#emailpreferencebtn",function(e){if(!$("form[name='email-preference-form']").valid()){return}
var email=$("#js-subscribe-email").val();var url=ACC.config.encodedContextPath+"/email-preference/add-email?email="+email;var directAdd=new Image();directAdd.src=ACC.config.bronto+encodeURIComponent(email)+"&createCookie=1";$.get(url,function(data){location.reload()})})},blogFeed:function(){var url="http://blog.onlinemetals.com/feed/";feednami.load(url,function(result){if(result.error){}else{var entries=result.feed.entries;var feed="";$.each(entries,function(i,e){var entry=e;var d=new Date(entry.pubDate);var utc=d.getTime()+(d.getTimezoneOffset()*60000);var date=new Date(utc+(3600000));var months=Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var feedDate=months[date.getMonth()]+" "+date.getDate();if(i<=4){feed+="<li><a href="+entry.guid+">"+feedDate+"</a>"+": "+entry.title+"</li>"}});$("#rssFeed").html(feed)}})},sortBusinessType:function(){$("#businesstype li[value='*None-personal Use']").remove();var businesstype_list=$("#businesstype li");businesstype_list.sort(function(a,b){if($(a).text()>$(b).text())return 1;if($(a).text()<$(b).text())return-1;return 0});$("#businesstype li").remove();$("#businesstype").prepend("<li value='*None-personal Use' >*None-personal Use</li>");$("#businesstype").prepend(businesstype_list)},linkToPdp:function(){$(document).on("click",".pdpLink",function(e){var pCode=$(this).data("pdplinkcode");var url=ACC.config.encodedContextPath+"/buy/pid/"+pCode;sessionStorage.setItem("reviews",!0);window.location.href=url});$(function(){if(sessionStorage.getItem("reviews")){sessionStorage.removeItem("reviews");$("#tab-reviews").trigger("click");$(".specifications__list #tab-reviews a").trigger("click");if($(".specifications").is(":visible")){var specificationsReview=$(".specifications").offset().top;$("html, body").animate({scrollTop:specificationsReview},0)}}})},addUPSShippingAccount:function(){$(document).on("click",".acc-dashboard__item .add-ups-shipping-account",function(){localStorage.setItem("AddUPS","true");})
if(localStorage.getItem('AddUPS')){$(window).on("load",function(){if(!$(".billing-address-container").length){$(".add-address-ups").trigger("click");var checkExist=setInterval(function(){if($('#_asm').length){if($("#tkaddressForm #billingadd").length){$("#tkaddressForm #billingadd").trigger("click");$("#tkaddressForm #common_carrier_ups").trigger('click');clearInterval(checkExist);localStorage.removeItem('AddUPS');}}
else if($("#tkaddressForm #billingadd").length){$("#tkaddressForm #billingadd").trigger("click");$("#addressUPSAccount").attr("checked","checked");clearInterval(checkExist);localStorage.removeItem('AddUPS');}},100);}
else{$(".billing-address-ups").trigger("click");var checkExist=setInterval(function(){if($('#_asm').length){if($("#updateShippingAddressModal #common_carrier_ups").length){$("#updateShippingAddressModal #common_carrier_ups").trigger('click');clearInterval(checkExist);localStorage.removeItem('AddUPS');}}
else if($("#updateShippingAddressModal #addressUPSAccount2").length){$("#updateShippingAddressModal #addressUPSAccount2").attr("checked","checked");clearInterval(checkExist);localStorage.removeItem('AddUPS');}},100);}})}},};

ACC.customerticketingaddon={_autoload:["onStatusChange","bindMessageArea","setResponse","toggleAllMessages","postNewMessage","onFileChosen","bindTicketAddActions","bindTicketUpdateActions","bindSortCategory"],disableMessage:function(_this){var currentTicketStatus=$("input[id=\"currentTicketStatus\"]").val();var selectedStatus=$(_this).val();if((currentTicketStatus==="COMPLETED"&&selectedStatus==="COMPLETED")||(currentTicketStatus==="CLOSED"&&selectedStatus==="CLOSED")){$("textarea[id=\"message\"]").attr("disabled","disabled");$("button[id=\"updateTicket\"]").attr("disabled","disabled")}else{$("textarea[id=\"message\"]").removeAttr("disabled")}},onStatusChange:function(){$(document).on("change",".js-add-message-status",function(){ACC.customerticketingaddon.disableMessage(this)})},setResponse:function(){$(document).on("click",'#js-Solution',function(e){var responseId=$(this).data("js-response");var url=ACC.config.encodedContextPath+"/my-account/support-tickets/response/?responseId="+responseId;$.post(url,function(response){});});},onFileChosen:function(){$(document).on("change","#supportTicketForm input[name=files]",function(){ACC.customerticketingaddon.clearAlerts();var selectedFile=document.getElementById("attachmentFiles");if(!ACC.customerticketingaddon.isSelectedFilesValid(selectedFile)){var message="<span style='color:red'>"+$("#file-too-large-message").text()+"</span>";$("#supportTicketForm").find(".js-file-upload__file-name").html(message)}})},bindMessageArea:function(){$(document).on("keyup",".js-add-message",function(){if($(this).val().length>0){$("button[id=\"updateTicket\"]").removeAttr("disabled");$("#NotEmpty-supportTicketForm-message").hide()}else{$("button[id=\"updateTicket\"]").attr("disabled","disabled")}})},toggleAllMessages:function(){$("#ct-toggle-all-messages").on("click touchstart",function(){$(".cts-msg-history-item:not(.ct-msg-visible)").show();$(this).hide()})},postNewMessage:function(){var title=$("#ct-overlay-title").html();$(".ct-add-new-msg-btn").on("click touchstart",function(e){e.preventDefault();$.colorbox({href:"#ct-add-new-msg",maxWidth:"100%",width:525,opacity:0.7,title:title,inline:!0,close:"<span class=\"glyphicon glyphicon-remove\"></span>",onOpen:function(){$("#ct-add-new-msg").fadeIn()},onComplete:function(){ACC.customerticketingaddon.disableMessage($(".js-add-message-status"));$("button[id=\"updateTicket\"]").attr("disabled","disabled");ACC.csvimport.changeFileUploadAppearance()},onCleanup:function(){$("#ct-add-new-msg").hide()}})})},isSelectedFilesValid:function(selectedFiles){if(window.File&&window.Blob){var fileMaxSize=$(".js-file-upload__input").data("max-upload-size");var totalSize=0;for(var i=0;i<selectedFiles.files.length;++i){totalSize+=selectedFiles.files[i].size}
if($.isNumeric(fileMaxSize)&&totalSize>parseFloat(fileMaxSize)){return!1}}
for(var i=0;i<selectedFiles.files.length;++i){var name=selectedFiles.files[i].name;$("#supportTicketForm").find(".js-file-upload__file-name").html(name)}
return!0},displayCustomerTicketingAlert:function(options){var alertTemplateSelector;switch(options.type){case"error":alertTemplateSelector="#global-alert-danger-template";break;case"warning":alertTemplateSelector="#global-alert-warning-template";break;default:alertTemplateSelector="#global-alert-info-template"}
if(typeof options.message!=="undefined"){$("#customer-ticketing-alerts").append($(alertTemplateSelector).tmpl({message:options.message}))}
if(typeof options.messageId!=="undefined"){$("#customer-ticketing-alerts").append($(alertTemplateSelector).tmpl({message:$("#"+options.messageId).text()}))}},displayGlobalAlert:function(options){var alertTemplateSelector;switch(options.type){case"error":alertTemplateSelector="#global-alert-danger-template";break;case"warning":alertTemplateSelector="#global-alert-warning-template";break;default:alertTemplateSelector="#global-alert-info-template"}
if(typeof options.message!=="undefined"){$("#global-alerts").append($(alertTemplateSelector).tmpl({message:options.message}))}
if(typeof options.messageId!=="undefined"){$("#global-alerts").append($(alertTemplateSelector).tmpl({message:$("#"+options.messageId).text()}))}},bindTicketAddActions:function(){$(document).on("click","#addTicket",function(event){event.preventDefault();ACC.customerticketingaddon.formPostAction("support-tickets?ticketAdded=true")})},bindTicketUpdateActions:function(){$(document).on("click","#updateTicket",function(event){event.preventDefault();ACC.customerticketingaddon.formPostAction("?ticketUpdated=true")})},bindSortCategory:function(){$(document).ready(function(event){var options=$('#ticketCategory option');var arr=options.map(function(_,o){return{t:$(o).text(),v:o.value}}).get();arr.sort(function(o1,o2){return o1.t>o2.t?1:o1.t<o2.t?-1:0});options.each(function(i,o){o.value=arr[i].v;$(o).text(arr[i].t)})})},formPostAction:function(successRedirectUrl){ACC.customerticketingaddon.clearAlerts();var form=document.getElementById("supportTicketForm");var formData=new window.FormData(form);var selectedFile=document.getElementById("attachmentFiles");if(!ACC.customerticketingaddon.isSelectedFilesValid(selectedFile)){ACC.customerticketingaddon.displayCustomerTicketingAlert({type:"error",messageId:"attachment-file-max-size-exceeded-error-message"});return}
$.ajax({url:form.action,type:"POST",data:$("#supportTicketForm").serialize(),success:function(){window.location.replace(successRedirectUrl)},error:function(jqXHR){ACC.customerticketingaddon.processErrorResponse(jqXHR)}})},processErrorResponse:function(jqXHR){ACC.customerticketingaddon.clearAlerts();if(jqXHR.status===400&&jqXHR.responseJSON){$.each(jqXHR.responseJSON,function(){$.each(this,function(k,v){var target="#"+k;$(target).show();$(target).text(v);if(k==="NotEmpty-supportTicketForm-subject"||k==="Size-supportTicketForm-subject"||k==="NotEmpty-supportTicketForm-message"||k==="Size-supportTicketForm-message"){ACC.customerticketingaddon.addHasErrorClass()}else{ACC.customerticketingaddon.displayGlobalAlert({type:"error",message:v})}})});return}
ACC.customerticketingaddon.displayCustomerTicketingAlert({type:"error",messageId:"customerticketingaddons-tryLater"})},addHasErrorClass:function(){$("#createTicket-message").parent().addClass("has-error")},clearAlerts:function(){$("#customer-ticketing-alerts").empty();$("#global-alerts").empty();$("#NotEmpty-supportTicketForm-subject").hide();$("#Size-supportTicketForm-message").hide();$("#Size-supportTicketForm-subject").hide();$("#createTicket-subject").parent().removeClass("has-error");$("#NotEmpty-supportTicketForm-message").hide();$("#createTicket-message").parent().removeClass("has-error")},};

ACC.register={_autoload:["openModal","bindCreateAccount","regEmailCheck","regPasswordCheck","registerFormValidation","validRegisterEmail","comparePassword","validatePassword"],registerFormValidation:function(){$("#registerForm").validate({onkeydown:!1,rules:{email:{required:!0,email:!0},pwd:{required:!0},firstName:{required:!0},lastName:{required:!0},checkPwd:{required:!0,equalTo:'#pwd'}},messages:{email:{required:"",email:ACC.emailValidationError},pwd:{required:""},lastName:{required:''},firstName:{required:''},checkPwd:{required:"",equalTo:ACC.confirmPassword}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},openModal:function(){$('#signupModal, #js-signinModal').on('shown.bs.modal',function(){$('body').addClass('modal-open')})},bindCreateAccount:function(){$(document).on("click","#createAccount,.signUpPopup",function(){$.ajax({url:ACC.config.encodedContextPath+'/b2bregister',type:'GET',success:function(data){$('#js-registration').html(data);$('#signinModal').modal('hide');$("#signupModal").modal('show');ACC.register.submitRegistrationForm();ACC.register.registerFormValidation();ACC.register.resetPasswordCopyPaste();ACC.register.registerFormValidation();ACC.register.openSignInModal(data);$('#saveCartUnauthentic').modal('hide');},error:function(){console.log("error")}})})},submitRegistrationForm:function(){$('form#registerForm').submit(function(e){e.preventDefault("submit");if(!$('form#registerForm').valid()){if($('.registration-form .form-control').hasClass('error')||$('.registration-form .form-control').val()==''){$('#signupModal').animate({scrollTop:0},'slow');$('#accountErrorMsg').removeClass('hide')}
return}
if($('.js-pass-exist-error').hasClass('error')){$('#signupModal').animate({scrollTop:0},'slow');$('#accountErrorMsg').removeClass('hide')
return}
let hashedEmail,email=$(".reg-check-email").val();email?hashedEmail=ACC.register.SHA256(email):undefined;$.ajax({url:$("#registerForm").attr('action'),type:'POST',data:$("#registerForm").serialize(),success:function(response){if(response=="OK"){hashedEmail?ACC.ga4.createAccount(hashedEmail):undefined;$("#signupModal").modal('hide');$("#customerSuccessRegisterEmail").html($(".reg-check-email").val());$("#registerSucessModal").modal('show')}else if(response=="EXPECTATION_FAILED"){$('.js-email-exist-error').html("<label  class='error'>"+ACC.registerUserExists+"</label>")}},error:function(){console.log("error")}})})},regEmailCheck:function(){$(document).on("blur keyup",'.reg-check-email',function(e){var requestedEmail=$(this).val();if(ACC.register.validRegisterEmail(requestedEmail)){var url=ACC.config.encodedContextPath+'/b2bregister/check-email?email='+requestedEmail;$.get(url,function(response){if(response=='FOUND'){$('.js-email-exist-error').html("<label  class='error'>"+ACC.registerUserExists+"</label>")}else{$('.js-email-exist-error').html("")}})}else{$('.js-email-exist-error').html("")}})},regPasswordCheck:function(){$(document).on("blur keyup",'.reg-check-password',function(e){var requestedPassword=$(this).val();if(!ACC.register.validatePassword(requestedPassword)){$(this).addClass('error');$('.js-pass-exist-error').css("display","block");$('.js-pass-exist-error').html("<label  class='error'>"+ACC.registerPasswordError+"</label>")}else{$(this).removeClass('error');$('.js-pass-exist-error').hide()
$('.js-pass-exist-error').removeClass('error')}})},resetPasswordCopyPaste:function(){$('#pwd, #checkPwd').on("cut copy paste",function(e){e.preventDefault()})},openSignInModal:function(data){$(document).on("click","#js-reg-signin,#js-top-signin-link",function(e,data){e.preventDefault();$("#signinModal").html(data);$('#signupModal').modal('hide');$("#js-signupModal").modal('hide');$("#signinModal").modal('show');ACC.register.openModal()})},validRegisterEmail:function(email){var filter=/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;if(filter.test(email)){return!0}else{return!1}},validatePassword:function(pwd){var filter=/^(?=.*[0-9])(?!.* )(?!.*[#<>])(?=.*[a-z])(?=.*[A-Z])(?=.*[\W]).{8,}|(?=.*[0-9])(?!.* )(?!.*[#<>])(?=.*[a-z])(?=.*[A-Z]).{8,}|(?=.*[0-9])(?!.* )(?!.*[#<>])(?=.*[a-z])(?=.*[\W]).{8,}|(?=.*[a-z])(?!.* )(?!.*[#<>])(?=.*[A-Z])(?=.*[\W]).{8,}|(?=.*[0-9])(?!.* )(?!.*[#<>])(?=.*[A-Z])(?=.*[\W]).{8,}$/;if((filter.test(pwd))&&(!pwd.includes("#"))&&(!pwd.includes("<"))&&(!pwd.includes(">"))&&(!pwd.includes(" "))){return!0}else{return!1}},comparePassword:function(){$("#js-register-account").attr("disabled",true);$(document).on("keyup","#pwd, #checkPwd",function(e){var password=$("#pwd").val();var confirmPassword=$("#checkPwd").val();if(password.trim().length>0&&confirmPassword.trim().length>0&&password==confirmPassword&&$('.js-pass-exist-error').css('display')=='none'){$("#js-register-account").attr("disabled",false);}else{$("#js-register-account").attr("disabled",true);}})},SHA256:function(s){let chrsz=8;let hexcase=0;let safe_add=(x,y)=>{let lsw=(x&0xFFFF)+(y&0xFFFF);let msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);}
let S=(X,n)=>{return(X>>>n)|(X<<(32-n));}
let R=(X,n)=>{return(X>>>n);}
let Ch=(x,y,z)=>{return((x&y)^((~x)&z));}
let Maj=(x,y,z)=>{return((x&y)^(x&z)^(y&z));}
let Sigma0256=(x)=>{return(S(x,2)^S(x,13)^S(x,22));}
let Sigma1256=(x)=>{return(S(x,6)^S(x,11)^S(x,25));}
let Gamma0256=(x)=>{return(S(x,7)^S(x,18)^R(x,3));}
let Gamma1256=(x)=>{return(S(x,17)^S(x,19)^R(x,10));}
let core_sha256=(m,l)=>{let K=new Array(0x428A2F98,0x71374491,0xB5C0FBCF,0xE9B5DBA5,0x3956C25B,0x59F111F1,0x923F82A4,0xAB1C5ED5,0xD807AA98,0x12835B01,0x243185BE,0x550C7DC3,0x72BE5D74,0x80DEB1FE,0x9BDC06A7,0xC19BF174,0xE49B69C1,0xEFBE4786,0xFC19DC6,0x240CA1CC,0x2DE92C6F,0x4A7484AA,0x5CB0A9DC,0x76F988DA,0x983E5152,0xA831C66D,0xB00327C8,0xBF597FC7,0xC6E00BF3,0xD5A79147,0x6CA6351,0x14292967,0x27B70A85,0x2E1B2138,0x4D2C6DFC,0x53380D13,0x650A7354,0x766A0ABB,0x81C2C92E,0x92722C85,0xA2BFE8A1,0xA81A664B,0xC24B8B70,0xC76C51A3,0xD192E819,0xD6990624,0xF40E3585,0x106AA070,0x19A4C116,0x1E376C08,0x2748774C,0x34B0BCB5,0x391C0CB3,0x4ED8AA4A,0x5B9CCA4F,0x682E6FF3,0x748F82EE,0x78A5636F,0x84C87814,0x8CC70208,0x90BEFFFA,0xA4506CEB,0xBEF9A3F7,0xC67178F2);let HASH=new Array(0x6A09E667,0xBB67AE85,0x3C6EF372,0xA54FF53A,0x510E527F,0x9B05688C,0x1F83D9AB,0x5BE0CD19);let W=new Array(64);let a,b,c,d,e,f,g,h,i,j;let T1,T2;m[l>>5]|=0x80<<(24-l%32);m[((l+64>>9)<<4)+15]=l;for(i=0;i<m.length;i+=16){a=HASH[0];b=HASH[1];c=HASH[2];d=HASH[3];e=HASH[4];f=HASH[5];g=HASH[6];h=HASH[7];for(j=0;j<64;j++){if(j<16)W[j]=m[j+i];else W[j]=safe_add(safe_add(safe_add(Gamma1256(W[j-2]),W[j-7]),Gamma0256(W[j-15])),W[j-16]);T1=safe_add(safe_add(safe_add(safe_add(h,Sigma1256(e)),Ch(e,f,g)),K[j]),W[j]);T2=safe_add(Sigma0256(a),Maj(a,b,c));h=g;g=f;f=e;e=safe_add(d,T1);d=c;c=b;b=a;a=safe_add(T1,T2);}
HASH[0]=safe_add(a,HASH[0]);HASH[1]=safe_add(b,HASH[1]);HASH[2]=safe_add(c,HASH[2]);HASH[3]=safe_add(d,HASH[3]);HASH[4]=safe_add(e,HASH[4]);HASH[5]=safe_add(f,HASH[5]);HASH[6]=safe_add(g,HASH[6]);HASH[7]=safe_add(h,HASH[7]);}
return HASH;}
let str2binb=(str)=>{let bin=Array();let mask=(1<<chrsz)-1;for(let i=0;i<str.length*chrsz;i+=chrsz){bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<(24-i%32);}
return bin;}
let Utf8Encode=(string)=>{string=string.replace(/\r\n/g,'\n');let utftext='';for(let n=0;n<string.length;n++){let c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;}
let binb2hex=(binarray)=>{let hex_tab=hexcase?'0123456789ABCDEF':'0123456789abcdef';let str='';for(let i=0;i<binarray.length*4;i++){str+=hex_tab.charAt((binarray[i>>2]>>((3-i%4)*8+4))&0xF)+
hex_tab.charAt((binarray[i>>2]>>((3-i%4)*8))&0xF);}
return str;}
s=Utf8Encode(s);return binb2hex(core_sha256(str2binb(s),s.length*chrsz));}};

ACC.productcompare={_autoload:["bindToCompareForm","removeCompareProduct","scrollCompareProduct","bindCompareAddToCart","bindCompareProductQty","bindCompareSizeDropdown"],bindToCompareForm:function(){$(document).on("click",'[id^=product-checkbox_]',function(e){var productCode=$(this).data("productcode");var count=$("[id^=product-checkbox_]:checked").length;if((count>4)&&(this.checked==true)){e.preventDefault();$(this).removeAttr('checked');$("#compareProductsNotification").modal('show')}else{var $form=$('[id*=compareForm'+productCode+']');$.ajax({url:$form.attr("action"),data:$form.serialize(),type:'POST',success:function(data){$(".js-compare-bucket").replaceWith(data);}})}})},removeCompareProduct:function(){$(document).on('click','[id^=js-remove-to-compare-action_]',function(){var pCode=$(this).data("productcode");$('#product-checkbox_'+pCode).removeAttr("checked");var $form=$('.active [id*=compareForm'+pCode+']');$.ajax({url:$form.attr("action"),data:$form.serialize(),type:'POST',success:function(data){$(".js-compare-bucket").replaceWith(data);}})})},scrollCompareProduct:function(){$(window).scroll(function(){if($(this).scrollTop()>200){$('.compare-scroll').show()}else{$('.compare-scroll').hide()}})},bindCompareAddToCart:function(){$(document).on("click",'[id^=addToCartButton_]',function(e){var baseProductCode=$(this).data("product-code");var addToCartButton=$(this);addToCartButton.addClass("disabled").prop("disabled",true);ACC.tkaddtocart.ajaxAddToCart(baseProductCode,addToCartButton)})},bindCompareProductQty:function(){$(document).on("blur",'[id^=js-compare-product-qty_]',function(e){var qty=$(this).val();var optionIndex=$(this).data("index");if(qty=="0"||qty=="00"||qty=="000"||qty=="0000"||qty==""){$("#js-product-qty_"+optionIndex).val("1")}
$("#js-compare-product-qty_"+optionIndex).val(qty)})},bindCompareSizeDropdown:function(){$(document).on("click",'.product-compare__body__block .custom-select li',function(){var element=$(this).closest('.col-xs-12').attr('product-index');var elementValue=$(this).attr('length-key');$("[product-index='"+element+"'] .product-compare__body__block_length").text(elementValue)})}};

ACC.accountaddressbook={_autoload:["openAddressBookModal","createAccountBook","submitAddressBookForm","addressBookFormValidation","onChangeAddressBook","addressExtValidation","addressPhoneValidation","editAddressBookForm","editSaveAddressBookForm","bindDeleteAddressValues","deleteAddress","bindCountryOnAddressEdit","bindFaxFieldValidation","bindAddressValidation","bindEditAddressValidation","bindAddressShipBillSuggestionSelection",],addressBookFormValidation:function(){$("#tkaddressForm").validate({onkeyup:!1,rules:{firstName:{required:!0},email:{required:!0,email:!0},lastName:{required:!0},line1:{required:!0},townCity:{required:!0},regionIso:{required:!0},postcode:{required:!0,maxlength:15},countryIso:{required:!0},phone:{required:!0,rangelength:[10,15]},fax:{rangelength:[10,15]}},messages:{firstName:{required:""},lastName:{required:""},line1:{required:""},townCity:{required:""},regionIso:{required:""},email:{required:"",email:ACC.emailValidationError},phone:{required:"",rangelength:ACC.invalidPhoneNumber},postcode:{required:"",maxlength:ACC.invalidZipCode},fax:{rangelength:ACC.invalidPhoneNumber},},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},openAddressBookModal:function(){$("#addAddressModal, #js-address-book").on("shown.bs.modal",function(){$("body").addClass("modal-open")})},createAccountBook:function(){$(document).on("click","#js-address-book",function(){$("#addAddressModal").modal("show")})},onChangeAddressBook:function(){$(document).on("change",".acc-address__modal .select-address",function(){var $this=$(this);var $thisVal=$this.val();if($thisVal=="shippingAddress"){$(".choose-billing-option").hide();$("#billingadd").removeAttr("checked");$("#shippingadd").attr("checked","checked");$("input:radio[name='upsAccountOrCommonCarrier']").removeAttr("checked");$(".billing-form__ups-account_view").attr("style","display:none");$(".accountShippingAddressCompany").attr("style","display:block");$(".accountShippingAddressCompany input[type='text'][name='companyName']").removeAttr("disabled");$(".accountBillingAddressCompany").attr("style","display:none");$(".accountBillingAddressCompany input[type='text'][name='companyName']").attr("disabled","disabled")}else{$(".accountShippingAddressCompany").attr("style","display:none");$(".accountShippingAddressCompany input[type='text'][name='companyName']").attr("disabled","disabled");$(".accountBillingAddressCompany input[type='text'][name='companyName']").removeAttr("disabled");$(".accountBillingAddressCompany").attr("style","display:block");$(".choose-billing-option").show();$("#shippingadd").removeAttr("checked");$("#billingadd").attr("checked","checked")}})},submitAddressBookForm:function(){$(document).on('click','.js_addAddress_validation',function(e){var addAddress=$(this);addAddress.addClass("disabled").prop("disabled",true);var upsErrorEL=$("#tkaddressForm .upsError");var upsZipcodeErrorEL=$("#tkaddressForm .upsZipcodeError");var addressBookForm=$("#tkaddressForm").valid();var addressOption=$("#tkaddressForm input[type='radio'][name='addressOption']:checked").length
var isCommonCarrierSelected=$("#tkaddressForm input[id='commonCarrier'][type='radio']:checked").length;var upsAccountOrCommonCarrier=$("#tkaddressForm input[name='upsAccountOrCommonCarrier'][type='radio']:checked").length;var upsAccountNumber=$("#tkaddressForm input[type='text'][name='addressUPSAccountNumber']").val();var upsZipcode=$("#tkaddressForm input[type='text'][name='upsZipcode']").val();var addressUPSAccount=$("#tkaddressForm input[name='addressUPSAccount'][type='checkbox']:checked").length;$("#js-add-required-upsaccount").html("");if(addressOption){if((upsAccountOrCommonCarrier||addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEL.show();upsErrorEL.text(ACC.upsvalidate);upsErrorEL.addClass("error");e.preventDefault();e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipcodeErrorEL.show();upsZipcodeErrorEL.text(ACC.upsZipcodeValidate);upsZipcodeErrorEL.addClass("error");e.preventDefault()}
addAddress.removeClass("disabled").prop("disabled",false);ACC.tkcheckoutaddress.loadValidationJs();return}}
if(addressBookForm){$.ajax({url:$("#tkaddressForm").attr("action"),type:"POST",data:$("#tkaddressForm").serialize(),success:function(data){if($.trim(data)=='success'){location.reload()}else if($.trim(data).indexOf('upsValidationError')!=-1){upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$("#checkoutEditBillModal").animate({scrollTop:0},"slow");addAddress.removeClass("disabled").prop("disabled",false);}else if($.trim(data).indexOf('fail')!=-1){upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$("#addAddressModal").animate({scrollTop:0},"slow");addAddress.removeClass("disabled").prop("disabled",false);}else{$("#addressValidationErrorMessage").removeClass("hide");$("#addAddressModal").animate({scrollTop:0},"slow");addAddress.removeClass("disabled").prop("disabled",false);}
ACC.tkcheckoutaddress.loadValidationJs()}});ACC.tkcheckoutaddress.loadValidationJs()}else{addAddress.removeClass("disabled").prop("disabled",false);}
$('#tkaddressForm .form-group').matchHeight()})},addressExtValidation:function(){$(".js-addressExt").keydown(function(event){if(event.keyCode==46||event.keyCode==8||event.keyCode==9||event.keyCode==27||event.keyCode==13||(event.keyCode==65&&event.ctrlKey===!0)||(event.keyCode>=35&&event.keyCode<=39)){return}else{if(event.shiftKey||(event.keyCode<48||event.keyCode>57)&&(event.keyCode<96||event.keyCode>105)){event.preventDefault()}}})},addressPhoneValidation:function(){$(".js-addressBookPhone").on("input",function(event){event.target.value=event.target.value.replace(/[^0-9+-]/g,"")})},editAddressBookForm:function(){$(document).on("click",".js-editAddressBook",function(e){var id=$(this).data("address");$.ajax({url:ACC.config.encodedContextPath+"/my-account/edit-address",data:{"addressId":id},type:"GET",success:function(data){$("#updateShippingAddressModal").html(data);$("#updateShippingAddressModal").modal("show");ACC.tkcheckoutaddress.loadValidationJs();ACC.accountaddressbook.addressBookEditValidation();ACC.accountaddressbook.addressPhoneValidation();ACC.accountaddressbook.addressExtValidation();ACC.accountaddressbook.bindFaxFieldValidation();ACC.customquote.bindPostCodeValidation()},error:function(e){}})})},addressBookEditValidation:function(){$("form[name='edit-address-form']").validate({onkeyup:!1,rules:{email:{required:!0,email:!0},phone:{required:!0,rangelength:[10,15]},firstName:{required:!0},lastName:{required:!0},townCity:{required:!0},regionIso:{required:!0},line1:{required:!0},postcode:{required:!0,maxlength:15},countryIso:{required:!0},fax:{rangelength:[10,15]}},messages:{email:{required:"",email:ACC.emailValidationError},lastName:{required:""},firstName:{required:""},line1:{required:""},regionIso:{required:""},townCity:{required:""},postcode:{required:"",maxlength:ACC.invalidZipCode},phone:{required:"",rangelength:ACC.invalidPhoneNumber},fax:{rangelength:ACC.invalidPhoneNumber},},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},editSaveAddressBookForm:function(){$(document).on("click",".js-editUpdateAddressBook",function(e){var upsErrorEl=$("#editAddress .upsError");var upsZipCodeErrorEL=$("#editAddress .upsZipcodeError");var addressOption=$("#editAddress input[type='radio'][name='addressOption']:checked").length
var isCommonCarrierSelected=$("#editAddress input[id='commonCarrier'][type='radio']:checked").length;var upsAccountOrCommonCarrier=$("#editAddress input[name='upsAccountOrCommonCarrier'][type='radio']:checked").length;var upsAccountNumber=$("#editAddress input[type='text'][name='addressUPSAccountNumber']").val();var upsZipcode=$("#editAddress input[type='text'][name='upsZipcode']").val();var addressUPSAccount=$("#editAddress input[name='addressUPSAccount'][type='checkbox']:checked").length;$("#js-edit-required-upsaccount").html("");var actionURL=$('#editAddress').attr('action');var editForm=$('#editAddress').valid();if(addressOption){if((upsAccountOrCommonCarrier||addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEl.show();upsErrorEl.text(ACC.upsvalidate);upsErrorEl.addClass("error");e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipCodeErrorEL.show();upsZipCodeErrorEL.text(ACC.upsZipcodeValidate);upsZipCodeErrorEL.addClass("error");e.preventDefault()}
ACC.tkcheckoutaddress.loadValidationJs();return}}
if(editForm){$("#editshippingadd").removeAttr("disabled");$("#editbillingadd").removeAttr("disabled");$.ajax({url:actionURL,type:"POST",data:$("#editAddress").serialize(),success:function(data){if($.trim(data)=='success'){location.reload()}else if($.trim(data).indexOf('fail')>=0){upsErrorEl.show();upsErrorEl.text(ACC.validateUPSAccountNumber);upsErrorEl.addClass("error");$("#updateShippingAddressModal").animate({scrollTop:0},"slow")}else if($.trim(data).indexOf('upsValidationError')!=-1){upsErrorEl.show();upsErrorEl.text(ACC.validateUPSAccountNumber);upsErrorEl.addClass("error");$("#updateShippingAddressModal").animate({scrollTop:0},"slow")}else{$("#editAddressErrormsg").removeClass("hide");$("#updateShippingAddressModal").animate({scrollTop:0},"slow")}}})}})},bindDeleteAddressValues:function(){$(document).on("click","#js-remove-addr-link",function(){var addressId=$(this).data("address");var userName=$(this).data("name");$("#js-address-user-name").html(userName);$("#js-deleteaddress-btn").data("addressid",addressId)})},deleteAddress:function(){$(document).on("click","#js-deleteaddress-btn",function(){var addressId=$(this).data("addressid");var url=ACC.config.encodedContextPath+"/my-account/remove-address/"+addressId+"?CSRFToken="+ACC.config.CSRFToken;$.post(url,function(data){location.reload()})})},bindCountryOnAddressEdit:function(){$(document).on("change",".js-account-country",function(){var countryIso=$(this).val();var action=$(this).data("action");if(!((countryIso=="US")||(countryIso=="CA"))){$(".js-address-region").attr("style","display:none");return}
$(".js-address-region").attr("style","display:inline-block");$.ajax({url:ACC.config.encodedContextPath+"/contact-us/showRegions",type:"GET",data:{countryIso:countryIso},contentType:"application/json",success:function(response){if(response.length==0){$("#js-"+action+"-region").val("").trigger("change");$("#js-"+action+"-region").attr("disabled","disabled")}else{var placeholder=$("#js-state-placeholder").val();$("#js-"+action+"-region").removeAttr("disabled");$("#js-"+action+"-region").empty();$("#js-"+action+"-region").append($("<option value=''></option>").text(placeholder));$.each(response,function(key,value){$("#js-"+action+"-region").append($("<option></option>").attr("value",value.isocode).text(value.name));$("#js-"+action+"-region option:first").prop("selected",!0)})}}})})},bindFaxFieldValidation:function(){$(".js-fax").on("input",function(event){event.target.value=event.target.value.replace(/[^0-9+-]/g,"")})},bindEditAddressValidation:function(){$(document).on('click','.js_edit_Suggestion_Validation',function(e){var upsErrorEl=$("#editAddress .upsError");var upsZipCodeErrorEL=$("#editAddress .upsZipcodeError");var addressOption=$("#editAddress input[type='radio'][name='addressOption']:checked").length
var isCommonCarrierSelected=$("#editAddress input[id='commonCarrier'][type='radio']:checked").length
var upsAccountOrCommonCarrier=$("#editAddress input[name='upsAccountOrCommonCarrier'][type='radio']:checked").length;var upsAccountNumber=$("#editAddress input[type='text'][name='addressUPSAccountNumber']").val();var upsZipcode=$("#editAddress input[type='text'][name='upsZipcode']").val();var addressUPSAccount=$("#editAddress input[id='common_carrier_ups'][type='radio']:checked").length;$("#js-edit-required-upsaccount").html("");var Url=$('#editAddress').attr('action');var editForm=$('#editAddress').valid();if(addressOption){if((addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEl.show();upsErrorEl.text(ACC.upsvalidate);upsErrorEl.addClass("error");e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipCodeErrorEL.show();upsZipCodeErrorEL.text(ACC.upsZipcodeValidate);upsZipCodeErrorEL.addClass("error");e.preventDefault()}
ACC.tkcheckoutaddress.loadValidationJs();return}}
if(editForm){$("#editshippingadd").removeAttr("disabled");$("#editbillingadd").removeAttr("disabled");$.ajax({url:Url,type:'POST',data:$("#editAddress").serialize(),success:function(data){if($.trim(data)=='success'){location.reload()}else if($.trim(data).indexOf('fail')>=0){$("#editAddress .upsError").html(ACC.validateUPSAccountNumber);$("#updateShippingAddressModal").animate({scrollTop:0},"slow")}else{var upsAccountFlag=$(data).find("input[type='hidden'][name='useUPSAccount']").val();$('#updateShippingAddressModal').html(data);$('.js_edit_address_suggestion').attr('style','display:block');$('#updateShippingAddressModal').modal('show');if(typeof upsAccountFlag!=='undefined'&&upsAccountFlag=='true'&&upsAccountFlag.length){$("#updateShippingAddressModal input[name='upsAccountOrCommonCarrier'][type='radio'][value='upsAccount']").prop("checked",!0);$("#updateShippingAddressModal input[name='addressUPSAccount'][type='checkbox']").prop("checked",!0)}}
ACC.tkcheckoutaddress.loadValidationJs()},error:function(data){ACC.tkcheckoutaddress.loadValidationJs()}})}})},bindAddressValidation:function(){$(document).on('click','.js_add_address_Book_Validation',function(e){var upsErrorEL=$("#tkaddressForm .upsError");var addAddress=$(this);addAddress.addClass("disabled").prop("disabled",true);var upsZipCodeErrorEL=$("#tkaddressForm .upsZipcodeError");var form=$('#tkaddressForm').valid();var Url=$('#tkaddressForm').attr('action');var addressOption=$("#tkaddressForm input[type='radio'][name='addressOption']:checked").length
var isCommonCarrierSelected=$("#tkaddressForm input[id='commonCarrier'][type='radio']:checked").length;var upsAccountOrCommonCarrier=$("#tkaddressForm input[name='upsAccountOrCommonCarrier'][type='radio']:checked").length;var upsAccountNumber=$("#tkaddressForm input[type='text'][name='addressUPSAccountNumber']").val();var upsZipcode=$("#tkaddressForm input[type='text'][name='upsZipcode']").val();var addressUPSAccount=$("#tkaddressForm input[id='common_carrier_ups'][type='radio']:checked").length;$("#js-add-required-upsaccount").html("");if(addressOption){if((addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEL.show();upsErrorEL.text(ACC.upsvalidate);upsErrorEL.addClass("error");e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipCodeErrorEL.show();upsZipCodeErrorEL.text(ACC.upsZipcodeValidate);upsZipCodeErrorEL.addClass("error");e.preventDefault()}
addAddress.removeClass("disabled").prop("disabled",false);ACC.tkcheckoutaddress.loadValidationJs();return}}
if(form){$.ajax({url:Url,type:'POST',data:$("#tkaddressForm").serialize(),success:function(data){if($.trim(data)=='success'){window.location.reload()}else if($.trim(data).indexOf('fail')>=0){$("#tkaddressForm .upsError").html(ACC.validateUPSAccountNumber);$("#addAddressModal").animate({scrollTop:0},"slow");addAddress.removeClass("disabled").prop("disabled",false);}else{var upsAccountFlag=$(data).find("input[type='hidden'][name='useUPSAccount']").val();$('#addAddressModal').html(data);$('.choose-billing-option').show();$('.js_registeredship_address_suggestion').attr('style','display:block');if(typeof upsAccountFlag!=='undefined'&&upsAccountFlag=='true'&&upsAccountFlag.length){$("#addAddressModal input[name='upsAccountOrCommonCarrier'][type='radio'][value='upsAccount']").prop("checked",!0);$("#addAddressModal input[name='addressUPSAccount'][type='checkbox']").prop("checked",!0)}
addAddress.removeClass("disabled").prop("disabled",false);}
ACC.tkcheckoutaddress.loadValidationJs()},error:function(data){ACC.tkcheckoutaddress.loadValidationJs()
addAddress.removeClass("disabled").prop("disabled",false);}});ACC.tkcheckoutaddress.loadValidationJs()}else{addAddress.removeClass("disabled").prop("disabled",false);}
$('#tkaddressForm .form-group').matchHeight()})},bindAddressShipBillSuggestionSelection:function(){$(document).on("click",".js_address_suggestion_radio",function(){$('.js_customer_choice').attr('data-line1',$('#js_edit_line1').attr("value"));$('.js_customer_choice').attr('data-town',$('#js_edit_city').attr("value"));$('.js_customer_choice').attr('data-region',$('.js_region_form').html());$('.js_customer_choice').attr('data-postalcode',$('#js_edit_postalCode').attr("value"));var line1=$(this).data('line1');var town=$(this).data('town');var postalcode=$(this).data('postalcode');var region=$(this).data('region');var regionIso=$(this).data('regioniso');$('#js_edit_line1').attr("value",line1);$('#js_edit_city').attr("value",town);$('.js_region_form').html("<option value="+regionIso+" id=js_country_iso"+regionIso+" selected=selected>"+region+"</option>");$('#js_edit_postalCode').attr("value",postalcode)});$(document).on("click",".js_customer_choice",function(){var line1=$(this).data('line1');var town=$(this).data('town');var postalcode=$(this).data('postalcode');var region=$(this).data('region');var regionIso=$(this).data('regioniso');$('#js_edit_line1').attr("value",line1);$('#js_edit_city').attr("value",town);$('.js_region_form').html("<option value="+regionIso+" id=js_country_iso"+regionIso+" selected=selected>"+region+"</option>");$('#js_edit_postalCode').attr("value",postalcode)})},};

ACC.customquote={_autoload:["bindCustomQuoteProduct","bindCustomQuote","bindEditCustomQuote","bindCustomSignIn","bindFormValidation","loadRegionsInCustomQuoteForm","bindPhoneNumberValidation","bindDeleteCustomQuote","bindPostCodeValidation","bindDiameterValidation","bindPriceValiadtion","bindQuantityValidation","bindProductFormValidation","bindEditCustomQuoteProduct","bindReset","bindThankClose","resetAddproductQuoteModel","bindChangeDimension"],bindQuantityValidation:function(){$(".qty-valid").on("input",function(e){var qty=$(this).val();e.target.value=e.target.value.replace(/[^0-9]/g,"");if(qty=="0"||qty=="00"||qty=="000"||qty=="0000"||qty==""){$("#quoteQty").val("1")}})},resetAddproductQuoteModel:function(){$(document).on("click","#addproduct",function(){$("form[name='customQuoteProductForm']")[0].reset();$("#customQuoteSpanShape").text("Shape *");$("#shape").val("");$("#customQuoteSpanUnits").text("Units *");$("#units").val("");$("#customErrorMessage").addClass("hide");$("#dimension1").text("Dimension 1");$("#dimension2").text("Dimension 2");$("#addproductModal").modal("show")})},bindDiameterValidation:function(){$(".dia-valid").on("input",function(e){e.target.value=e.target.value.replace(/[^0-9.,]/g,"")})},bindPriceValiadtion:function(){$(".price-valid").on("input",function(e){e.target.value=e.target.value.replace(/[^0-9$,]/g,"")})},bindReset:function(){$(document).on("click","#reset",function(){location.reload()})},bindThankClose:function(){$(document).on("click","#thank_close",function(){location.reload()})},bindCustomQuoteProduct:function(){$(document).on("click","#customQuoteSubmit",function(){$(".contact-us .product-error").addClass("hide");var url=$("#customQuoteProductForm").attr("action");if($("form[name='customQuoteProductForm']").valid()&&$("#shape").val()!=""&&$("#units").val()!=""){var map1=new Object();map1[$("#dimension1").text()]=$("#dim1").val();$("#dim1").attr("name",'dimension1['+$("#dimension1").text()+']');var map2=new Object();map2[$("#dimension2").text()]=$("#dim2").val();$("#dim2").attr("name",'dimension2['+$("#dimension2").text()+']');$.ajax({url:url,async:!1,type:"POST",data:$("#customQuoteProductForm").serialize(),success:function(data){$("#addproductModal").modal("hide");$("#productDetail").html(data)}})}else{$("#customErrorMessage").removeClass("hide");$("label.error").addClass("hide");$("#addproductModal").animate({scrollTop:0},"slow")}})},bindEditCustomQuoteProduct:function(){$(document).on("click","#editCustomQuoteSubmit",function(){$("#editCustomErrorMessage").removeClass("hide");var url=$("#customQuoteProductForm1").attr("action");if($("form[name='customQuoteProductForm']").valid()&&$("#editShape").val()!=""&&$("#editUnits").val()!=""){var map1=new Object();map1[$(".dimension1").text()]=$("#dim11").val();$("#dim11").attr("name",'dimension1['+$(".dimension1").text()+']');var map2=new Object();map2[$(".dimension2").text()]=$("#dim22").val();$("#dim22").attr("name",'dimension2['+$(".dimension2").text()+']');$.ajax({url:url,async:!1,type:"POST",data:$("#customQuoteProductForm1").serialize(),success:function(data){$("#editproductModal").modal("hide");$("#productDetail").html(data)},error:function(){$("#editCustomErrorMessage").removeClass("hide");$("#editproductModal").animate({scrollTop:0},"slow")}})}else{$("#editCustomErrorMessage").removeClass("hide");$("#editproductModal").animate({scrollTop:0},"slow")}})},bindEditCustomQuote:function(){$(document).on("click","#editQuote",function(){var url=$(this).data("url");$.ajax({url:url,async:!1,type:"GET",success:function(data){var modaldata=$("#editproductModal").html(data);$(modaldata).modal();ACC.customquote.bindProductFormValidation()}})})},bindDeleteCustomQuote:function(){$(document).on("click","#deleteQuote",function(){var url=$(this).data("url");$.ajax({url:url,async:!1,type:"GET",success:function(data){$("#productDetail").html(data)}})})},bindCustomQuote:function(){$(document).on("click","#btn-submit__quote",function(){$(".contact-us .notification-error").addClass("hide");$(".contact-us .product-error").addClass("hide");if(!$("form[name='customQuoteForm']").valid()){if($(".customQuote-form .input-validation").hasClass("error")||$(".customQuote-form .input-validation").val()==""){$("html,body").animate({scrollTop:150},700);$(".contact-us .notification-error").removeClass("hide")}
return}
if(!$(".product-details__data").length){$("html,body").animate({scrollTop:150},700);$(".contact-us .product-error").removeClass("hide");return}
$.ajax({url:"/customquote",async:!1,type:"POST",data:$("#customQuote-form").serialize(),success:function(response){$("#quoteNumber").text(response);$("#contactusModal").modal()}})})},bindCustomSignIn:function(){$(document).on("click","#customSignIn",function(){$("#quotetext").css("display","initial");$(".asterikId").css("display","inline-block");$("#requiredTextField").css("display","block");$(".tooltip-quote").css("display","inline-block");$("#quoteSignButton").removeClass("hide");$("#signinModal").modal()})},bindFormValidation:function(){$("form[name='customQuoteForm']").validate({onkeyup:!1,rules:{inputFirstName:{required:!0},emailId:{required:!0,email:!0},inputLastName:{required:!0},phone:{rangelength:[10,15]},ext:{maxlength:10},postcode:{required:!0,maxlength:15},fax:{rangelength:[10,15]}},messages:{emailId:{required:"",email:ACC.emailValidationError},inputFirstName:{required:""},inputLastName:{required:""},phone:{rangelength:ACC.invalidPhoneNumber},postcode:{required:"",maxlength:ACC.invalidZipCode},ext:{maxlength:ACC.invalidExt},fax:{rangelength:ACC.invalidPhoneNumber}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},loadRegionsInCustomQuoteForm:function(){$(document).on("click","#js_country li",function(){var countryIso=$(this).attr("value");if(countryIso=='US'||countryIso=='CA'||countryIso=='USA'||countryIso=='CAN'){$("#customStateCode").attr("style","display:block")}else{$("#customStateCode").attr("style","display:none")}
$.ajax({url:ACC.config.encodedContextPath+"/contact-us/showRegions",async:!1,type:"GET",data:{countryIso:countryIso},contentType:"application/json",success:function(response){if(response.length==0){$("#js_region").val("").trigger("change");$("#js_region").attr("disabled","disabled");$("#js_region").empty();$("#regionIso").val("");$(".regionClass").text("State/Province")}else{var placeholder="State/Province";$("#js_region").removeAttr("disabled");$("#js_region").empty();$("#js_region").append($("<li></li>").text(placeholder));$.each(response,function(key,value){$("#js_region").append($("<li></li>").attr("value",value.isocode).text(value.name));$(".regionClass").text(placeholder);$("#regionIso").val("");$("#js_region li").first().addClass("selected")})}}})})},bindPhoneNumberValidation:function(){$(".numbervalid").on("input",function(e){e.target.value=e.target.value.replace(/[^0-9+-]/g,"")})},bindPostCodeValidation:function(){$(".faxvalid").on("input",function(e){e.target.value=e.target.value.replace(/[^a-z|A-Z|0-9|-]/g,"")})},bindProductFormValidation:function(){$("form[name='customQuoteProductForm']").validate({onkeyup:!1,rules:{material:{required:!0},shape:{required:!0},otherDimensions:{required:!0},quantity:{required:!0},units:{required:!0},},messages:{material:{required:""},shape:{required:""},otherDimensions:{required:""},quantity:{required:""},units:{required:""}}})},bindChangeDimension:function(){$(document).on("click","#js-shape-selector ul li",function(){var myShape=$(this).attr("value");var url="/customquote/getdimensions/"+myShape;$.ajax({type:"POST",url:url,success:function(data){if(data.length){for(var i=0;i<6;i++){var a=i+1;if(i<data.length){$("#dimension"+a).text(data[i]);$("#dim"+a).attr("placeholder","Enter "+data[i]);$("#js-diameter"+a).show();$("#dim11").val("");$("#dim22").val("")}else{$("#js-diameter"+a).hide()}}}}})})}};

ACC.ratingstars={_autoload:[["bindRatingStars",$(".js-ratingCalc").length>0],["bindRatingStarsSet",$(".js-ratingCalcSet").length>0]],bindRatingStars:function(){$(".js-ratingCalc").each(function(){var rating=$(this).data("rating");$(this).find(".js-greenStars").width($(this).width()*(parseFloat(rating.rating,10)/rating.total))})},bindRatingStarsSet:function(){$('.js-writeReviewStars').on({mouseleave:function mouseleave(){clearReviewState();var sV=(parseFloat($(".js-ratingSetInput").val(),10))*2;(typeof sV==="number"&&!isNaN(sV))?setReviewState(sV):clearReviewState()}});var ratingIcons=$('.js-writeReviewStars .js-ratingIcon');var setReviewState=function(index){ratingIcons.slice(0,parseFloat(index,10)).addClass('active')};var clearReviewState=function(){ratingIcons.removeClass('active')};ratingIcons.on({mouseenter:function mouseenter(){clearReviewState();setReviewState($(this).index()+1)},mouseleave:function mouseleave(){$(this).removeClass('active')},click:function click(){$(".js-ratingSetInput").val(($(this).index()+1)/2)}})}};

ACC.tabs={_autoload:["hideReviewBtn","determineToDisplayReviews","urlHashReview","bindAccordianReviews"],showReviewsAction:function(s){$.get($("#productReviews").data(s),function(result){$('#productReviews').html(result);if($(".js-ratingCalc").length>0){ACC.ratingstars.bindRatingStars();ACC.tabs.showingAllReviews()}})},hideReviewBtn:function(btnClass){btnClass=(btnClass==undefined)?".less-reviews-btn":btnClass;$(btnClass).hide()},showReviewBtn:function(btnClass){$(btnClass).show()},showingAllReviews:function(){var isShowingAllReviews=$("#showingAllReviews").data("showingallreviews");if(isShowingAllReviews){ACC.tabs.hideReviewBtn(".all-reviews-btn");ACC.tabs.showReviewBtn(".less-reviews-btn")}},urlHashReview:function(){var hashVal=window.location.hash.substr(1);if(hashVal=="reviews"){ACC.tabs.showAllReviews();}},determineToDisplayReviews:function(){$("#tab-reviews").on("click",function(){ACC.tabs.showAllReviews();});$(window).on('hashchange',function(){ACC.tabs.urlHashReview();});},bindAccordianReviews:function(){$(document).on("click","#reviews .panel-group",function(){ACC.tabs.showReviewsAction('allreviews');})},showAllReviews:function(){var mytab=$("#tab-reviews").attr("rel");$(".specifications__list li").removeClass("active");$(".tab-content .available-tab").removeClass("checked");$(".tab-content .available-tab .panel-collapse").removeClass("in");$(".tab-content .available-tab .panel-heading a").addClass("collapsed");$(".tab-content .available-tab[rel = "+mytab+"]").addClass("checked");$(".tab-content .available-tab[rel = "+mytab+"] .panel-collapse").addClass("in").css("height","auto");$(".tab-content .available-tab[rel = "+mytab+"] .panel-heading a").removeClass("collapsed");$("#tab-reviews").addClass("active");if($(".specifications").is(':visible')){var specificationsReview=$(".specifications").offset().top
$('html, body').animate({scrollTop:specificationsReview},0)}
ACC.tabs.showReviewsAction('allreviews');$('.review-rating').addClass('hide')}};

ACC.projectlistandfavorite={_autoload:["bindAvailabeSizesOnFavPage","bindFavSizeSelector","bindFavProductQty","bindDeleteFavProduct","deleteFavoriteProduct","bindDiscontinueProductNotification","tabsSelectionClick","bindFavAndWishListAddToCart","bindFavAndWishListCustomCutModal","editWishlistModal","submitEditWishlist","bindEnableButton","bindShowMultipleDelete","bindDeleteMultipleWishlist","bindGetWishlist","bindCreateAndProjectList","bindEnableCreateListButton","bindEditAndCreateButton","bindFavSearch","bindShowMultipleShareList","bindFavFormValidation"],bindAvailabeSizesOnFavPage:function(){$(document).on("click",".js-fav-sizeselector",function(){var title="material";var material=$(this).attr("data-material");var alloy=$(this).attr("data-alloy");var shape=$(this).attr("data-shape");var type=$(this).data("type");var productCode=$(this).attr("data-productcode");var variantProd=$(this).attr("data-selectedvariant");var q;var length=$("#js-pdp-sizeselector_"+type+variantProd).find(".selected").data("lengthvalue");var qty=$("#js-pdp-qty_"+type+variantProd).val();if(length==undefined){q="::material:"+material+":shape:"+shape+":alloy:"+alloy;var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+title+"?&productCode="+productCode+"&q="+q}else{q="::material:"+material+":shape:"+shape+":alloy:"+alloy+":cutValues:"+length;var url=ACC.config.encodedContextPath+"/buy/sizeSelector/"+title+"?lengthCode="+length+"&productCode="+productCode+"&q="+q}
$.get(url,function(data){var modaldata=$(".js_size_selector").html(data);var indexvaluemy=$("#sendingindexvalue").val();var classNames=$(".addingcolumnselector").attr("class").toString().split(" ");$(".addingcolumnselector").removeClass(classNames[classNames.length-1]);$(".addingcolumnselector").addClass("size-selector"+(6-indexvaluemy));$(modaldata).modal();$(".size-selector__table__data-list").mCustomScrollbar({});if($(window).width()<768){$(".dynamicappendedhere").show()}else{$(".dynamicappendedhere").hide()}
$("#qty"+productCode).val(qty)})});$(".acc-myfav__detail .list-dropdown li.selected").each(function(){var selectedVal=$(this).html();$(this).closest(".custom-select").find(".btn-select-value").html(selectedVal);});},bindFavSizeSelector:function(){$(document).on("click",'[id^=js-pdp-sizeselector_] li',function(){var productIsDeals=($(this).attr("data-variant-deal")&&$(this).attr("data-variant-deal")=="true")?true:false;var firstVariant=$(this).attr("data-first-variant");var type=$(this).parent().data("type");var pCode=type+firstVariant;var price=$(this).data("value");var currencySymbol=$(this).parent().data("current-currency-symbol");var productPrice=currencySymbol+(Math.round(price*100)/100).toFixed(2);$("#selectedVariantPdpPriceValue"+pCode).html("<h3 class='bold'>"+productPrice+" "+ACC.priceEA+"</h3>");$("#selectedVariantPdpPriceValue"+pCode).attr("data-product-price",price);$("#js-pdp-subtotal"+pCode).text(productPrice+" "+ACC.forText+" "+"1");$("#js-pdp-qty_"+pCode).val("1");var variantCode=$(this).attr("data-variantcode");$("#productCode"+pCode).val(variantCode);var getProPart=$(this).parentsUntil('.get-product-data').find('.get-product-title-part').html();var productCode=getProPart.split(":")[1].trim();$("#productBaseCode"+productCode).val(variantCode);var lengthvalue=$(this).attr("data-lengthvalue");$("#selectedProd"+pCode).val(lengthvalue);$(".selectedLengthvalue"+pCode).attr("length-code",lengthvalue);if(productIsDeals){$(this).closest(".get-product-data").find(".similar-product__item_option").find(".item-price").addClass("text-orange");}else{$(this).closest(".get-product-data").find(".similar-product__item_option").find(".item-price").removeClass("text-orange");$(this).closest(".get-product-data").find(".similar-product__item_option").find(".get-product-price-for").removeClass("text-orange");}})},bindFavProductQty:function(){$(document).on("blur",'.js-pdp-qty',function(){var firstVariant=$(this).data("first-variant");var type=$(this).data("type");var pCode=type+firstVariant;var qty=$(this).val();if(qty=="0"||qty=="00"||qty=="000"||qty=="0000"||qty==""){$("#js-pdp-qty_"+pCode).val("1");$(this).val("1")}else{$("#qty_"+pCode).val(qty);}
var currencySymbol=$("#selectedVariantPdpPriceValue"+pCode).data("current-currency-symbol");var productBasePrice=$("#selectedVariantPdpPriceValue"+pCode).attr("data-product-price");var subtotal=productBasePrice*$(this).val();var roundSubTotal=(Math.round(subtotal*100)/100).toFixed(2);$("#js-pdp-subtotal"+pCode).text(currencySymbol+roundSubTotal+" "+ACC.forText+" "+$(this).val());});$(document).on("keyup",".js-pdp-qty",function(e){if(e.keyCode===13){$(this).blur()}});},bindDeleteFavProduct:function(){$(document).on("click",'[id^=js-removefavpro_]',function(){var id=this.id.split('_').pop();var type=$(this).data("type");$('#js-deletefavpro-btn').data("id",id);$('#js-deletefavpro-btn').data("type",type);if(type=='fav'){$('#proj-delete').addClass('hide');$('#fav-delete').removeClass('hide')}else{$('#fav-delete').addClass('hide');$('#proj-delete').removeClass('hide')}})},deleteFavoriteProduct:function(){$(document).on("click",'#js-deletefavpro-btn',function(){var id=$(this).data("id");var type=$(this).data("type");var listName=$('#projectlistName').text();if(type=='fav'){var url=ACC.config.encodedContextPath+'/my-account/remove-faventry?id='+id+'&listName='+""+"&CSRFToken="+ACC.config.CSRFToken;$.post(url,function(data){window.location=window.location})}else{$.ajax({url:ACC.config.encodedContextPath+'/my-account/remove-projectlistentry',data:{id:id,listName:encodeURIComponent(listName),CSRFToken:ACC.config.CSRFToken},type:"POST",success:function(data){$("#projectListReplace").html(data);window.location.reload();}})}})},bindDiscontinueProductNotification:function(){$('.js-discontinue').on("click",function(e){$('#discontinueProductNotification').modal('show');$('.notification-error__inner').trigger('click');e.preventDefault()});$('[id^=js-discontinue_]').mouseover(function(e){$('[id^=js-discontinue_]').children('option').hide()})},tabsSelectionClick:function(){$(document).on("click",'.nav-tabs li',function(){$('.init-fav').addClass('hide');$('.init-mylist').addClass('hide');if($('.nav-tabs .first-tab').hasClass('active')){$('.fav').addClass('hide');$('.mylist').removeClass('hide');$('#js-is-fav').val(!1);$('#js-fav-wishlist-search-btn').attr('data-type','wishlist')}else{$('.mylist').addClass('hide');$('.fav').removeClass('hide');$('#js-is-fav').val(!0);$('#js-fav-wishlist-search-btn').attr('data-type','fav')}})},bindFavAndWishListAddToCart:function(){$(document).on("click",".favAndWishListAddToCartBtn",function(e){var addToCartButton=$(this);addToCartButton.addClass("disabled").prop("disabled",true);var baseProductCode=$(this).data("product-code");var customCutModal=$(this).data("customcutmodal");var type=$(this).data("type");if(customCutModal=="customcutmodal"){ACC.tkaddtocart.ajaxCustomCutAddToCart(baseProductCode,customCutModal,addToCartButton)}else{ACC.projectlistandfavorite.ajaxFavAndWishlistAddToCart(baseProductCode,type,addToCartButton);}})},ajaxFavAndWishlistAddToCart:function(baseProductCode,type,addToCartButton){var addToCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("add-cart");var itemInCartButtonText=addToCartButton.find(".js-addToCartButton-text").data("item-cart");let eventSource=document.body.getAttribute("pageType")||document.body.className||"Unknown";let data;$('#navigateToQuoteModal').on('hidden.bs.modal',function(){$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);});$('#js-btn-keep-quoted-pricing').on("click",function(){$('#navigateToQuoteModal').modal('hide');});$('#js-btn-remove-quoted-pricing').on("click",function(){ACC.tkaddtocart.ajaxResetAndUpdateCart("projectList",[baseProductCode,type,addToCartButton]);});let arrayData=$("#addToCartForm"+type+baseProductCode).serializeArray();let itemsObject={},processedData;arrayData.forEach(x=>{itemsObject[x.name]=x.value;});let productCode=baseProductCode.substring(0,baseProductCode.indexOf('_'));productCode==""?productCode=baseProductCode.substring(0,baseProductCode.indexOf('-')):"";let price=$(".selectedPriceValue"+baseProductCode).attr("data-product-price");let qty=$("#js-pdp-qty_wishlist"+baseProductCode).val();let stringifyData=$("#gaData-"+productCode).html();if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));processedData['item_variant']=itemsObject.productCodePost;processedData['quantity']=itemsObject.qty;price?processedData['price']=price:'';}
data=$("#addToCartForm"+type+baseProductCode).serialize();data+="&eventSource="+encodeURIComponent(eventSource);$.ajax({url:$("#addToCartForm"+type+baseProductCode).attr("action"),type:"POST",data:data,success:function(data){if(data=="accepted"){$('#navigateToQuoteModal').modal('show');}else{var $thisClosest=addToCartButton.closest('.get-product-data');ACC.tkaddtocart.addToCartMiniCartPopup($thisClosest);processedData?ACC.ga4.addToCart(processedData):'';$("#minicartComp").html(data);$thisClosest.find('.get-product-qty .form-control').val(1);$thisClosest.find('.get-product-qty .form-control').trigger("blur")
addToCartButton.find(".js-addToCartButton-text").text(itemInCartButtonText);setTimeout(function(){addToCartButton.removeClass("disabled").prop("disabled",false);addToCartButton.find(".js-addToCartButton-text").text(addToCartButtonText);},2000);$('#js-btn-remove-quoted-pricing').off('click');$('#js-btn-keep-quoted-pricing').off('click');}},error:function(data){addToCartButton.removeClass("disabled").prop("disabled",false);}})},bindFavAndWishListCustomCutModal:function(){$(document).on("click",".js_fav_wishlist_customCut",function(e){var $this=$(this);var url=ACC.config.encodedContextPath+"/buy/plp/customCut";var dimensionString=$(this).data("dimensionstring");var variantItemType=$(this).data("variantitemtype");var baseProductName=$(this).data("baseproductname");var baseProductCode=$(this).data("baseproductcode");var selectedPrduct=$(this).data("variantprod");var type=$(this).data("type");var lengthvalue=document.getElementById("selectedProd"+type+selectedPrduct).value;var variantCode=$(".productCodePost"+selectedPrduct).val();var variantPrice=(Math.round($(".selectedPriceValue"+selectedPrduct).attr('data-product-price')*100)/100).toFixed(2);var postData={dimensionDataString:dimensionString,productName:baseProductName,baseProductCode:baseProductCode,variantType:variantItemType,variantCode:variantCode,variantPrice:variantPrice,cutValue:lengthvalue,CSRFToken:ACC.config.CSRFToken};$.post(url,postData).done(function(result,data,status){$(".js_custom_cut_modal").html(result);$(".js_custom_cut_modal").modal("show");var $thisImgSrc=$this.closest('.get-product-data').find('.get-product-img .img-responsive').attr('src');$('.js_custom_cut_modal .get-product-img .img-responsive').attr('src',$thisImgSrc);ACC.plpproduct.bindCustomCutPriceCal();ACC.plpproduct.bindCustomCutLengthCal();ACC.plpproduct.bindCustomCutFav();ACC.plpproduct.bindCreateProjectList();ACC.plpproduct.bindSignInRequiredError()})})},editWishlistModal:function(){$('#js-editWishlistModal a').on("click",function(e){$('#editOldWishlistName').text($(this).data('wishlistname'))})},submitEditWishlist:function(){$('#js-submitEditWishlist').on("click",function(e){var newName=$('#editNewWishlistName').val();var oldName=$('#editOldWishlistName').text();$.ajax({url:ACC.config.encodedContextPath+'/my-account/rename-wishlist',data:{currentlistname:encodeURIComponent(oldName),newlistname:encodeURIComponent(newName),CSRFToken:ACC.config.CSRFToken},type:"POST",success:function(data){if(data=="PROJECTLISTADDED"){location.reload()}
if(data=="PROJECTLISTEXISTS"){$(".proj-listMsg").text('List name already exists')}else{$(".proj-listMsg").empty()}}})})},bindEnableButton:function(){$(document).on('keyup',"#editNewWishlistName",function(e){var inputVal=$("#editNewWishlistName").val().length;if(inputVal==0||inputVal==""){$("#js-submitEditWishlist").attr('disabled','disabled')}else{$("#js-submitEditWishlist").removeAttr('disabled')}})},bindShowMultipleDelete:function(){$(document).on('click','#delete-Wishlist',function(event){var val=[];var index=0;$('.creatlistcheckbox:checked').each(function(i){val[i]=$(this).val()});if(val.length==0){$('#saveShareUnauthentic').modal('show');$('#deleteWishlist').modal('hide');$('#nameListError').text(ACC.deleteList)}else if(val.length==1){$('#deleteMoreList').text(ACC.deleteSingleList);$('#deleteListNames').text(val)}else if(val.length>1){var proLists=val.toString();$('#deleteMoreList').text(ACC.deleteMultipleList);$('#deleteListNames').text(proLists.replace(/,/g,", "))}})},bindDeleteMultipleWishlist:function(){$(document).on('click','#deleteWishlistNames',function(event){var listNames=$('#deleteListNames').text();if(listNames!="no list is selected"){$.ajax({url:ACC.config.encodedContextPath+'/my-account/delete-wishlist',data:{wishlistnames:encodeURIComponent(listNames),CSRFToken:ACC.config.CSRFToken},type:"POST",success:function(data){location.reload()}})}})},bindGetWishlist:function(){$(document).on('click','#js-getProjectList a',function(event){event.preventDefault();var wishlistName=$(this).text().trim();$('#js-list-name').attr("value",wishlistName);$.ajax({url:ACC.config.encodedContextPath+'/my-account/projectlist-details',data:{wishlistname:encodeURIComponent(wishlistName)},type:"GET",success:function(data){$("#projectListReplace").html(data);ACC.global.customSelectDropdown();ACC.global.viewProjectList();ACC.projectlistandfavorite.bindAvailabeSizesOnFavPage();ACC.projectlistandfavorite.bindFavSizeSelector();ACC.ga4.plpSelectItem();}})})},bindCreateAndProjectList:function(){$(document).on("click","#js-createProjectList",function(){var projListName=$("#createProjList").val();$.ajax({url:ACC.config.encodedContextPath+'/tkwish-list/create-project-list',data:{projectlistname:encodeURIComponent(projListName),CSRFToken:ACC.config.CSRFToken},type:"POST",success:function(response){if(response=="projectListCreated"){window.location.reload()}
if(response=="projectListExists"){$(".createProjlistMsg").text(ACC.createListMsg)}}})})},bindEnableCreateListButton:function(){$(document).on('keyup',"#createProjList",function(e){var inputVal=$("#createProjList").val().length;if(inputVal==0||inputVal==""){$("#js-createProjectList").attr('disabled','disabled')}else{$("#js-createProjectList").removeAttr('disabled')}})},bindEditAndCreateButton:function(){$("#editlist,#createProjectlist").on("hidden.bs.modal",function(){$(this).find("input,textarea,select").val("").end().find("input[type=checkbox]").prop("checked","").end();$("button#js-createProjectList").attr('disabled','disabled');$("button#js-submitEditWishlist").attr('disabled','disabled');$('.createProjlistMsg').text('')})},bindFavSearch:function(){$(document).on("focusout",".js-fav-wishlist-search",function(e){ACC.projectlistandfavorite.bindFavSearchAction()});$(document).on("click","#js-fav-wishlist-search-btn",function(e){ACC.projectlistandfavorite.bindFavSearchAction()})},bindFavSearchAction:function(){var searchText=$("#js-fav-wishlist").val().trim();if(searchText!=""){$('#fav-wishlist-searchform').submit()}},bindShowMultipleShareList:function(){$(document).on('click','#share-wishlist',function(event){var val=[];var index=0;$('.creatlistcheckbox:checked').each(function(i){val[i]=$(this).val()});if(val.length==0){$('#saveShareUnauthentic').modal('show');$('#shareprojectlist').modal('hide');$('#nameListError').text('Share List')}else if(val.length==1){$('#shareMoreList').text("Share this list via email");$('#shareListNames').text(val)}else if(val.length>1){$('#shareMoreList').text("Share these lists via email");$('#shareListNames').text(val)}})},bindFavFormValidation:function(){$("#fav-wishlist-searchform").validate({onkeyup:!1,rules:{productName:{required:!0}},messages:{productName:{required:"",}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})}};

ACC.mtrreport={_autoload:["loadCategoryResult","saveMTRRequestFlag"],saveMTRRequestFlag:function(){$(document).on("click",".milltestreport",function(e){var fullId=$(this).attr("id");var id=fullId.split(/[_ ]+/).pop();var entryNumber=id.split("checkbox").pop();ACC.mtrreport.sendMTRRequesteddata(entryNumber)})},loadCategoryResult:function(){$(".parentMaterial").click(function(e){e.preventDefault();var CategoryCode=$(this).attr("id");$.ajax({url:ACC.config.encodedContextPath+"/category/content/alloyCategories",type:"GET",data:{categoryCode:CategoryCode},contentType:"application/json",success:function(response){if(response.length==0){$("."+CategoryCode).append($('<li>').append("Oops something went wrong, no valid data found"))}else{$("."+CategoryCode).html('')
$.each(response,function(key,value){var name=value.name;var url=value.url;$("."+CategoryCode).append($('<li>').append($('<a>').attr('href',url+"?q=%3Arelevance%3AMtrAvailability%3Atrue&checkbox=on").text(name)))})}}})})},sendMTRRequesteddata:function(entryNumber){$.ajax({type:"GET",dataType:"json",url:ACC.config.encodedContextPath+"/cart/save-mtr-requested?entryNumber="+entryNumber,cache:!0,success:function(response){},error:function(x,error,errorData){}})}};

ACC.checkout={_autoload:["removeUIBlocker","emptyCart",["bindApplyVoucher",$("#js-voucher-apply-btn").length!=0],["bindToReleaseVoucher",$("#js-applied-vouchers").length!=0],"bindJsShippingEmailCoupon","bindJsBillingEmailCoupon","bindCancelModal","bindJobTitleModal","bindJobTitleValidation","bindDeliveryMethod","bindSignInModalForUnauthenticated","bindJsCustomerChoice","bindVoucherCodeText","checkForDeliveryMode","scrollCheckoutActiveDiv","reviewOrder","bindPlaceOrderMethod","selectReshipCategory","selectReshipSubCategory","selectReshipCheckoutButton","selectMtrCheckoutButton","selectWarehouseButtom","checkRate","disableShipping","enableShipping","disableRate","selectShipping","checkShippingSelected","bindApplyVoucherCta","bindVoucherRemove","bindToggleData","bindResetToggleData","saveQuoteFromCart","quoteFormValidation","POnumberValidate","selectReshipWarehouse","enterReshipHybrisOrder","enterReshipEniteoOrder","RemoveSearchBoxOutline"],removeUIBlocker:function(){$(document).ready(function(){if($('.blockUI').length){$('.blockUI').remove();}
$('#clickShipAddress a').removeAttr('style');$('#clickBillAddress a').removeAttr('style')})},emptyCart:function(){$(document).on("click","#js-btn-remove-cart-items",function(){var emptyCartForm=$("<form></form>",{action:ACC.config.encodedContextPath+"/cart/remove-all-items",method:"POST"});emptyCartForm.append($("<input>",{type:"hidden",name:"CSRFToken",value:ACC.config.CSRFToken}));let stringifyData,processedData;stringifyData=$("#gaData-CartData").html();if(stringifyData){processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));}
processedData?ACC.ga4.removeAllFromCart(processedData):'';$(document.body).append(emptyCartForm);emptyCartForm.submit()})},bindJsShippingEmailCoupon:function(){$(document).on("click","#js_shipping_emailCoupon",function(){if($(this).prop("checked")==!0){$("#js_shipping_emailCoupon_value").attr("value","true")}else if($(this).prop("checked")==!1){$("#js_shipping_emailCoupon_value").attr("value","false")}})},bindJsBillingEmailCoupon:function(){$("#js_billing_emailCoupon").click(function(){if($(this).prop("checked")==!0){$("#js_billing_emailCoupon_value").attr("value","true")}else if($(this).prop("checked")==!1){$("#js_billing_emailCoupon_value").attr("value","false")}})},bindCancelModal:function(e){$(document).on("click","#js_cancel_modal",function(e){location.reload()})},bindJobTitleModal:function(){$(document).on("click",".js_checkout_customjob-title",function(){var span=$(this).data("span");var id=$(this).data("currentid");$("#js-JobTitleValidation").attr("data-jobtilespan",span);$("#js-JobTitleValidation").attr("data-currentid",id)})},quoteFormValidation:function(){if($('.quote-check-email').val()!=''&&$('.zip-postal-code').val()!=''&&$('#js-lastname').val()!=''&&$('#js-firstname').val()!=''){$('#js-save-quote').prop("disabled",false);}
$(document).on("blur keyup",'.quote-check-email',function(e){var requestedEmail=$(this).val();var filter=/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;if(filter.test(requestedEmail)){$('.js-email-exist-error').html("");if($(".zip-postal-code").val()!=''&&$("#js-firstname").val()!=''&&$("#js-lastname").val()!=''&&$(".zip-postal-code").val()!=''){$('#js-save-quote').prop("disabled",false);}else{$('#js-save-quote').prop("disabled",true);}}else{$('#js-save-quote').prop("disabled",true);$('.js-email-exist-error').html("<label  class='error'>"+ACC.quoteEmailAddress+"</label>");}})
$(document).on("blur keyup",'.zip-postal-code',function(e){e.preventDefault();var zipPostaCode=$(this).val();if(zipPostaCode!=''){$('.js-zip-exist-error').html("");if($(".quote-check-email").val()!=''&&$("#js-firstname").val()!=''&&$("#js-lastname").val()!=''){$('#js-save-quote').prop("disabled",false);}else{$('#js-save-quote').prop("disabled",true);}}else{$('#js-save-quote').prop("disabled",true);$('.js-zip-exist-error').html("<label  class='error'>"+ACC.quoteZipCode+"</label>");}});$(document).on("blur keyup",'#js-lastname',function(e){e.preventDefault();var lastname=$(this).val();if(lastname!=''){$('.js-lastname-exist-error').html("");if($("#js-firstname").val()!=''&&$(".quote-check-email").val()!=''&&$(".zip-postal-code").val()!=''){$('#js-save-quote').prop("disabled",false);}else{$('#js-save-quote').prop("disabled",true);}}else{$('#js-save-quote').prop("disabled",true);$('.js-lastname-exist-error').html("<label  class='error'> "+ACC.quoteLastName+"</label>");}});$(document).on("blur keyup",'#js-firstname',function(e){e.preventDefault();var firstname=$(this).val();if(firstname!=''){$('.js-firstname-exist-error').html("");if($("#js-lastname").val()!=''&&$(".quote-check-email").val()!=''&&$(".zip-postal-code").val()!=''){$('#js-save-quote').prop("disabled",false);}else{$('#js-save-quote').prop("disabled",true);}}else{$('#js-save-quote').prop("disabled",true);$('.js-firstname-exist-error').html("<label  class='error'>"+ACC.quotefirstName+"</label>");}});},bindJobTitleValidation:function(){$(document).on("click","#js-JobTitleValidation",function(e){var id="#"+$(this).data("currentid");var span="."+$(this).data("jobtilespan");var jobTitleVal=$(span).html();var jobTitle=$("#jobTitleAdd").val().trim();if(jobTitle!=""){if(jobTitle.toLowerCase()===jobTitleVal.toLowerCase()){$("#js-jobtitle-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}else{var Url=ACC.config.encodedContextPath+"/checkout/multi/delivery-address/check-jobtitle/"+jobTitle;$.ajax({url:Url,data:{},type:"GET",success:function(response){if(response==="OK"){$(id).val(jobTitle);$(span).html(jobTitle);$("#jobTitleModal").modal("hide")}else{$("#js-jobtitle-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}},error:function(e){$("#js-jobtitle-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}})}}})},bindDeliveryMethod:function(){$(document).on('click','#js-continue',function(e){var enablednewRateInput='';var disabledRateInput='';var newShippingOption=$('.choose-shipping__option-selecte select');var fob=$('.choose-shipping__option-fob select');var enablednewRateInput=$('.choose-shipping__option-input input:not(.disabled)').val();var disabledRateInput=$('.choose-shipping__option-input input.disabled').val();var newRate=$('.choose-shipping__option-input input');var newRateVal=newRate.val();var brokerName=$('.js-broker-name').val();var brokerPhoneEmail=$('.js-broker-phone-email').val();var filter=/[1-9]{1}[0-9]{9}/;if($('#chooseShippingRadio').is(':checked')){if(newShippingOption.val()===""){newShippingOption.next('p').removeClass('hide');e.preventDefault();}else if(fob.val()===""){newShippingOption.next('p').addClass('hide');fob.next('p').removeClass('hide');e.preventDefault();}else{fob.next('p').addClass('hide');if((enablednewRateInput!='')||(disabledRateInput=0&&enablednewRateInput===undefined)){$('#deliveryMethodForm').attr('action');$('#deliveryMethodForm').submit();newRate.next('p').addClass('hide');}else{newRate.next('p').removeClass('hide');e.preventDefault();}}}else if(brokerName===''){$('.js-broker-name').next('p').removeClass('hide');e.preventDefault();}else if(brokerPhoneEmail&&(brokerPhoneEmail!==''&&(brokerPhoneEmail.indexOf('@')==-1&&!filter.test(brokerPhoneEmail)))){$('.js-broker-phone-email').next('p').removeClass('hide');e.preventDefault();}
else{$('.js-broker-name').next('p').addClass('hide');$('#deliveryMethodForm').attr('action');$('#deliveryMethodForm').submit();}});$('#chooseShippingRadio').on('change',function(){if($(this).is(':checked')){$('.broker-info-section').hide();}else{$('.broker-info-section').show();}})
$('[id^=shippingOptions]').on('change',function(){if($(this).is(':checked')){$('.js-broker-name').next('p').addClass('hide');$('.broker-info-section').show();}})
$(document).on('input','.js-broker-name',function(){if($(this).val()!=''){$(this).next('p').addClass('hide');}else{$(this).next('p').removeClass('hide');}});$(document).on('input','.js-broker-phone-email',function(){$(this).next('p').addClass('hide');});},checkRate:function(){$('.choose-shipping__option-input input').keypress(function(event){var newRateInput=$('.choose-shipping__option-input input');var $this=$(this);if((event.which!=46||$this.val().indexOf('.')!=-1)&&((event.which<48||event.which>57)&&(event.which!=0&&event.which!=8))){event.preventDefault();}
var text=$(this).val();if((event.which==46)&&(text.indexOf('.')==-1)){setTimeout(function(){if($this.val().substring($this.val().indexOf('.')).length>3){$this.val($this.val().substring(0,$this.val().indexOf('.')+3));}},1);}
if((text.indexOf('.')!=-1)&&(text.substring(text.indexOf('.')).length>2)&&(event.which!=0&&event.which!=8)&&($(this)[0].selectionStart>=text.length-2)){event.preventDefault();}
newRateInput.attr('value',$(this).val());newRateInput.next('p').addClass('hide');});},disableShipping:function(){var shippingCtrl=$('.choose-shipping__option').find('input, select');shippingCtrl.prop("disabled",true);shippingCtrl.fadeTo('slow',.6);},enableShipping:function(){var shippingCtrl=$('.choose-shipping__option').find('input, select');$('input:radio[name=delivery_method]').click(function(){var checkval=$(this).attr('id');shippingCtrl.prop('disabled',!(checkval=='chooseShippingRadio'));if($('.choose-shipping .form-radio').is(':checked')){shippingCtrl.fadeTo('slow',1);}else{shippingCtrl.fadeTo('slow',.6);}
ACC.checkout.disableRate();});},disableRate:function(){var shippingCtrl=$('.choose-shipping__option').find('input, select');var rateInput=$('.choose-shipping__option-input input');var newShippingOption=$('.choose-shipping__option-selecte select');shippingCtrl.change(function(){$(this).next('p').addClass('hide');if($('.choose-shipping__option-selecte #Legs option:selected').val()=='WILL_CALL'){rateInput.val('0');rateInput.attr('value','0');rateInput.addClass('disabled').fadeTo('slow',.6);}else{rateInput.removeClass('disabled').fadeTo('slow',1);}});if(shippingCtrl.val()=='WILL_CALL'){rateInput.prop("disabled",true).fadeTo('slow',.6);}},selectShipping:function(){var shippingType=$('.choose-shipping__option-selecte select');var shippingOption=$('.choose-shipping__option-selecte select option');var shippingCtrl=$('input:radio[id=chooseShippingRadio]');shippingType.on('change',function(){var selectedOption=shippingOption.filter(':selected').val();shippingCtrl.val(selectedOption);});},checkShippingSelected:function(){$(document).ready(function(){var customModelChk=$('input[name = "isCustomDeliveryModeSelected"]');var shippingType=$('.choose-shipping__option-selecte select');if(customModelChk.val()=='true'){$('#chooseShippingRadio').prop("checked",true).trigger("click");shippingType.trigger('change');}})},bindSignInModalForUnauthenticated:function(){$(document).on("click","#js_unauthenticated_payment",function(){var error=$(this).data('errormessage');$(".js-fotgotpswd-err-msg").html(error);$(".js-fotgotpswd-err-msg").attr("class","error js-fotgotpswd-err-msg");$(".js-fotgotpswd-err-msg").attr("style","display:block");$("#resetPasswordsuccessmsg").addClass("hide");$("#forgotPasswordsuccessmsg").addClass("hide");$("#signinModal").removeClass("hide");$("#signinModal").modal("show")})},bindJsCustomerChoice:function(){$(document).on("click",".js_customer_choice",function(){var line1=$(this).data('line1');var town=$(this).data('town');var postalcode=$(this).data('postalcode');var region=$(this).data('region');var regionIso=$(this).data('regioniso');$('#js_edit_line1').attr("value",line1);$('#js_edit_city').attr("value",town);$('.js_region_form').html("<option value="+regionIso+" id=js_country_iso"+regionIso+" selected=selected>"+region+"</option>");$('#js_edit_postalCode').attr("value",postalcode);$('#js_edit_line1, #js_edit_city, #js_replace_region #state, #js_edit_postalCode, #country').removeAttr("readonly");})},bindApplyVoucher:function(){$(document).on("click","#js-voucher-apply-btn",function(e){if($("#quote-ASMUpdated-Price").val()=="true"){$("#promotionConfirmModal").modal("show");}else{ACC.checkout.handleApplyVoucher(e)}})},bindApplyVoucherCta:function(){$(document).on("click",".btn-apply-promotion",function(e){$('#promotionConfirmModal').modal('hide');ACC.checkout.handleApplyVoucher(e)})},bindVoucherCodeText:function(){$(document).on("keypress","#js-voucher-code-text",function(e){var code=(e.keyCode?e.keyCode:e.which);if(code==13){if($("#quote-ASMUpdated-Price").val()=="true"){$("#promotionConfirmModal").modal("show");}else{ACC.checkout.handleApplyVoucher(e)}}})},handleApplyVoucher:function(e){var voucherCode=$.trim($('.js-voucher-code').val().toUpperCase());var url=ACC.config.encodedContextPath+'/cart/applyVoucher';var postData={voucherCode:voucherCode,CSRFToken:ACC.config.CSRFToken};$('.js-voucher-respond').removeClass('has-success has-error');if(voucherCode!=''&&voucherCode.length>0){$.post(url,postData).done(function(result,data,status){if(result.errorMsg!=null&&result.errorMsg.length>0){$('.js-voucher-respond').addClass('has-error');$('.js-voucher-validation-container').removeClass('success').addClass('error').text(result.errorMsg).delay(5000).queue(function(n){$('.js-voucher-validation-container').empty();n();});$('.voucherErrorContainer').addClass('voucher-error');$('.voucherRemove').removeClass('hide').delay(5000).queue(function(n){$('.voucherRemove').addClass('hide');$('.voucherErrorContainer').removeClass('voucher-error');n();});}else{$('.voucherRemove').addClass('hide');$('.voucherErrorContainer').removeClass('voucher-error');location.reload();$('.js-voucher-respond').addClass('has-success');$('.js-voucher-validation-container').removeClass('error').addClass('success').text(result.successMsg);$('.js-voucher-code').val('')}
$('.js-voucher-code').focusin()})}else{$('.js-voucher-validation-container').removeClass('success').addClass('error').text($('.js-voucher-validation-container').data('empty-error')).delay(5000).queue(function(n){$('.js-voucher-validation-container').empty();n();});$('.voucherErrorContainer').addClass('voucher-error');$('.voucherRemove').removeClass('hide').delay(5000).queue(function(n){$('.voucherRemove').addClass('hide');$('.voucherErrorContainer').removeClass('voucher-error');n();});}},bindVoucherRemove:function(){$('.voucherRemove').on("click",function(){$('.js-voucher-validation-container').empty();$('.voucherRemove').addClass('hide');$('.voucherErrorContainer').removeClass('voucher-error');})},appendAppliedVoucherCodes:function(cartData){$('#js-applied-vouchers').empty();$('.js-voucher-validation-container').empty();$('.js-voucher-respond').removeClass('has-error');$('#js-applied-vouchers').html($("#applied-voucher-codes-template").tmpl(cartData));ACC.cart.bindToReleaseVoucher()},bindToReleaseVoucher:function(){$('.js-release-voucher-remove-btn').on("click",function(event){var voucherCode=$(this).parent('.js-release-voucher').data('voucher-code');var voucherReleaseUrl=ACC.config.encodedContextPath+'/cart/'+voucherCode+'/remove';$.ajax({url:voucherReleaseUrl,type:'DELETE',success:function(response){$('.js-voucher-respond').removeClass('has-success');$('.js-voucher-validation-container').empty();if(response.errorMsg!=null&&response.errorMsg.length>0){$('.js-voucher-respond').addClass('has-error');$('.js-voucher-validation-container').text(response.errorMsg)}else if(voucherCode=="RESHIP"){$('.js-voucher-respond').removeClass('has-error');$('.js-voucher-validation-container').empty();$(event.target).parent('.js-release-voucher').remove();let existingComment=$('.special-instructions').val();let newComment=existingComment.split(',');let reshipKeywords=["Category","Subcategory","Warehouse","Hybris Order Number","Eniteo Order Number"];let updated=[];newComment=newComment.forEach((x)=>{if(reshipKeywords.some(substring=>x.includes(substring))){let furtherSplit=x.split(":");let additionalData=(x.includes("Subcategory")||x.includes("Warehouse"))?[]:furtherSplit[1].trim().split(" ");additionalData.length>1?(additionalData.splice(0,1),updated.push(additionalData.toString())):""}else{updated.push(x);}});ACC.checkout.saveSpecialInstructions(updated.join(", "));}else{$('.js-voucher-respond').removeClass('has-error');$('.js-voucher-validation-container').empty();$(event.target).parent('.js-release-voucher').remove();location.reload()}}})})},saveSpecialInstructions:function(commentValue){$.ajax({url:ACC.config.encodedContextPath+'/cart/save-special-instructions',type:"GET",data:{'commentValue':commentValue},async:!1,success:function(data){location.reload()},error:function(){}})},checkForDeliveryMode:function(){$(document).on("click",".addressAccount-checkbox",function(e){var deliveryCode=$(this).attr('data-deliverycode');if(this.checked&&deliveryCode=="R_AND_L"){$('.text-warning').text(ACC.warningRL);$('.text-warning').attr('style','display:block')}else{$('.text-warning').attr('style','display:none')}})},scrollCheckoutActiveDiv:function(){var checkout=$('.js_checkout_active_div');var key="delivery-address";var url=window.location.pathname;var checkPrevState=sessionStorage.getItem("checkoutprev");if($("body").hasClass("page-orderConfirmationPage")){sessionStorage.removeItem("checkoutprev");}
$(document).on('click','.checkout-step__success_edit .btn-secondry',function(e){sessionStorage.removeItem("checkoutprev");});$('.js-shipping').on('click',function(){sessionStorage.setItem("editshipping","1");})
$('.js-selectshipAddress').on('click',function(){sessionStorage.removeItem("editshipping");});let height=$(".global-header").height();var headerSpace=($('body').width()>=768)?parseInt(-height):70;if(url.indexOf(key)!==-1){if(sessionStorage.getItem("editshipping")==1){$('html, body').animate({scrollTop:$('.js_checkout_active_div').offset().top+headerSpace},'slow')}
sessionStorage.removeItem("editshipping");}else if(checkPrevState&&checkPrevState!=""&&$('#'+checkPrevState).length){$('html, body').animate({scrollTop:$('#'+checkPrevState).offset().top+headerSpace},'slow')}
else{if(checkout.length){$('html, body').animate({scrollTop:checkout.offset().top+headerSpace},'slow')}}},reviewOrder:function(){$(document).on("blur","#checkout-ponumber",function(event){var refNum=$('.checkout-page__promotion_form #checkout-ponumber').val();$("#ponumber").val(refNum)
$("#quoteForm #ponumber").val(refNum);if($.trim(refNum)!=''){$('.net30-error').hide();}})},bindPlaceOrderMethod:function(){$(document).on('click','.js-placeorder',function(e){var POlength=$('#checkout-ponumber').val();var POregex=/[\#<>\/]/;if(POregex.test(POlength)){$('#checkout-ponumber').addClass('error');$('#checkout-ponumber').next().show().html('The following special characters # < > are not permitted');return false;}else{$('#checkout-ponumber').next().html('This field is required');$('#checkout-ponumber').next().addClass('net30-error');}
if($('.js-net30payment').attr('data-value')=='Net30'){if($.trim($('#checkout-ponumber').val())==''){$('#checkout-ponumber')[0].setSelectionRange(0,0);$('#checkout-ponumber').focus();$('.net30-error').show();}else{$('.net30-error').hide();$(".js-placeorder").html(ACC.placeOrderText);$('.js-placeorder').prop("disabled",!0);$('#placeOrder').submit();}}
else{$(".js-placeorder").html(ACC.placeOrderText);$('.js-placeorder').prop("disabled",!0);$('#placeOrder').submit();}})},selectReshipCategory:function(){$(document).on('click','.js_reship_category',function(e){var categoryCode=$(this).attr("value");$.ajax({url:ACC.config.encodedContextPath+"/cart/reship-reason",type:"GET",data:{categoryCode:categoryCode},contentType:"application/json",success:function(response){$(".js_reship_subcat_dropDown").empty();$("#js_reship_selected_subcategory_span").text(ACC.SelectReshipSubcategory);$(".js_reship_checkout_button_top").attr("data-categorycode",categoryCode);$(".js_reship_checkout_button_bottom").attr("data-categorycode",categoryCode);$.each(response,function(key,value){$(".js_reship_subcat_dropDown").append($("<li></li>").attr("value",value).attr("class","js_reship_subCategory").text(value))});$(".js_reship_subcat_div").removeAttr("style")}})})},selectReshipSubCategory:function(){$(document).on('click',".js_reship_subCategory",function(){var subCategoryCode=$(this).attr("value");var categoryCode=$("#js_reship_selected_category").val();$(".js_reship_checkout_button_top").attr("data-subcategorycode",subCategoryCode);$(".js_reship_checkout_button_bottom").attr("data-subcategorycode",subCategoryCode);$.ajax({url:ACC.config.encodedContextPath+"/cart/reship-order-reason",type:"GET",data:{reshipReasonCode:categoryCode+","+subCategoryCode},contentType:"application/json",success:function(response){}})})},selectReshipWarehouse:function(){$(document).on('click',".js_reship_warehouse",function(){let warehouseCode=$(this).attr("value");let originalOrderNumber=$("#js_reship_selected_hybris_order").val();let originalEniteoNumber=$("#js_reship_selected_eniteo_order").val();$(".js_reship_checkout_button_top").attr("data-warehouse",warehouseCode);$(".js_reship_checkout_button_bottom").attr("data-warehouse",warehouseCode);$.ajax({url:ACC.config.encodedContextPath+"/cart/reship-order-details",type:"GET",data:{reshipWarehouse:warehouseCode,originalOrderNumber:originalOrderNumber,originalEniteoNumber:originalEniteoNumber},contentType:"application/json",success:function(response){}})})},enterReshipHybrisOrder:function(){$('.numeric').on('input',function(event){this.value=this.value.replace(/[^0-9]/g,'');});$(document).on('blur',"#js_reship_selected_hybris_order",function(){let orderId=$(this).val();let warehouseCode=$("#js_reship_selected_warehouse").val();let originalEniteoNumber=$("#js_reship_selected_eniteo_order").val();if(orderId!=""&&orderId.length==10){$(".js_reship_checkout_button_top").attr("data-hybrisOrderId",orderId);$(".js_reship_checkout_button_bottom").attr("data-hybrisOrderId",orderId);$.ajax({url:ACC.config.encodedContextPath+"/cart/reship-order-details",type:"GET",data:{reshipWarehouse:warehouseCode,originalOrderNumber:orderId,originalEniteoNumber:originalEniteoNumber},contentType:"application/json",success:function(response){}})}else{$(".js_reship_checkout_button_top").removeAttr("data-hybrisOrderId");$(".js_reship_checkout_button_bottom").removeAttr("data-hybrisOrderId");}})},enterReshipEniteoOrder:function(){$(document).on('blur',"#js_reship_selected_eniteo_order",function(){let eniteoOrderId=$(this).val();let warehouseCode=$("#js_reship_selected_warehouse").val();let originalOrderNumber=$("#js_reship_selected_hybris_order").val();if(eniteoOrderId!=""&&eniteoOrderId.length==7){$(".js_reship_checkout_button_top").attr("data-eniteoOrderId",eniteoOrderId);$(".js_reship_checkout_button_bottom").attr("data-eniteoOrderId",eniteoOrderId);$.ajax({url:ACC.config.encodedContextPath+"/cart/reship-order-details",type:"GET",data:{reshipWarehouse:warehouseCode,originalOrderNumber:originalOrderNumber,originalEniteoNumber:eniteoOrderId},contentType:"application/json",success:function(response){}})}else{$(".js_reship_checkout_button_top").removeAttr("data-eniteoOrderId");$(".js_reship_checkout_button_bottom").removeAttr("data-eniteoOrderId");}})},selectReshipCheckoutButton:function(){$(document).on('click',".js_reship_checkout_button_bottom,.js_reship_checkout_button_top",function(){var reshipCategory=$(this).attr("data-categorycode");var reshipSubCategory=$(this).attr("data-subcategorycode");let warehouseCode=$(this).attr("data-warehouse");let orderId=$(this).attr("data-hybrisOrderId");let eniteoOrderId=$(this).attr("data-eniteoOrderId");let errorMessage={};reshipCategory==""||(typeof reshipCategory==='undefined')?errorMessage['reshipCategory']="Reship reason category not selected":"";reshipSubCategory==""||(typeof reshipSubCategory==='undefined')?errorMessage['reshipSubCategory']="Reship reason category not selected":"";warehouseCode==""||(typeof warehouseCode==='undefined')?errorMessage['warehouseCode']="Please select a warehouse.":"";orderId==""||(typeof orderId==='undefined')?errorMessage['orderId']="Enter a valid order number that contains 10 digits.":"";eniteoOrderId==""||(typeof eniteoOrderId==='undefined')?errorMessage['eniteoOrderId']="Enter a valid order number that contains 7 digits.":"";if(Object.keys(errorMessage).length){console.log("Reason not selected");$(".error-msg").remove();Object.entries(errorMessage).forEach(entry=>{const[key,value]=entry;let errorHTML;switch(key){case"reshipCategory":errorHTML="<p class='error-msg'>"+value+"</p>";$("#js_reship_selected_category").parents(".cart-summary__reship-option").append(errorHTML);break;case"reshipSubCategory":errorHTML="<p class='error-msg'>"+value+"</p>";$("#js_reship_selected_subcategory").parents(".cart-summary__reship-option").append(errorHTML);break;case"warehouseCode":errorHTML="<p class='error-msg'>"+value+"</p>";$("#js_reship_selected_warehouse").parents(".cart-summary__reship-option").append(errorHTML);break;case"orderId":errorHTML="<p class='error-msg'>"+value+"</p>";$("#js_reship_selected_hybris_order").parents(".cart-summary__reship-option").append(errorHTML);break;case"eniteoOrderId":errorHTML="<p class='error-msg'>"+value+"</p>";$("#js_reship_selected_eniteo_order").parents(".cart-summary__reship-option").append(errorHTML);break;}});}else{var url=$(this).data("url");window.location.replace(url)}})},selectMtrCheckoutButton:function(){$(document).on('click',".checkMtrbox",function(){if($('.checkMtrbox').is(":checked")){var mtrId=$(this).attr("id");var id=mtrId.split(/[_ ]+/).pop();var entryNumber=id.split("checkbox").pop();ACC.mtrreport.sendMTRRequesteddata(entryNumber)}})},selectWarehouseButtom:function(){$(document).on('submit',"#js_change_warehouse",function(e){e.preventDefault();var warehouseChanges=document.getElementsByName("warehouse_selected");var i;var info=[];if(warehouseChanges!=null&&warehouseChanges.length>0){for(i=0;i<warehouseChanges.length;i++){info.push(warehouseChanges[i].value);}}
var changesInfo=info.toString();var url="/checkout/multi/billing-address/changewarehouse"+"?CSRFToken="+ACC.config.CSRFToken;$.ajax({url:url,type:"POST",data:{changesInfo:changesInfo},success:function(response){$("#changeWarehouseModal").modal('hide');window.location.reload();}})})},bindToggleData:function(){$(document).on('change',".applyExpiryDate-js",function(e){e.preventDefault();$(this).addClass("clicked");var expiryDate=$("#date1").val();var url=ACC.config.encodedContextPath+"/cart/apply-expiry-date";$.ajax({type:"POST",url:url,data:{expirationDate:expiryDate,CSRFToken:ACC.config.CSRFToken},success:function(response){$('#hiddenQuoteDate').val(expiryDate);}})})
$(document).on('mouseout',".js-personalizednotes",function(e){e.preventDefault();var personalizedNotes=$(this).val();var url=ACC.config.encodedContextPath+"/cart/add-personalized-note";$.ajax({type:"POST",url:url,data:{personalizedNotes:personalizedNotes,CSRFToken:ACC.config.CSRFToken},success:function(response){}})})
$(document).on('mouseout',".js-vendornotes",function(e){e.preventDefault();var vendorNotes=$(this).val();var url=ACC.config.encodedContextPath+"/cart/add-vendor-notes";$.ajax({type:"POST",url:url,data:{vendorNotes:vendorNotes,CSRFToken:ACC.config.CSRFToken},success:function(response){}})})},bindResetToggleData:function(){$(document).on('click',".js-remove-expiry-date",function(e){e.preventDefault();$(this).removeClass("clicked");var url=ACC.config.encodedContextPath+"/cart/reset-expiry-date";$.ajax({url:url,type:"POST",data:{CSRFToken:ACC.config.CSRFToken},success:function(data){$('#cartModifyExpiryDate').modal('hide');$("#date1").val("");$('.modify-date').prop('checked',false);$('.expiryDateModule').addClass('hide');location.reload();}})})
$(document).on('click',".js-reset-personalize-note",function(e){e.preventDefault();var url=ACC.config.encodedContextPath+"/cart/reset-personalized-note";$.ajax({url:url,type:"POST",data:{CSRFToken:ACC.config.CSRFToken},success:function(data){$('#cartModifyPersonalizeNotes').modal('hide');$(".js-personalizednotes").val("");$('.js-personalizednotes').prop('checked',false);$('.personalize-panel').addClass('hide');location.reload();}})})
$(document).on('click',".js-reset-vendor-notes",function(e){e.preventDefault();var url=ACC.config.encodedContextPath+"/cart/reset-vendor-notes";$.ajax({url:url,type:"POST",data:{CSRFToken:ACC.config.CSRFToken},success:function(data){$('#cartNotesModal').modal('hide');$(".js-vendornotes").val("");$('.js-vendornotes').prop('checked',false);$('.vendor-panel').addClass('hide');location.reload();}})})},saveQuoteFromCart:function(){$('#saveQuote').on('submit',function(e){e.preventDefault();ACC.global.spinnerLoad($('.quote-loader'));$.ajax({type:$(this).attr('method'),url:$(this).attr('action'),data:$(this).append($("<input>",{type:"hidden",name:"CSRFToken",value:ACC.config.CSRFToken})).serialize(),success:function(response){ACC.global.spinnerRemove($('.quote-loader'));if(response.isError==false){window.location.href="/quote/"+
response.quoteNumber+"/confirm-quote/?isQuoteCreated=true";}else{$('.quote-error').html('<h4>'+
response.errorMessage+'</h4>')}},});});$('#js-addmore').on('click',function(e){e.preventDefault();ACC.global.spinnerLoad($('.quote-loader'));$.ajax({type:$('#saveQuote').attr('method'),url:'/quote/guest/addMoreDetailsToQuote',data:$('#saveQuote').append($("<input>",{type:"hidden",name:"CSRFToken",value:ACC.config.CSRFToken})).serialize(),success:function(response){ACC.global.spinnerRemove($('.quote-loader'));if(response.isError==false){window.location.href="/checkout";}else{window.location.href="/checkout";}},});});$('#js-addmore-login').on('click',function(e){e.preventDefault();ACC.global.spinnerLoad($('.quote-loader'));$.ajax({type:$('#saveQuote').attr('method'),url:'/quote/addMoreDetailsToQuote',data:$('#saveQuote').append($("<input>",{type:"hidden",name:"CSRFToken",value:ACC.config.CSRFToken})).serialize(),success:function(response){ACC.global.spinnerRemove($('.quote-loader'));if(response.isError==false){window.location.href="/checkout";}else{window.location.href="/checkout";}},});});},POnumberValidate:function(){$('#checkout-ponumber').bind('keypress',function(e){var POValue=$(this).val();var POregex=/[\#<>\/]/;var POkey=e.which;var validKey=POkey==60||POkey==62||POkey==35;if(validKey){$(this).addClass('error');$(this).next().show().html('The following special characters # < > are not permitted');$(this).next().removeClass('net30-error');}else{if(!POregex.test(POValue)){$(this).next().hide();$(this).removeClass('error');$(this).next().addClass('net30-error');$(this).next().html('This field is required');}}});$('#checkout-ponumber').on('blur',function(e){var POlength=$(this).val();var POregex=/[\#<>\/]/;if(POregex.test(POlength)){$(this).addClass('error');$(this).next().show().html('The following special characters # < > are not permitted');}});$('#checkout-ponumber').on("keyup",function(event){var POValue=$(this).val();var POregex=/[\#<>\/]/;var POkey=event.key;if(!POregex.test(POValue)){if(POkey==="Backspace"||POkey==="Delete"){$(this).next().hide();$(this).removeClass('error');}}
if($(this).val()==''){$(this).next().addClass('net30-error');}});if($('.js-net30payment').attr('data-value')=='Net30'){$('.checkout-page__promotion_form').addClass('required');$('.checkout-page__promotion_form .net30-error').html('This field is required');}},RemoveSearchBoxOutline:function(){$(document).on('input','.search-field-wrapper input',function(e){setTimeout(function(){if($('#search-widget-container').find('.hits-wrapper').children().length==0){$('#search-widget-container').find('.results-cell').css('background-color','transparent');}else if($('#search-widget-container').find('.hits-wrapper').children().length>0){$('#search-widget-container').find('.results-cell').css('background-color','#eff0f1');}},500);});$(document).on('focus','.search-field-wrapper input',function(e){if($('#search-widget-container').find('.hits-wrapper').children().length==0){$('#search-widget-container').find('.results-cell').css('background-color','transparent');}else if($('#search-widget-container').find('.hits-wrapper').children().length>0){$('#search-widget-container').find('.results-cell').css('background-color','#eff0f1');}});}};

ACC.tkcheckoutaddress={_autoload:["bindTextFiled","bindDeliveryAddressFormValidation","bindJsShipAddAddressValidation","bindJsLoginShipSuggestion","bindJsShipAddAddress","bindJsLoginShipAddAddress","billingAddressFormValidation","bindJsShipEditAddressValidation","bindJsEditAddress","bindJsEditShipAddress","bindJsBillEditAddressValidation","bindJsBillingEditAddress","bindJsEditBillAddress","bindJsBillSuggestionSection","bindJsBillAddAddress","bindJsLoginBillSuggestion","bindJsLoginBillAddAddress","bindBillSameShippSameaddress","bindUserUpsCarrierOption","bindJsBillingSecSameAddress","bindCountryDropDown","bindCountryEditDropDown","bindBusinessTypeModal","bindBusinessTypeValidation","bindDeleteAddressConfirmation","bindCheckoutDeleteAddress","bindShipAddressSuggestionSelection","bindContinueBillingAddressButton","bindOrderTaxExemption","avalaraModalStatus","bindCheckedStates"],bindTextFiled:function(){$(document).on("focus","input[type='text']",function(){$(this).next(".upsError").css("display","none");$(this).next(".upsZipcodeError").css("display","none")})},bindDeliveryAddressFormValidation:function(){$.validator.addMethod("validPhone",function(value,element){var filter=/^[0-9-+]+$/;return filter.test(value)},ACC.phoneNotValid);$("#shipAddress, #editAddress").validate({onkeyup:!1,rules:{firstName:{required:!0},lastName:{required:!0},email:{required:!0,email:!0},line1:{required:!0,maxlength:256},townCity:{required:!0},regionIso:{required:!0},postcode:{required:!0,maxlength:15},countryIso:{required:!0},phone:{required:!0,validPhone:!0,rangelength:[10,15]},ext:{number:!0},},messages:{email:{required:"",email:ACC.emailValidationError},firstName:{required:""},lastName:{required:""},phone:{required:"",rangelength:ACC.invalidPhoneNumber,},postcode:{required:"",maxlength:ACC.invalidZipCode},line1:{required:""},townCity:{required:""},},})},bindJsShipAddAddressValidation:function(){$(document).on('click','.js_shipAddAddress_validation',function(e){var form=$('#shipAddress').valid();var validationError=$(this).data('addressvalidationerror')
var Url=$('#shipAddress').attr('action');var addressLine1=$(".address_line1").val();var addressLine2=$(".address_line2").val();var isInvalidAddress1=ACC.tkcheckoutaddress.wordInString(addressLine1,"po box")||ACC.tkcheckoutaddress.wordInString(addressLine1,"pobox");var isInvalidAddress2=ACC.tkcheckoutaddress.wordInString(addressLine2,"po box")||ACC.tkcheckoutaddress.wordInString(addressLine2,"pobox");if(form&&!isInvalidAddress1&&!isInvalidAddress2){$.ajax({url:Url,type:'POST',data:$("#shipAddress").serialize(),success:function(data){if($.trim(data)=='success'){var url=ACC.config.encodedContextPath+'/checkout/multi/billing-address/add-address';window.location.replace(url)}else if($.trim(data)=='fail'){$('.js_address_validation_error').html(validationError);$('#shipErrormsg').attr('style','display:block')}else{$('#js_guest_ship_section').html(data);$('.js_guestship_address_suggestion').attr('style','display:block')}},error:function(data){}})}else{$('#shipAddress').animate({scrollTop:0},'slow');if(isInvalidAddress1||isInvalidAddress2){$('#poBoxErrormsg').attr('style','display:block')}else{$('#shipErrormsg').attr('style','display:block')}}
$('#shipAddress .form-group').matchHeight()});$(document).on('click','.js-checkoutprev',function(e){if($(this).data("checkoutprev")&&$(this).data("checkoutprev")!=""){sessionStorage.setItem("checkoutprev",$(this).data("checkoutprev"));}
let currentMethod=$(this).data("checkoutprev");if(currentMethod){let stringifyData;switch(currentMethod){case"js_shippingMethodView":stringifyData=$("#gaData-shippingOption").html();if(stringifyData){let processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));let selectedOption=$("input[name='delivery_method']:checked").attr("data-name");processedData['shipping_tier']=selectedOption;processedData?ACC.ga4.addShippingInfo(processedData):'';}
break;case"js_paymentMethodView":stringifyData=$("#gaData-shippingOption").html();if(stringifyData){let processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' '));let paymentOption=$(this).attr("data-name");processedData['payment_type']=paymentOption?paymentOption:'';processedData&&paymentOption!='CardPayment'?ACC.ga4.addPaymentInfo(processedData):'';}
break;}}});},bindJsLoginShipSuggestion:function(){$(document).on('click','.js_login_ship_suggestion',function(e){var form=$('#shipAddress').valid();var addShippingAddress=$(this);var validationError=$(this).data('addressvalidationerror');addShippingAddress.addClass("disabled").prop("disabled",true);var Url=$('#shipAddress').attr('action');var addressLine1=$(".address_line1").val();var addressLine2=$(".address_line2").val();var isInvalidAddress1=ACC.tkcheckoutaddress.wordInString(addressLine1,"po box")||ACC.tkcheckoutaddress.wordInString(addressLine1,"pobox");var isInvalidAddress2=ACC.tkcheckoutaddress.wordInString(addressLine2,"po box")||ACC.tkcheckoutaddress.wordInString(addressLine2,"pobox");if(form&&!isInvalidAddress1&&!isInvalidAddress2){var residential=$('input[name=residentialRadio]:checked','#shipAddress').val();$("#js_residential").val(residential);$.ajax({url:Url,type:'POST',data:$("#shipAddress").serialize(),success:function(data){if($.trim(data)=='success'){location.reload()}else if($.trim(data)=='fail'){$('.js_address_validation_error').html(validationError);$('#shipErrormsg').attr('style','display:block');addShippingAddress.removeClass("disabled").prop("disabled",false);}else{$('#checkoutAddShipModal').html(data);$('.js_registeredship_address_suggestion').attr('style','display:block');addShippingAddress.removeClass("disabled").prop("disabled",false);}},error:function(data){addShippingAddress.removeClass("disabled").prop("disabled",false);}})}else{$('#checkoutAddShipModal').animate({scrollTop:0},'slow');if(isInvalidAddress1||isInvalidAddress2){$('#poBoxErrormsg').attr('style','display:block')}else{$('#shipErrormsg').attr('style','display:block')}
addShippingAddress.removeClass("disabled").prop("disabled",false);}
$('#shipAddress .form-group').matchHeight()})},bindJsShipAddAddress:function(){$(document).on("click",".js-shipAddAddress",function(e){var form=$("#shipAddress").valid();if(form){$("#shipAddress").submit()}else{$("#checkoutAddShipModal").animate({scrollTop:0},"slow");$("#shipErrormsg").attr("style","display:block")}
$('#shipAddress .form-group').matchHeight()})},bindJsLoginShipAddAddress:function(){$(document).on("click",".js_login_shipAddAddress",function(e){var form=$("#shipAddress").valid();var addShippingAddress=$(this);addShippingAddress.addClass("disabled").prop("disabled",true);var Url=$("#shipAddress").attr("action");if(form){var residential=$("input[name=residentialRadio]:checked","#shipAddress").val();$("#js_residential").val(residential);$.ajax({url:Url,type:"POST",data:$("#shipAddress").serialize(),success:function(data){location.reload()},error:function(data){addShippingAddress.removeClass("disabled").prop("disabled",false);}})}else{addShippingAddress.removeClass("disabled").prop("disabled",false);$("#checkoutAddShipModal").animate({scrollTop:0},"slow");$("#shipErrormsg").attr("style","display:block")}})},billingAddressFormValidation:function(){$.validator.addMethod("validPhone",function(value,element){var filter=/^[0-9-+]+$/;return filter.test(value)},ACC.phoneNotValid);$("#billAddress, #editBillingAddress").validate({onkeyup:!1,rules:{firstName:{required:!0,maxlength:50},lastName:{required:!0,maxlength:50},email:{required:!0,email:!0},line1:{required:!0,maxlength:250},townCity:{required:!0},line2:{maxlength:250},regionIso:{required:!0},postcode:{required:!0,maxlength:15},countryIso:{required:!0},phone:{required:!0,validPhone:!0,rangelength:[10,15]},ext:{number:!0}},messages:{email:{required:"",email:ACC.emailValidationError},firstName:{required:""},lastastName:{required:""},phone:{required:"",rangelength:ACC.invalidPhoneNumber},postcode:{required:"",maxlength:ACC.invalidZipCode},line1:{required:""},townCity:{required:""},},})},bindJsShipEditAddressValidation:function(){$(document).on('click','.js_ship_edit_address_validation',function(e){$(':disabled').each(function(e){$(this).removeAttr('disabled');})
var form=$('#editAddress').valid();var validationError=$(this).data('addressvalidationerror');var Url=$('#editAddress').attr('action');var addressLine1=$(".edit_address_line1").val();var addressLine2=$(".edit_address_line2").val();var isInvalidAddress1=ACC.tkcheckoutaddress.wordInString(addressLine1,"po box")||ACC.tkcheckoutaddress.wordInString(addressLine1,"pobox");var isInvalidAddress2=ACC.tkcheckoutaddress.wordInString(addressLine2,"po box")||ACC.tkcheckoutaddress.wordInString(addressLine2,"pobox");if(form&&!isInvalidAddress1&&!isInvalidAddress2){var residential=$('input[name=residentialRadio]:checked','#editAddress').val();$('#js_edit_residential').val(residential);$.ajax({url:Url,type:'POST',data:$("#editAddress").serialize(),success:function(data){if($.trim(data)=='success'){location.reload()}else if($.trim(data)=='fail'){$('.js_address_validation_error').html(validationError);$('#editAddressErrormsg').attr('style','display:block')}else{$('#checkoutEditShipModal').html(data);$('.js_edit_address_suggestion').attr('style','display:block');$('#checkoutEditShipModal').modal('show');ACC.customquote.bindPostCodeValidation()}},error:function(data){}})}else{$('#checkoutEditShipModal').animate({scrollTop:0},'slow');if(isInvalidAddress1||isInvalidAddress2){$('#editPoBoxErrormsg').attr('style','display:block')}else{$('#editAddressErrormsg').attr('style','display:block')}
$('#editAddress .form-group').matchHeight()}})},bindJsEditAddress:function(){$(document).on("click",".js_edit_address",function(e){var form=$("#editAddress").valid();var Url=$("#editAddress").attr("action");if(form){var residential=$("input[name=residentialRadio]:checked","#editAddress").val();$("#js_edit_residential").val(residential);$.ajax({url:Url,type:"POST",data:$("#editAddress").serialize(),success:function(data){if(data=="Error"){$(".upsError").text(data);$(".upsError").addClass("error");$(".upsError").show();e.preventDefault()}else{location.reload()}},error:function(data){}})}else{$("#editAddressErrormsg").attr("style","display:block")}})},bindJsEditShipAddress:function(){$(document).on("click",".js-editShipAddress",function(e){var id=$(this).data("address");var Url=ACC.config.encodedContextPath+"/checkout/multi/delivery-address/edit-address";$.ajax({url:Url,data:{"addressId":id},type:"GET",success:function(data){$("#checkoutEditShipModal").html(data);$("#checkoutEditShipModal").modal("show");ACC.customquote.bindPostCodeValidation()},error:function(e){}})})},bindJsBillEditAddressValidation:function(){$(document).on('click','.js_bill_edit_address_validation',function(e){var upsErrorEl=$("#editBillingAddress .upsError");var upsZipCodeErrorEL=$("#editBillingAddress .upsZipcodeError")
var form=$('#editBillingAddress').valid();var validationError=$(this).data('addressvalidationerror');var addressOption=$("#editBillingAddress input[type='radio'][name='address']:checked").length
var upsAccountOrCommonCarrier=$("#js_billing_address_form input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").val();var upsAccountNumber=$("#upsacc").val();var upsZipcode=$("#upsZipcode").val();var carrierName=$("#carrierName").val();var carrierAccountNumber=$("#carrierAccountNumber").val();var carrierCost=$("#carrierCost").val();$("#js_new_upsAccountOrCommonCarrier").val(upsAccountOrCommonCarrier);$("#js_new_addressUPSAccountNumber").val(upsAccountNumber);$("#js_new_upsZipcode").val(upsZipcode);$("#js_new_carrierName").val(carrierName);$("#js_new_carrierAccountNumber").val(carrierAccountNumber);$("#js_new_carrierCost").val(carrierCost);var Url=$('#editBillingAddress').attr('action');if(form){var residential=$('input[name=residentialRadio]:checked','#editBillingAddress').val();$("#js_bill_edit_residential").val(residential);$.ajax({url:Url,type:'POST',data:$("#editBillingAddress").serialize(),success:function(data){if($.trim(data)=="servicedown"){$(".upsError").text(ACC.upsServiceDown);$(".upsError").addClass("error");$(".upsError").show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else if($.trim(data)=='success'){location.reload()}else if($.trim(data)=='fail'){$('.js_address_validation_error').html(validationError);$('#billErrormsg').attr('style','display:block')}else if($.trim(data).indexOf('upsValidationError')!=-1){$(".upsError").text(ACC.validateUPSAccountNumber);$(".upsError").addClass("error");$(".upsError").show();$("#checkoutEditBillModal").animate({scrollTop:0},"slow")}else{$('#checkoutEditBillModal').html(data);$('.js_edit_bill_suggestion').attr('style','display:block');$('#checkoutEditBillModal').modal('show')}
ACC.tkcheckoutaddress.loadValidationJs()},error:function(data){ACC.tkcheckoutaddress.loadValidationJs()}})}else{$('#editBillingAddressErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs()}
ACC.tkcheckoutaddress.loadValidationJs()})},bindJsBillingEditAddress:function(){$(document).on("click",".js_billing_edit_address",function(e){var upsErrorEl=$("#editBillingAddress .upsError");var upsZipCodeErrorEL=$("#editBillingAddress .upsZipcodeError")
var form=$('#editBillingAddress').valid();var Url=$('#editBillingAddress').attr("action");var validationError=$(this).data('addressvalidationerror');var addressOption=$("#editBillingAddress input[type='radio'][name='address']:checked").length
var upsAccountOrCommonCarrier=$("#js_billing_address_form input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").val();var upsAccountNumber=$("#upsacc").val();var upsZipcode=$("#upsZipcode").val();var carrierName=$("#carrierName").val();var carrierAccountNumber=$("#carrierAccountNumber").val();var carrierCost=$("#carrierCost").val();$("#js_edit_upsAccountOrCommonCarrier").val(upsAccountOrCommonCarrier);$("#js_edit_addressUPSAccountNumber").val(upsAccountNumber);$("#js_edit_upsZipcode").val(upsZipcode);$("#js_edit_carrierName").val(carrierName);$("#js_edit_carrierAccountNumber").val(carrierAccountNumber);$("#js_edit_carrierCost").val(carrierCost);if(form){var residential=$('input[name=residentialRadio]:checked','#editBillingAddress').val();$("#js_bill_edit_residential").val(residential);$.ajax({url:Url,data:$("#editBillingAddress").serialize(),type:"POST",success:function(data){if($.trim(data)=="servicedown"){$(".upsError").text(ACC.upsServiceDown);$(".upsError").addClass("error");$(".upsError").show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else if($.trim(data)=="fail"){$('.js_address_validation_error').html(validationError);$('#editBillingAddressErrormsg').attr('style','display:block')}else if($.trim(data).indexOf('upsValidationError')!=-1){$(".upsError").text(ACC.validateUPSAccountNumber);$(".upsError").addClass("error");$(".upsError").show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else if($.trim(data)=="success"){location.reload()}
ACC.tkcheckoutaddress.loadValidationJs()}})}else{$('#editBillingAddressErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs()}
ACC.tkcheckoutaddress.loadValidationJs()})},bindJsEditBillAddress:function(){$(document).on("click",".js_edit_billAddress",function(e){var id=$(this).data("address");var Url=ACC.config.encodedContextPath+"/checkout/multi/billing-address/edit?editAddressCode="+id;$.ajax({url:Url,data:{"addressId":id},type:"GET",success:function(data){$("#checkoutEditBillModal").html(data);$("#checkoutEditBillModal").modal("show");ACC.tkcheckoutaddress.loadValidationJs()},error:function(e){ACC.tkcheckoutaddress.loadValidationJs()}});ACC.tkcheckoutaddress.loadValidationJs()})},bindCheckedStates:function(){var stateValues=JSON.parse(localStorage.getItem('stateValues'))||{};var $checkboxes=$(".tax_exempt_states :checkbox");$checkboxes.on("change",function(){$checkboxes.each(function(){stateValues[this.id]=this.checked;});localStorage.setItem("stateValues",JSON.stringify(stateValues));});},bindJsBillSuggestionSection:function(){$(document).on('click','.js_bill_suggestion_section',function(e){$('#billErrormsg').attr('style','display:none');var upsErrorEL=$("#billAddress .upsError");var upsZipcodeErrorEL=$("#billAddress .upsZipcodeError")
var form=$('#billAddress').valid();var validationError=$(this).data('addressvalidationerror');var isSameAsShippingAddress=$("#billAddress input[name='sameAsShipping'][type='checkbox']:checked").length;var isCommonCarrierSelected=$('#commonCarrier').is(':checked');var upsAccountOrCommonCarrier=$("#billAddress input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").length;var addressUPSAccount=$("#billAddress input[name='addressUPSAccount'][type='checkbox']:checked").length;var upsAccountNumber=$("#billAddress input[type='text'][name='addressUPSAccountNumber']:visible").val();var upsZipcode=$("#billAddress input[type='text'][name='upsZipcode']:visible").val();if(!isSameAsShippingAddress&&!upsAccountOrCommonCarrier&&!addressUPSAccount&&!form){$('#checkoutAddShipModal').animate({scrollTop:0},'slow');$('#billErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs();e.preventDefault()}else if((upsAccountOrCommonCarrier||addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEL.show();upsErrorEL.text(ACC.upsvalidate);upsErrorEL.addClass("error");e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipcodeErrorEL.show();upsZipcodeErrorEL.text(ACC.upsZipcodeValidate);upsZipcodeErrorEL.addClass("error");e.preventDefault()}
ACC.tkcheckoutaddress.loadValidationJs()}else{var Url=$('#billAddress').attr('action');if($('.js_tax-exempt .checkbox-control').is(':checked')){var Url=Url+'?userTaxExempt=true';}
if(form){$.ajax({url:Url,type:'POST',data:$("#billAddress").serialize(),success:function(data){if($.trim(data)=="servicedown"){upsErrorEL.text(ACC.upsServiceDown);upsErrorEL.addClass("error");upsErrorEL.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else if($.trim(data)=='success'){var url=ACC.config.encodedContextPath+'/checkout/multi/delivery-method/select-method';if($('.js_tax-exempt .checkbox-control').is(':checked')){if(ACC.customerEniteoAccountNumber!=""){$('#checkoutAddBillModal').modal('hide');ACC.tkcheckoutaddress.checkoutGencert('Redirect');}else{if(ACC.gencert.generateEniteoAccountNumber($("#billAddress"))!=""){$('#checkoutAddBillModal').modal('hide');ACC.tkcheckoutaddress.checkoutGencert('Redirect');}else{window.location.replace(url);}}}else{window.location.replace(url)}}else if($.trim(data)=='fail'){$('.js_address_validation_error').html(validationError);$('#billErrormsg').attr('style','display:block')}else if($.trim(data).indexOf('upsValidationError')!=-1){upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else{$('#js_guest_bill_section').html(data);$('.js_guestbill_address_suggestion').attr('style','display:block')}
ACC.tkcheckoutaddress.loadValidationJs();if($('.js_tax-exempt .checkbox-control').is(':checked')){$('.tax_exempt_states').show();}
$('.js-custom-scrollbar').mCustomScrollbar({});var stateValues=JSON.parse(localStorage.getItem('stateValues'));$.each(stateValues,function(key,value){$("#"+key).prop('checked',value);});localStorage.removeItem("stateValues");},error:function(data){ACC.tkcheckoutaddress.loadValidationJs()}})}else{$('#checkoutAddShipModal').animate({scrollTop:0},'slow');$('#billErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs()}}
ACC.tkcheckoutaddress.loadValidationJs();$('#billAddress .form-group').matchHeight()})},bindJsBillAddAddress:function(){$(document).on("click",".js-billAddAddress",function(e){var upsErrorEL=$("#billAddress .upsError");var upsZipcodeErrorEL=$("#billAddress .upsZipcodeError");var form=$('#billAddress').valid();var validationError=$(this).data('addressvalidationerror');var isSameAsShippingAddress=$("#billAddress input[name='sameAsShipping'][type='checkbox']:checked").length;var isCommonCarrierSelected=$('#commonCarrier').is(':checked');var upsAccountOrCommonCarrier=$("#billAddress input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").length;var addressUPSAccount=$("#billAddress input[name='addressUPSAccount'][type='checkbox']:checked").length;var upsAccountNumber=$("#billAddress input[type='text'][name='addressUPSAccountNumber']").val();var upsZipcode=$("#billAddress input[type='text'][name='upsZipcode']").val();if(!isSameAsShippingAddress&&!upsAccountOrCommonCarrier&&!addressUPSAccount&&!form){$('#checkoutAddShipModal').animate({scrollTop:0},'slow');$('#billErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs();e.preventDefault()}else if((upsAccountOrCommonCarrier||addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEL.show();upsErrorEL.text(ACC.upsvalidate);upsErrorEL.addClass("error");e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipcodeErrorEL.show();upsZipcodeErrorEL.text(ACC.upsZipcodeValidate);upsZipcodeErrorEL.addClass("error");e.preventDefault()}
ACC.tkcheckoutaddress.loadValidationJs()}else{if(form){var residential=$("input[name=residentialRadio]:checked","#billAddress").val();$("#js_bill_residential").val(residential);var selectMethodUrl='/checkout/multi/delivery-method/select-method';if($('.js_tax-exempt .checkbox-control').is(':checked')){var selectMethodUrl=selectMethodUrl+'?orderTaxExempt=true';if(ACC.gencert.generateEniteoAccountNumber($("#billAddress"))!=""){ACC.tkcheckoutaddress.checkoutGencert();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),upsErrorEL,selectMethodUrl);}}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),upsErrorEL,selectMethodUrl);}}else{$('#checkoutAddShipModal').animate({scrollTop:0},'slow');$('#billErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs()}
ACC.tkcheckoutaddress.loadValidationJs()}
ACC.tkcheckoutaddress.loadValidationJs();$('#billAddress .form-group').matchHeight()})},billAddressAjax:function(formOption,upsErrorEL,locationReplace){var formUrl=formOption.attr('action');$.ajax({url:formUrl,type:"POST",data:formOption.serialize(),success:function(data){if($.trim(data)=="servicedown"){upsErrorEL.text(ACC.upsServiceDown);upsErrorEL.addClass("error");upsErrorEL.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else if($.trim(data)=="fail"){$('.js_address_validation_error').html(validationError);upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$('#billErrormsg').attr('style','display:block');e.preventDefault()}else if($.trim(data).indexOf('upsValidationError')!=-1){upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow")}else if($.trim(data)=="success"){var url=ACC.config.encodedContextPath+''+locationReplace;window.location.replace(url);}else{$('#js_guest_bill_section').html(data);$('.js_guestbill_address_suggestion').attr('style','display:block')}
ACC.tkcheckoutaddress.loadValidationJs()},error:function(data){ACC.tkcheckoutaddress.loadValidationJs()}})},bindJsLoginBillSuggestion:function(){$(document).on('click','.js_login_bill_suggestion',function(e){var addBillingAddress=$(this);var upsErrorEl=$("#billAddress .upsError");addBillingAddress.addClass("disabled").prop("disabled",true);var upsZipcodeErrorEl=$("#billAddress .upsZipcodeError");var form=$('#billAddress').valid();var validationError=$(this).data('addressvalidationerror');var upsAccountOrCommonCarrier=$("#js_billing_address_form input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").val();var upsAccountNumber=$("#upsacc").val();var upsZipcode=$("#upsZipcode").val();var carrierName=$("#carrierName").val();var carrierAccountNumber=$("#carrierAccountNumber").val();var carrierCost=$("#carrierCost").val();$("#js_new_upsAccountOrCommonCarrier").val(upsAccountOrCommonCarrier);$("#js_new_addressUPSAccountNumber").val(upsAccountNumber);$("#js_new_upsZipcode").val(upsZipcode);$("#js_new_carrierName").val(carrierName);$("#js_new_carrierAccountNumber").val(carrierAccountNumber);$("#js_new_carrierCost").val(carrierCost);var Url=$('#billAddress').attr('action');if($('.js_tax-exempt .checkbox-control').is(':checked')){var Url=Url+'?userTaxExempt=true';}
if(form){var residential=$('input[name=residentialRadio]:checked','#billAddress').val();$("#js_residential").val(residential);$.ajax({url:Url,type:'POST',data:$("#billAddress").serialize(),success:function(data){if($.trim(data)=="servicedown"){upsErrorEl.text(ACC.upsServiceDown);upsErrorEl.addClass("error");upsErrorEl.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow");addBillingAddress.removeClass("disabled").prop("disabled",false);}else if($.trim(data)=='success'){location.reload()}else if($.trim(data)=='fail'){$('.js_address_validation_error').html(validationError);upsErrorEl.text(ACC.validateUPSAccountNumber);upsErrorEl.addClass("error");upsErrorEl.show();$('#billErrormsg').attr('style','display:block');addBillingAddress.removeClass("disabled").prop("disabled",false);}else if($.trim(data).indexOf('upsValidationError')!=-1){upsErrorEl.text(ACC.validateUPSAccountNumber);upsErrorEl.addClass("error");upsErrorEl.show();$("#checkoutAddBillModal").animate({scrollTop:0},"slow");addBillingAddress.removeClass("disabled").prop("disabled",false);}else{$('#checkoutAddBillModal').html(data);$('.js_registeredbill_address_suggestion').attr('style','display:block');addBillingAddress.removeClass("disabled").prop("disabled",false);}
ACC.tkcheckoutaddress.loadValidationJs()},error:function(data){addBillingAddress.removeClass("disabled").prop("disabled",false);ACC.tkcheckoutaddress.loadValidationJs()}})}else{$('#checkoutAddShipModal').animate({scrollTop:0},'slow');$('#shipErrormsg').attr('style','display:block');ACC.tkcheckoutaddress.loadValidationJs();addBillingAddress.removeClass("disabled").prop("disabled",false);}
ACC.tkcheckoutaddress.loadValidationJs();$('#billAddress .form-group').matchHeight()})},bindJsLoginBillAddAddress:function(){$(document).on("click",".js_login_billAddAddress",function(e){var addBillingAddress=$(this);addBillingAddress.addClass("disabled").prop("disabled",true);var upsErrorEL=$("#billAddress .upsError");var upsZipcodeErrorEL=$("#billAddress .upsZipcodeError");var form=$("#billAddress").valid();var Url=$("#billAddress").attr("action");var upsAccountOrCommonCarrier=$("#js_billing_address_form input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").val();var upsAccountNumber=$("#upsacc").val();var upsZipcode=$("#upsZipcode").val();var carrierName=$("#carrierName").val();var emailCoupon=$("#js_shipping_emailCoupon_value").val();var carrierAccountNumber=$("#carrierAccountNumber").val();var carrierCost=$("#carrierCost").val();$("#js_new_upsAccountOrCommonCarrier").val(upsAccountOrCommonCarrier);$("#js_new_addressUPSAccountNumber").val(upsAccountNumber);$("#js_new_upsZipcode").val(upsZipcode);$("#js_new_carrierName").val(carrierName);$("#js_new_emailCoupon").val(emailCoupon);$("#js_new_carrierAccountNumber").val(carrierAccountNumber);$("#js_new_carrierCost").val(carrierCost);if(form){var residential=$("input[name=residentialRadio]:checked","#billAddress").val();$("#js_bill_residential").val(residential);$.ajax({url:Url,type:"POST",data:$("#billAddress").serialize(),success:function(data){if($.trim(data)=="servicedown"){upsErrorEL.text(ACC.upsServiceDown);upsErrorEL.addClass("error");upsErrorEL.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow");addBillingAddress.addClass("disabled").prop("disabled",true);}else if($.trim(data)=="fail"){$('.js_address_validation_error').html(validationError);upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$('#billErrormsg').attr('style','display:block');e.preventDefault();addBillingAddress.addClass("disabled").prop("disabled",true);}else if($.trim(data).indexOf('upsValidationError')!=-1){upsErrorEL.text(ACC.validateUPSAccountNumber);upsErrorEL.addClass("error");upsErrorEL.show();$("#js_guest_bill_section").animate({scrollTop:0},"slow");addBillingAddress.addClass("disabled").prop("disabled",true);}else if($.trim(data)=="success"){var url=ACC.config.encodedContextPath+'/checkout/multi/delivery-method/select-method';if($('.js_tax-exempt .checkbox-control').is(':checked')){if(ACC.customerEniteoAccountNumber!=""){$('#checkoutAddBillModal').modal('hide');ACC.tkcheckoutaddress.checkoutGencert('Redirect');}else{if(ACC.gencert.generateEniteoAccountNumber($("#billAddress"))!=""){$('#checkoutAddBillModal').modal('hide');ACC.tkcheckoutaddress.checkoutGencert('Redirect');}else{window.location.replace(url);}}}else{window.location.replace(url);}}
ACC.tkcheckoutaddress.loadValidationJs();},error:function(data){ACC.tkcheckoutaddress.loadValidationJs();addBillingAddress.addClass("disabled").prop("disabled",true);}})}else{$("#checkoutAddBillModal").animate({scrollTop:0},"slow");$("#billErrormsg").attr("style","display:block");ACC.tkcheckoutaddress.loadValidationJs();addBillingAddress.addClass("disabled").prop("disabled",true);}
ACC.tkcheckoutaddress.loadValidationJs();$('#billAddress .form-group').matchHeight()})},bindBillSameShippSameaddress:function(){$(document).on("click",".bill-same-shipp #sameaddress",function(){$('.suggestion-address').attr("style","display:none");$("input[name='suggestionAddress'][type='radio']").removeAttr("checked");var actionUrl=$(this).data('actionurl');var sameAsShippingUrl=$(this).data('sameasshippingurl');var sameAsshippingButtonClass=$(this).data('sameasshippingclass');var continueButtonClass=$(this).data('continueclass');if($(this).prop("checked")==!0){$(".js_bill_address_continue").prop("disabled",false);$(".js_sameAsShipping_value").attr("value","true");$('#billAddress').attr('action',sameAsShippingUrl);$("#billErrormsg").attr("style","display:none");$(".js-same-shipping-billing").hide();$(".logged_user #billing-addredd").hide();$("#js_guest_bill_continue_button").removeAttr('class');$("#js_guest_bill_continue_button").attr('class',sameAsshippingButtonClass);$(".js_same_as_shipping_billing_form").attr("style","display:block");$(".js_same_as_ship_upsacc").attr("name","addressUPSAccountNumber");$(".js_same_as_ship_upsZipCode").attr("name","upsZipcode")}else if($(this).prop("checked")==!1){$(".js_bill_address_continue").prop("disabled",true);$('.suggestion-address').attr("style","display:block");$(".js_sameAsShipping_value").attr("value","false");$('#billAddress').attr('action',actionUrl);$(".js-same-shipping-billing").show();$(".js_new_address_upsAcc").attr("name","addressUPSAccountNumber");$(".js_new_address_upsZipCode").attr("name","upsZipcode");$(".logged_user #billing-addredd").show();$("#js_guest_bill_continue_button").removeAttr('class');$("#js_guest_bill_continue_button").attr('class',continueButtonClass);$(".js_same_as_shipping_billing_form").attr("style","display:none");$(".js_same_as_ship_upsacc").attr("name","same_as_shipping_addressUPSAccountNumber");$(".js_same_as_ship_upsZipCode").attr("name","same_as_shipping_upsZipcode")}})},bindContinueBillingAddressButton:function(){$(document).on("click",".js_bill_address_continue",function(e){var upsErrorEL=$("#js_billing_address_form .upsError");var upsZipcodeErrorEL=$("#js_billing_address_form .upsZipcodeError");var form=$("#js_billing_address_form").valid();var Url=$("#js_billing_address_form").attr("action");var isCommonCarrierSelected=$('#commonCarrier').is(':checked');var upsAccountOrCommonCarrier=$("#js_billing_address_form input[name='upsAccountOrCommonCarrier'][type='checkbox']:checked").length;var upsAccountNumber=$("#js_billing_address_form input[type='text'][name='addressUPSAccountNumber']").val();var upsZipcode=$("#js_billing_address_form input[type='text'][name='upsZipcode']").val();var addressUPSAccount=$("#js_billing_address_form input[name='addressUPSAccount'][type='checkbox']:checked").length;if((upsAccountOrCommonCarrier||addressUPSAccount)&&(typeof upsAccountNumber==='undefined'||upsAccountNumber==""||typeof upsZipcode==='undefined'||upsZipcode=="")&&!isCommonCarrierSelected){if(typeof upsAccountNumber==='undefined'||upsAccountNumber==""){upsErrorEL.show();upsErrorEL.text(ACC.upsvalidate);upsErrorEL.addClass("error");$('html body').animate({scrollTop:650},'slow');e.preventDefault()}
if(typeof upsZipcode==='undefined'||upsZipcode==""){upsZipcodeErrorEL.show();upsZipcodeErrorEL.text(ACC.upsZipcodeValidate);upsZipcodeErrorEL.addClass("error");$('html body').animate({scrollTop:650},'slow');e.preventDefault()}
ACC.tkcheckoutaddress.loadValidationJs()}else if(form){var url=ACC.config.encodedContextPath+'/checkout/multi/delivery-method/select-method';if($('.js_tax-exempt .checkbox-control').is(':checked')){if(ACC.gencert.generateEniteoAccountNumber($("#js_billing_address_form"))!=""){ACC.tkcheckoutaddress.checkoutGencert('SelectURL');}else{$("#js_billing_address_form").submit();}}else{$("#js_billing_address_form").submit();}
ACC.tkcheckoutaddress.loadValidationJs()}else{$("#checkoutAddBillModal").animate({scrollTop:0},"slow");$("#billErrormsg").attr("style","display:block");ACC.tkcheckoutaddress.loadValidationJs()}
ACC.tkcheckoutaddress.loadValidationJs();$('#js_billing_address_form .form-group').matchHeight()})},bindUserUpsCarrierOption:function(){$('.billing-form__ups-account .radio input:checked').closest('.billing-form__ups-account').find('.billing-form__ups-account_view').show();$('.billing-form__ups-account .radio input').change(function(){if($(this).is(':checked')){$('.suggestion-address').attr("style","display:block");$("input:radio[name='suggestionAddress']").first().prop("checked",!0);$('.billing-form__ups-account_view').hide();$(this).closest('.billing-form__ups-account').find('.billing-form__ups-account_view').show()}})},bindCountryDropDown:function(){$(document).on("change","select.js-country",function(){var id="#"+this.options[this.selectedIndex].id;var selectedCountry=$(id).val();if(selectedCountry=="US"||selectedCountry=="CA"){var Url=ACC.config.encodedContextPath+"/checkout/multi/delivery-address/changeState?countryIso="+selectedCountry;$.ajax({type:"POST",url:Url,}).done(function(data){$("#js_replace_region").attr("style","display:inline-block");$("#js_replace_region").html(data)})}else{$("#js_replace_region").attr("style","display:none")}})},bindCountryEditDropDown:function(){$(document).on("change","select.js_edit_country",function(e){var regionDiv=$(this).closest("form").find("#js_replace_edit_region");var id="#"+this.options[this.selectedIndex].id;var selectedCountry=$(id).val();if(selectedCountry=='US'||selectedCountry=='CA'||selectedCountry=='CAN'||selectedCountry=='USA'){$("#js_replace_edit_region").attr("style","display:inline-block")}else{$("#js_replace_edit_region").attr("style","display:none")}
if(selectedCountry=="US"||selectedCountry=="CA"||selectedCountry=="CAN"){var Url=ACC.config.encodedContextPath+"/checkout/multi/delivery-address/changeState?countryIso="+selectedCountry+"&CSRFToken="+ACC.config.CSRFToken;$.ajax({type:"POST",url:Url,}).done(function(data){regionDiv.attr("style","display:inline-block");regionDiv.html(data)})}else{regionDiv.attr("style","display:none")}})},bindShipAddressSuggestionSelection:function(){$(document).on("click",".js_address_suggestion_radio",function(){$('.js_customer_choice').attr('data-line1',$('#js_edit_line1').attr("value"));$('.js_customer_choice').attr('data-town',$('#js_edit_city').attr("value"));$('.js_customer_choice').attr('data-region',$('.js_region_form').html());$('.js_customer_choice').attr('data-postalcode',$('#js_edit_postalCode').attr("value"));var line1=$(this).data('line1');var town=$(this).data('town');var postalcode=$(this).data('postalcode');var region=$(this).data('region');var regionIso=$(this).data('regioniso');$('#js_edit_line1').attr("value",line1);$('#js_edit_city').attr("value",town);$('.js_region_form').html("<option value="+regionIso+" id=js_country_iso"+regionIso+" selected=selected>"+region+"</option>");$('#js_edit_postalCode').attr("value",postalcode);$('#js_edit_line1, #js_edit_city, #js_replace_region #state, #js_edit_postalCode, #country').attr("readonly","readonly");})},bindDeleteAddressConfirmation:function(){$(document).on("click",".js_delete_confirmation",function(){var addressId=$(this).data("addressid");$("#js_checkout_delete_address").attr("data-addressid",addressId)})},bindCheckoutDeleteAddress:function(){$(document).on("click","#js_checkout_delete_address",function(){var addressId=$(this).data("addressid");var url=$(this).data("url")+addressId;$.get(url,function(data){location.reload()})})},bindJsBillingSecSameAddress:function(){$(document).on("click",".js_billing_sec_sameAddress",function(e){var sameAsShipping=$(this).data("sameasshipping");var billUrl=$(this).data("selectbill");var sameAsShippingClass=$(this).data('sameasshippingclass');var billingAddressClass=$(this).data('addbillingaddressclass');if($(this).prop("checked")==!0){$("#js_billing_address_continue").removeClass(billingAddressClass);$("#js_billing_address_continue").attr("type","button");$("#js_billing_address_continue").addClass(sameAsShippingClass);$(".js_sameAsShipping_value").attr("value","true");$('.js_billing_address_form').attr("id","billAddress");$(".js_billing_address_form").attr("action",sameAsShipping)}else if($(this).prop("checked")==!1){$("#js_billing_address_continue").removeClass(sameAsShippingClass);$("#js_billing_address_continue").removeAttr("type");$("#js_billing_address_continue").addClass(billingAddressClass);$(".js_sameAsShipping_value").attr("value","false");$('.js_billing_address_form').attr("id","js_billing_address_form");$(".js_billing_address_form").attr("action",billUrl)}})},bindBusinessTypeModal:function(){$(document).on("click",".js_business_type",function(){var span=$(this).data("span");var id=$(this).data("currentid");$("#js-businessTypeValidation").attr("data-business-span",span);$("#js-businessTypeValidation").attr("data-currentid",id)})},bindBusinessTypeValidation:function(){$(document).on("click","#js-businessTypeValidation",function(e){var id="#"+$(this).data("currentid");var span="."+$(this).data("business-span");var businessTypeVal=$(span).html();var businessType=$("#businessType").val().trim();if(businessType!=""){if(businessType.toLowerCase()===businessTypeVal.toLowerCase()){$("#js-businessType-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}else{var Url=ACC.config.encodedContextPath+"/checkout/multi/delivery-address/check-businesstype/"+businessType;$.ajax({url:Url,data:{"businesstype":businessType},type:"GET",success:function(response){if(response==="OK"){$(id).val(businessType);$(span).html(businessType);$("#businessTypeModal").modal("hide")}else{$("#js-businessType-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}},error:function(e){$("#js-businessType-error").html("<label  class='error'>"+ACC.jobtitleExists+"</label>")}})}}})},bindOrderTaxExemption:function(){$(document).on("click",".checkout-tax-exempt-section .js_tax-exempt input",function(e){if($(this).is(":checked")){$(".tax_exempt_states").show();}else{$(".tax_exempt_states").hide();}});},loadValidationJs:function(){ACC.customquote.bindPostCodeValidation();ACC.tkcheckoutaddress.bindUserUpsCarrierOption();ACC.checkout.checkForDeliveryMode()},wordInString:function(str,word){return new RegExp('\\b'+word+'\\b','i').test(str);},checkoutGencert:function(redirect){var selectMethodUrl='/checkout/multi/delivery-method/select-method';var statesSelected="";$(".js-select-states .checkbox-control:checked").each(function(checkedCount){if(checkedCount==0){statesSelected+=$(this).val();}else{statesSelected+='|'+$(this).val();}});var tokenToAvalara="";var customerExposureZone="";var setSuccess;var Seterror;var createNewCustomerFlag=ACC.createNewCustomer;var createNewCustomerFlag_boolean=(createNewCustomerFlag=="true");if(createNewCustomerFlag_boolean!=true){var customerResponseDto=JSON.parse(ACC.gencert.generateTokenForExistingCustomer());tokenToAvalara=customerResponseDto.token;customerExposureZone=customerResponseDto.exposureZone;}else if(createNewCustomerFlag_boolean){var customerResponseDto=JSON.parse(ACC.gencert.createCustomerAndGetTokenToAvalara());tokenToAvalara=customerResponseDto.token;customerExposureZone=customerResponseDto.exposureZone;}
if(tokenToAvalara===""||tokenToAvalara==='undefined'){sessionStorage.setItem("avalaraStatus","error");if(redirect=="Redirect"){window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);}else if(redirect=="SelectURL"){$("#js_billing_address_form").submit();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),$("#billAddress .upsError"),selectMethodUrl);}}else{if(typeof ___GCisCertExpress=="undefined"){$('.js_tax-exempt .checkbox-control').prop('checked',false);ACC.global.spinnerLoad($('.gencertModal .modal-dialog'));sessionStorage.setItem("avalaraStatus","error");if(redirect=="Redirect"){window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);}else if(redirect=="SelectURL"){$("#js_billing_address_form").submit();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),$("#billAddress .upsError"),selectMethodUrl);}}else{$('#addCertificateModal').modal('show');GenCert.init(document.getElementById("form_container"),{token:tokenToAvalara,ship_zone:statesSelected,edit_purchaser:true,onCertSuccess:function(){var url=ACC.config.encodedContextPath+'/checkout/multi/billing-address/userTaxExempt?CSRFToken='+ACC.config.CSRFToken;$.ajax({url:url,type:"POST",success:function(data){sessionStorage.setItem("avalaraStatus","success");if(redirect=="Redirect"){window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);}else if(redirect=="SelectURL"){var billUrl=$("#js_billing_address_form").attr("action");$(".js_billing_address_form").attr("action",billUrl)
$("#js_billing_address_form").submit();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),$("#billAddress .upsError"),selectMethodUrl);}}})},onCancel:function(){sessionStorage.setItem("avalaraStatus","error");if(redirect=="Redirect"){window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);}else if(redirect=="SelectURL"){$("#js_billing_address_form").submit();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),$("#billAddress .upsError"),selectMethodUrl);}},onCertFailure:function(){$('.js_tax-exempt .checkbox-control').prop('checked',false);sessionStorage.setItem("avalaraStatus","error");if(redirect=="Redirect"){window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);}else if(redirect=="SelectURL"){$("#js_billing_address_form").submit();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),$("#billAddress .upsError"),selectMethodUrl);}},onUpload:function(){var url=ACC.config.encodedContextPath+'/checkout/multi/billing-address/userTaxExempt?CSRFToken='+ACC.config.CSRFToken;$.ajax({url:url,type:"POST",success:function(data){sessionStorage.setItem("avalaraStatus","success");if(redirect=="Redirect"){window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);}else if(redirect=="SelectURL"){var billUrl=$("#js_billing_address_form").attr("action");$(".js_billing_address_form").attr("action",billUrl)
$("#js_billing_address_form").submit();}else{ACC.tkcheckoutaddress.billAddressAjax($('#billAddress'),$("#billAddress .upsError"),selectMethodUrl);}}})}});GenCert.show();}}},avalaraModalStatus:function(){$('.checkout-page__left .gencertModal').on('hidden.bs.modal',function(){$('.js_tax-exempt .checkbox-control').prop('checked',false);$(".tax_exempt_states").hide();var selectMethodUrl='/checkout/multi/delivery-method/select-method';window.location.replace(ACC.config.encodedContextPath+''+selectMethodUrl);});}};

ACC.checkoutregister={_autoload:["bindCheckbox","compareNPassword","destroySignUpModal"],bindCheckbox:function(){$(document).on("click","#easyFuture",function(){var enableregisteration=$('#easyFuture').is(":checked");$.ajax({url:ACC.config.encodedContextPath+'/checkout/enableCheckoutregister?enableregisteration='+enableregisteration,type:'GET',data:{enableregisteration:enableregisteration},success:function(data){}})})},compareNPassword:function(){$("#js-checkout-register-account").attr("disabled",true);$(document).on("keyup","#pwd, #checkPwd",function(e){var password=$("#pwd").val();var confirmPassword=$("#checkPwd").val();if(password.trim().length>0&&confirmPassword.trim().length>0&&password==confirmPassword&&$('.js-pass-exist-error').css('display')=='none'){$("#js-checkout-register-account").attr("disabled",false);}else{$("#js-checkout-register-account").attr("disabled",true);}})},destroySignUpModal:function(){$('#js-signupModal').on('hidden.bs.modal',function(){$('#js-signupModal').remove();})}};

ACC.orderdetail={_autoload:["bindValidEmailAddress","bindShareOrder","bindButtonDisabled","bindCreateProjectOrderList","bindEnableButton","bindReset","bindMonthForm","packagingSlip","bindMTROrder","bindConfirmationOrder","bindEmailBtnDisabled","cocDownload","showStatus","bindcancelorder","bindconfirmcancelorder","bindselectradio","searchOrderEnableButton"],bindReset:function(){$('#shareOrder').on('hidden.bs.modal',function(){$(this).find("textarea,select").val('').end().find("input[type=checkbox]").prop("checked","").end();$(this).find("textarea,select").val('').end().find("input[type=email]").val('').end();$('#emailListError').text('');$('#sendCopyErrorMsg').text('');$('.sharecart-modal__email-input').css('display','none');$('#checkbox-email').removeAttr("checked");$("button#shareOrderButton").attr("disabled","disabled")});$('#emailTrackingMtrs').on('hidden.bs.modal',function(){var defaultEmail=$('#orderMTRList').attr('placeholder');$("#orderMTRList").val(defaultEmail);$("button#emailTrackingMtrsBtn").removeAttr("disabled");$('#emailMTRListError').text('');$('#sendCopyErrorMsg').text('');});$('#emailReceiptModal').on('hidden.bs.modal',function(){var defaultEmail=$('#emailReceipts').attr('placeholder');$("#emailReceipts").val(defaultEmail);$("button#emailReceiptBtn").removeAttr("disabled");$('#emailReceiptListError').text('');$('#sendCopyErrorMsg').text('');});},bindValidEmailAddress:function(emailAddress){var regExp=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return regExp.test(emailAddress)},bindShareOrder:function(){$(document).on("click","#shareOrderButton",function(){var emails=$("#emailList").val();var ownEmail=$("#ownEmail").val();if(ACC.orderdetail.bindValidateEmailList(emails)){if($('.shareEmailCheckbox').is(":checked")){if(ACC.orderdetail.bindValidateOwnEmail(ownEmail)){emails=emails+','+ownEmail;ACC.orderdetail.bindAjax(emails)}}else{ACC.orderdetail.bindAjax(emails)}}})},bindAjax:function(emails){var url="/my-account/shareOrder"+"?CSRFToken="+ACC.config.CSRFToken;var code=$("#code").val();$.ajax({url:url,data:{emailList:emails,code:code},type:"POST",success:function(response){if(response=="success"){$('#shareOrder').modal('hide');$('#shareThankModal').modal()}},error:function(){}})},bindValidateOwnEmail:function(ownEmail){if(ownEmail==""){$('#sendCopyErrorMsg').text("Please provide a valid email address");$('#sendCopyErrorMsg').addClass("error");$('#sendCopyErrorMsg').show();return!1}else{if(!ACC.orderdetail.bindValidEmailAddress(ownEmail)){$('#sendCopyErrorMsg').text("Please provide a valid email address");$('#sendCopyErrorMsg').addClass("error");$('#sendCopyErrorMsg').show();return!1}else{$('#sendCopyErrorMsg').removeClass("error");$('#sendCopyErrorMsg').hide();return!0}}},bindValidateEmailList:function(emailList){var flag=!0;var emailArray=emailList.split(",");var commalen=(emailList.match(/,/g)||[]).length;var diffemailLen=(emailList.match(/@/g)||[]).length;for(var i=0;i<=(emailArray.length-1);i++){if(emailArray[i].trim()!=null&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$('#emailListError').text("Email id's must be comma separated");$('#emailListError').addClass("error");$('#emailListError').show();flag=!1;break}
if(!ACC.orderdetail.bindValidEmailAddress(emailArray[i].trim())){$('#emailListError').text("Please provide a valid email address");$('#emailListError').addClass("error");$('#emailListError').show();flag=!1;break}}
if(flag==!1){return!1}
return!0},bindButtonDisabled:function(){$('#emailList').keyup(function(){$("button#shareOrderButton").removeAttr("disabled")});$('#ownEmail').keyup(function(){$("button#shareOrderButton").removeAttr("disabled")})},bindCreateProjectOrderList:function(){$('.create-order-list').on('click',function(){var pcode=$(this).attr("id");var orderPageVal=$("#orderDetailList").val();$.ajax({url:ACC.config.encodedContextPath+"/tkwish-list/createprojectlist",data:{productCode:pcode},type:"GET",success:function(response){$("#createlist").html(response);if(orderPageVal){$('#orderdetail-projlist').removeClass('hide');$("#plp-projlist").addClass("hide")}
$("#createlist").modal("show")},error:function(){}})})},bindEnableButton:function(){$(document).on('keyup',"#wishListName",function(){var inputVal=$("#wishListName").val().length;if(inputVal==0||inputVal==""){$(".save-order-list").attr('disabled','disabled')}else{$(".save-order-list").removeAttr('disabled')}})},bindMonthForm:function(){$(document).on("change",".allOrderSelector",function(){$('#allOrderSelector').submit()});$(document).on("change",".openOrderSelector",function(){$('#openOrderSelector').submit()});$(document).on("change",".cancelOrderSelector",function(){$('#cancelOrderSelector').submit()})},packagingSlip:function(){$(document).on("click",".js-packagingslip",function(e){var trackingId=$(this).data("trackid");var ordercode=$(this).data("ordernumber");$.ajax({url:ACC.config.encodedContextPath+"/my-account/packagingslip",type:"GET",data:{trackingID:trackingId,orderCode:ordercode},success:function(data){$("#packagingSlip").html(data);$("#packagingSlip").modal("show")},error:function(data){}})})},bindMTROrder:function(){$(document).on("click","#emailTrackingMtrsBtn",function(){var emails=$("#orderMTRList").val();if(ACC.orderdetail.bindValidateMTREmailList(emails)){ACC.orderdetail.bindMTREmail(emails)}})},bindMTREmail:function(emails){var url="/my-account/shareMTREmail"+"?CSRFToken="+ACC.config.CSRFToken;var code=$("#code").val();$.ajax({url:url,data:{emailList:emails,code:code},type:"POST",success:function(response){if(response=="success"){$('#emailTrackingMtrs').modal('hide');$('#shareThankModal').modal()}},error:function(){}})},bindConfirmationOrder:function(){$(document).on("click","#emailReceiptBtn",function(){var emails=$("#emailReceipts").val();if(ACC.orderdetail.bindValidateReceiptEmailList(emails)){ACC.orderdetail.bindConfirmationEmail(emails)}})},bindConfirmationEmail:function(emails){var url="/my-account/shareConfirmationEmail"+"?CSRFToken="+ACC.config.CSRFToken;var code=$("#code").val();$.ajax({url:url,data:{emailList:emails,code:code},type:"POST",success:function(response){if(response=="success"){$('#emailReceiptModal').modal('hide');$('#shareThankModal').modal()}},error:function(){}})},bindEmailBtnDisabled:function(){$('#emailReceipts').keyup(function(){var emails=$("#emailReceipts").val();if(emails===''){$("button#emailReceiptBtn").attr('disabled','disabled');}else{$("button#emailReceiptBtn").removeAttr("disabled");}});$('#orderMTRList').keyup(function(){var emails=$("#orderMTRList").val();if(emails===''){$("button#emailTrackingMtrsBtn").attr('disabled','disabled');}else{$("button#emailTrackingMtrsBtn").removeAttr("disabled");}})},bindValidateReceiptEmailList:function(emailList){var flag=!0;var emailArray=emailList.split(",");var commalen=(emailList.match(/,/g)||[]).length;var diffemailLen=(emailList.match(/@/g)||[]).length;for(var i=0;i<=(emailArray.length-1);i++){if(emailArray[i].trim()!=null&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$('#emailReceiptListError').text("Email id's must be comma separated");$('#emailReceiptListError').addClass("error");$('#emailReceiptListError').show();flag=!1;break}
if(!ACC.orderdetail.bindValidEmailAddress(emailArray[i].trim())){$('#emailReceiptListError').text("Please provide a valid email address");$('#emailReceiptListError').addClass("error");$('#emailReceiptListError').show();flag=!1;break}}
if(flag==!1){return!1}
return!0},bindValidateMTREmailList:function(emailList){var flag=!0;var emailArray=emailList.split(",");var commalen=(emailList.match(/,/g)||[]).length;var diffemailLen=(emailList.match(/@/g)||[]).length;for(var i=0;i<=(emailArray.length-1);i++){if(emailArray[i].trim()!=null&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$('#emailMTRListError').text("Email id's must be comma separated");$('#emailMTRListError').addClass("error");$('#emailMTRListError').show();flag=!1;break}
if(!ACC.orderdetail.bindValidEmailAddress(emailArray[i].trim())){$('#emailMTRListError').text("Please provide a valid email address");$('#emailMTRListError').addClass("error");$('#emailMTRListError').show();flag=!1;break}}
if(flag==!1){return!1}
return!0},cocDownload:function(){$(document).on("click","#js-coc",function(e){var doc=new jsPDF();$("#pdfcontent").empty().append($("#content").html());var source=$("#pdfcontent").get(0);$(source).find('img').attr("width","55").attr("height","28");doc.fromHTML(source,15,15,{'width':170},function(dispose){doc.save('coc.pdf')})})},bindcancelorder:function(){$(document).on("click",".jsordercancel",function(){var orderid=$(this).attr("data-value");$.ajax({url:ACC.config.encodedContextPath+"/my-account/order/"+orderid+"/requestcancel",type:"GET",contentType:"application/json",success:function(response){$('#ordercancelModal').remove();$('body').append(response);$('#ordercancelModal').modal('show');}});});},bindconfirmcancelorder:function(){var fullcancelstatus=false;var changevalue;$(document).on("click",".btn-fullcancel",function(e){e.preventDefault();$('.jsqty-update').val('0');$('.js-select-reason').removeAttr('disabled');fullcancelstatus=true;$('.jsqty-update').attr('data-change','true');$('.btn-sub').attr('disabled','true');$('.btn-add').removeAttr('disabled');$('.js-select-reason').focus();});$(document).on("click",".btn-sub",function(e){e.preventDefault();let actualval=parseInt($(this).closest('div').find('.jsqty-update').attr('data-val'));let subval=parseInt($(this).closest('div').find('.jsqty-update').val());if(subval>=1){subval=subval-1;if(subval==0){$(this).attr('disabled','true');}}
$(this).closest('div').find('.jsqty-update').val(subval);$(this).closest('div').find('.btn-add').removeAttr('disabled');if(subval==actualval){$(this).closest('div').find('.jsqty-update').attr('data-change','false');}
else{$(this).closest('div').find('.jsqty-update').attr('data-change','true');}
$("form#orderCancelForm .jsqty-update").each(function(){var itemval=$(this).attr('data-change');if(itemval=='true'){changevalue=false;return false;}
else{changevalue=true;}});if(changevalue==false){$('.js-select-reason').removeAttr('disabled');}
else{$('.js-select-reason').prop('disabled',true);$('.jsconfirmcancelorder').prop('disabled',true);}});$(document).on("click",".btn-add",function(e){e.preventDefault();let actualval=parseInt($(this).closest('div').find('.jsqty-update').attr('data-val'));let subval=parseInt($(this).closest('div').find('.jsqty-update').val());if(subval<actualval){subval=subval+1;if(subval==actualval){$(this).attr('disabled','true');}}
$(this).closest('div').find('.jsqty-update').val(subval);$(this).closest('div').find('.btn-sub').removeAttr('disabled');if(subval==actualval){$(this).closest('div').find('.jsqty-update').attr('data-change','false');}
else{$(this).closest('div').find('.jsqty-update').attr('data-change','true');}
$("form#orderCancelForm .jsqty-update").each(function(){var itemval=$(this).attr('data-change');if(itemval=='true'){changevalue=false;return false;}
else{changevalue=true;}});if(changevalue==false){$('.js-select-reason').removeAttr('disabled');}
else{$('.js-select-reason').prop('disabled',true);$('.js-select-reason').prop('selectedIndex',0);$('.jsconfirmcancelorder').prop('disabled',true);}});$(document).on("change",".js-select-reason",function(){$('.jsconfirmcancelorder').removeAttr('disabled');});$(document).on("change",".jsqty-update",function(){let actualval=parseInt($(this).attr('data-val'));let subval=parseInt($(this).val());if(subval>actualval||isNaN(subval)){$(this).val(actualval);subval=actualval;}
if($(this).val()==0){$(this).closest('div').find('.btn-sub').prop('disabled',true);$(this).closest('div').find('.btn-add').prop('disabled',false);}
else if(subval==actualval){$(this).closest('div').find('.btn-sub').prop('disabled',false);$(this).closest('div').find('.btn-add').prop('disabled',true);}
else if(subval<actualval&&subval!=0){$(this).closest('div').find('.btn-sub').prop('disabled',false);$(this).closest('div').find('.btn-add').prop('disabled',false);}
if(subval==actualval){$(this).closest('div').find('.jsqty-update').attr('data-change','false');}
else{$(this).closest('div').find('.jsqty-update').attr('data-change','true');}
$("form#orderCancelForm .jsqty-update").each(function(){var itemval=$(this).attr('data-change');if(itemval=='true'){changevalue=false;return false;}
else{changevalue=true;}});if(changevalue==false){$('.js-select-reason').removeAttr('disabled');}
else{$('.js-select-reason').prop('disabled',true);$('.js-select-reason').prop('selectedIndex',0);$('.jsconfirmcancelorder').prop('disabled',true);}});$(document).on('wheel','.jsqty-update',function(e){let actualval=parseInt($(this).attr('data-val'));let subval=parseInt($(this).val());var delta=e.originalEvent.deltaY;if(delta>0){subval=subval-1;if(subval==0){$(this).closest('div').find('.btn-sub').prop('disabled',true);$(this).closest('div').find('.btn-add').prop('disabled',false);}
else if(subval<actualval){$(this).closest('div').find('.btn-add').prop('disabled',false);}}
else{subval=subval+1;if(subval<actualval){$(this).closest('div').find('.btn-sub').prop('disabled',false);}
else if(subval==actualval){$(this).closest('div').find('.btn-add').prop('disabled',true);$(this).closest('div').find('.jsqty-update').attr('data-change','false');$(this).closest('div').find('.btn-sub').prop('disabled',false);}
if(subval>actualval){return false}}
if(subval!=actualval){$(this).closest('div').find('.jsqty-update').attr('data-change','true');}
$('.jsqty-update').removeAttr('disabled');$("form#orderCancelForm .jsqty-update").each(function(){var itemval=$(this).attr('data-change');if(itemval=='true'){changevalue=false;return false}
else{changevalue=true;}});if(changevalue==false){$('.js-select-reason').removeAttr('disabled');}
else{$('.js-select-reason').prop('disabled',true);$('.js-select-reason').prop('selectedIndex',0);$('.jsconfirmcancelorder').prop('disabled',true);}});$(document).on('keyup','.jsqty-update',function(event){var key=event.keyCode||event.charCode;var charcodestring=String.fromCharCode(event.which);var txtVal=$(this).val();var maxlength=$(this).attr('data-val');var regex=new RegExp('^[0-9]+$');if(key==8||key==46||key==13||key==37||key==39||key==9){return true;}
if(event.keyCode==40){if(txtVal>=1){txtVal--;if(txtVal==0){$(this).closest('div').find('.btn-sub').prop('disabled',true);}}
if(txtVal<maxlength){$(this).closest('div').find('.btn-add').prop('disabled',false);}
$(this).val(txtVal)}
if(event.keyCode==38){if(txtVal==maxlength){$(this).closest('div').find('.btn-add').prop('disabled',true);$(this).closest('div').find('.jsqty-update').attr('data-change','false');$(this).closest('div').find('.btn-sub').prop('disabled',false);}}
if(txtVal!=maxlength){$(this).closest('div').find('.jsqty-update').attr('data-change','true');}
$("form#orderCancelForm .jsqty-update").each(function(){var itemval=$(this).attr('data-change');if(itemval=='true'){changevalue=false;return false;}
else{changevalue=true;}});if(changevalue==false){$('.js-select-reason').removeAttr('disabled');}
else{$('.js-select-reason').prop('disabled',true);$('.js-select-reason').prop('selectedIndex',0);$('.jsconfirmcancelorder').prop('disabled',true);}
if(!regex.test(charcodestring)){event.preventDefault();return false;}
return true;});$(document).on("click",".jsconfirmcancelorder",function(e){e.preventDefault();$('#ordercancelModal').modal('hide');$("form#orderCancelForm .jsqty-update").each(function(){var itemval=parseInt($(this).val());if(itemval!=0){fullcancelstatus=false;return false;}
else if(itemval==0){fullcancelstatus=true;}});if(fullcancelstatus==true){$('#ordercancelconfirmModal').modal('show');}
else{$('#orderpartialcancelconfirmModal').modal('show');}});$(document).on("click",".js-btn-confirm-cancel",function(){$('#orderCancelForm').submit();});},bindselectradio:function(){var val=$('#orderSearchBy').val();$("input[name=radioselect][value='"+val+"']").attr('checked',true);$(document).on("click",".radioselect",function(){$('#orderSearchBy').val($(this).val());});},showStatus:function(){$(".status-link").on("click",function(e){e.preventDefault();var tableRow=$(this).parent(".asm-details").find("table tr:nth-child(n+3)");if($(this).hasClass("less-status")){tableRow.hide();$(this).removeClass("less-status");$(this).addClass("more-status");$(this).find('span').html("More");}
else{tableRow.show();$(this).removeClass("more-status");$(this).addClass("less-status");$(this).find('span').html("Less");}})},searchOrderEnableButton:function(){$(document).on('keyup',"#orderCode",function(){var inputVal=$('#orderCode').val().length;if(inputVal==0||inputVal==""){$(".orderSearch").attr('disabled','disabled')}else{$(".orderSearch").removeAttr('disabled')}})}};

ACC.milltestreportpage={_autoload:["searchMillTestOrderNum","clearMillTestSearch",],searchMillTestOrderNum:function(){$(".js-milltestsearch").keypress(function(event){var faxValidation=new RegExp("^[0-9]+$");if(faxValidation.test(event.key)||event.keyCode==8||event.keyCode==13){return}else{event.preventDefault()}})},clearMillTestSearch:function(){$(".js-clear-mill-button").click(function(event){document.getElementById("searchOrderMill").reset();window.location.reload()})},};

ACC.projectlist={_autoload:["multipleemailkeypressbind","sharelistbind","multipleemailkeyupbind"],multipleemailkeypressbind:function(){$(document).on("keypress","#multiple-email",function(e){if(e.which===32)
return!1})},sharelistbind:function(){$(document).on("hidden.bs.modal","#shareprojectlist,#sharequotedetails",function(){$(this).find("textarea,select").val('').end().find("input[type=checkbox]").prop("checked","").end();$(this).find("textarea,select").val('').end().find("input[type=email]").val('').end();$("#singleErrorMsg").text("");$("#errorMsg").text("");$(".sharecart-modal__email-input").css("display","none");$("#checkbox-email").removeAttr("checked");$("button#shareprojectlistbtn").attr("disabled","disabled")})},multipleemailkeyupbind:function(){$(document).on("keyup","#save-projectlist-email,#multiple-email",function(){if($(this).val()==""){$("button#shareprojectlistbtn").attr("disabled","disabled")}else{$("button#shareprojectlistbtn").removeAttr("disabled")}})}};

ACC.quote={_autoload:[["bindAddComment",$("#js-quote-comments").length!=0],"quoteCommentFormValidation","submitQuotePastMonthForm","bindQuoteSearchFormValidation","bindQuoteStatus","bindClearSearch","clickRequestModification","quoteCodeData","submitQuoteRequestModification","bindQuoteEmail","bindCancelQuote","clickDiscount","bindQuoteDiscount","shareprojectlist","bindcustomerticketingaddonsSearch","bindTextBoxErrorMessage","bindcustomerticketingaddonsFilter","submitProductDiscount","binddropdownTicketStatus","submitEmailRequest","downloadQuoteAsPdf","showHideQuoteAdress","formSubmitBtnControl","buyQuote"],quoteCommentFormValidation:function(){$("form[name='tKQuoteCommentForm']").validate({onkeyup:!1,rules:{comment:{required:!0},},messages:{comment:{required:ACC.requestModification},},})},bindQuoteDiscount:function(e){ACC.quote.handleDiscountModal({modalWindowSelector:".js-quote-discount-modal",modalTotalDataAttributeName:"quote-modal-total",modalQuoteDiscountDataAttributeName:"quote-modal-quote-discount",modalCurrencyDataAttributeName:"quote-modal-currency",cancelButtonSelector:"#js-quote-discount-modal #cancelButton",})},handleDiscountModal:function(options){var modalWindow=$(options.modalWindowSelector);var total=parseFloat(modalWindow.data(options.modalTotalDataAttributeName));var quoteDiscount=parseFloat(modalWindow.data(options.modalQuoteDiscountDataAttributeName));var currency=modalWindow.data(options.modalCurrencyDataAttributeName);$(options.cancelButtonSelector).click(function(e){e.preventDefault();ACC.colorbox.close()});function enableSubmit(){$("#js-quote-discount-by-percentage").css('border-color','#cccccc');$("#js-quote-discount-by-amount").css('border-color','#cccccc');$("#js-quote-discount-adjust-total").css('border-color','#cccccc');$("#submitButton").prop("disabled",!1)}
function resetIntial(val){if(isNaN(parseFloat(val))){val=0.00;val=val.toFixed(2)}
return val}
function updateByPercentage(){var percent=parseFloat($("#js-quote-discount-by-percentage").val());if(percent>100||percent<0){$("#js-quote-discount-by-percentage").css('border-color','red');$("#submitButton").prop("disabled",!0)}else{enableSubmit()}
var discountAmount=total*percent/100;var discountAmount=discountAmount.toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));var remainTotal=total-discountAmount;var remainTotal=remainTotal.toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal));$("#js-quote-discount-rate").val(resetIntial(percent));$("#js-quote-discount-type").val("PERCENT");updateNewTotal(remainTotal)}
$(document).on("keyup","#js-quote-discount-by-percentage",updateByPercentage);$(document).on("change","#js-quote-discount-by-percentage",updateByPercentage);$(document).on("blur","#js-quote-discount-by-percentage",reset);$(document).on("keypress","#js-quote-discount-by-percentage",holdPreviousValue);function reset(){var per=$('#js-quote-discount-by-percentage').val();var amt=$('#js-quote-discount-by-amount').val();var tot=$('#js-quote-discount-adjust-total').val();if(per=='')
$('#js-quote-discount-by-percentage').val('0.00');if(amt=='')
$('#js-quote-discount-by-amount').val('0.00');if(tot==''||tot==0.00)
$('#js-quote-discount-adjust-total').val(total)}
function holdPreviousValue(event){var $this=$(this);if((event.which!=46||$this.val().indexOf('.')!=-1)&&((event.which<48||event.which>57)&&(event.which!=0&&event.which!=8))){event.preventDefault()}
var text=$(this).val();if((event.which==46)&&(text.indexOf('.')==-1)){setTimeout(function(){if($this.val().substring($this.val().indexOf('.')).length>3){$this.val($this.val().substring(0,$this.val().indexOf('.')+3))}},1)}
if((text.indexOf('.')!=-1)&&(text.substring(text.indexOf('.')).length>2)&&(event.which!=0&&event.which!=8)&&($(this)[0].selectionStart>=text.length-2)){event.preventDefault()}}
function updateByAmount(){var discountAmount=parseFloat($("#js-quote-discount-by-amount").val());if(discountAmount>total||discountAmount<0){$("#js-quote-discount-by-amount").css('border-color','red');$("#submitButton").prop("disabled",!0)}else{enableSubmit()}
var percent=(discountAmount/total)*100;var percent=percent.toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));var remainTotal=total-discountAmount;var remainTotal=remainTotal.toFixed(2);$("#js-quote-discount-adjust-total").val(resetIntial(remainTotal));$("#js-quote-discount-rate").val(resetIntial(discountAmount));$("#js-quote-discount-type").val("ABSOLUTE");updateNewTotal(remainTotal)}
$(document).on("keyup","#js-quote-discount-by-amount",updateByAmount);$(document).on("change","#js-quote-discount-by-amount",updateByAmount);$(document).on("keypress","#js-quote-discount-by-amount",holdPreviousValue);$(document).on("blur","#js-quote-discount-by-amount",reset);function updateByAdjustTotal(){var adujstTotal=parseFloat($("#js-quote-discount-adjust-total").val());if(adujstTotal>total||adujstTotal<0){$("#js-quote-discount-adjust-total").css('border-color','red');$("#submitButton").prop("disabled",!0)}else{enableSubmit()}
var discountAmount=total-adujstTotal;var discountAmount=discountAmount.toFixed(2);$("#js-quote-discount-by-amount").val(resetIntial(discountAmount));var percent=(discountAmount/total)*100;var percent=percent.toFixed(2);$("#js-quote-discount-by-percentage").val(resetIntial(percent));$("#js-quote-discount-rate").val(resetIntial(adujstTotal));$("#js-quote-discount-type").val("TARGET");updateNewTotal(adujstTotal)}
$(document).on("keyup","#js-quote-discount-adjust-total",updateByAdjustTotal);$(document).on("change","#js-quote-discount-adjust-total",updateByAdjustTotal);$(document).on("keypress","#js-quote-discount-adjust-total",holdPreviousValue);$(document).on("blur","#js-quote-discount-adjust-total",reset);function updateNewTotal(newTotal){if(isNaN(parseFloat(newTotal))){newTotal=total}
var newTotal=parseFloat(newTotal).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,'$1,');$("#js-quote-discount-new-total").text(currency.concat(newTotal))}},submitQuotePastMonthForm:function(){$(document).on("change",".js-quote-month-selector",function(){var month=$(this).val();var status=$(this).data('status');$('#js-month-'+status).val(month);$('#quotemonthform_'+status).submit()})},bindQuoteSearchFormValidation:function(){$("#quote-searchform").validate({onkeyup:!1,rules:{quoteCode:{required:!0}},messages:{quoteCode:{required:"",}},errorPlacement:function(error,element){if(!$.trim(error.text())==""){error.insertAfter(element)}else{element.nextAll(".error").remove()}}})},bindClearSearch:function(){$(document).on("click","#js-quote-clrsearch",function(){var status=$("ul.js-current-tab li.active").data("status");var month=$(this).data("month");window.location.href=ACC.config.encodedContextPath+"/my-account/my-quotes/getquotes?status="+status+"&month="+month})},bindQuoteStatus:function(){$(document).on("click",".js-quote-tab",function(){var status=$(this).data("status");var url=ACC.config.encodedContextPath+"/my-account/my-quotes/set-status?status="+status;$.get(url,function(){})})},clickRequestModification:function(){$("#requestQuoteModal").modal({backdrop:'static',keyboard:false,show:false,modal:true});$("#requestQuoteModal").on("shown.bs.modal",function(){$("body").addClass("modal-open");$("#requestQuoteModal .js-submit-request-modification").prop("disabled",true);$("#requestQuoteModal .js-clear-comment").val("");});$("#requestQuoteModal").on("hide.bs.modal",function(){if($("#requestQuoteModal").attr("data-requestSubmitted")==="true"){window.location.reload();}});},quoteCodeData:function(){$(".js-quote-code").click(function(event){var quoteId=$(this).data("id");$('#js-quote-code').val(quoteId);$('#quoteId').val(quoteId);$('#comment').val("");$("#error").css("display","none");$("form[name='tKQuoteCommentForm'] label.error").css("display","none");$("form[name='tKQuoteCommentForm'] textarea.error").removeClass("error")})},submitQuoteRequestModification:function(){$(document).on('click','.js-submit-request-modification',function(e){var commentQuoteForm=$("#requestQuoteModalForm").valid();if(commentQuoteForm){$('#btn_requestModification_submit').prop("disabled",!0);var Url=$('#requestQuoteModalForm').attr('action');$.ajax({url:Url,type:"POST",data:$("#requestQuoteModalForm").serialize(),success:function(response){$("#requestQuoteModal").attr("data-requestSubmitted","true");$(".request-quote-modal__form").hide();$(".request-quote-modal__thanks").removeClass("hide");}})}})},bindQuoteEmail:function(){$(document).on("click",".shareQuoteEmail",function(){var emails=$("#multiple-email").val();var flag=!1;var commalen=(emails.match(/,/g)||[]).length;var diffemailLen=(emails.match(/@/g)||[]).length;var emailArray=emails.split(",");for(var i=0;i<=(emailArray.length-1);i++){if(ACC.quote.isValidProjectListEmailAddress(emailArray[i].trim())){$('#errorMsg').removeClass("error");$('#errorMsg').hide();flag=!0}else if((emailArray[i].trim())!=""&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$('#errorMsg').text("Email id's must be comma separated");$('#errorMsg').addClass("error");$('#errorMsg').show();flag=!1;break}else{$('#shareprojectlist').css('display','block');$('#contactusModal').css('display','none');$('#errorMsg').text("Please enter a valid email address");$('#errorMsg').addClass("error");$('#errorMsg').show();flag=!1;break}}
var secondflag=ACC.quote.validateProjectListEmail();if(flag==!0&&secondflag==!0){var email=$("#multiple-email").val();var copyemail=$("#save-projectlist-email").val();var seperator=",";if(copyemail!=""){email=email+seperator+copyemail}
var url="/my-account/my-quotes/shareQuote";var code=$("#code").val();if(email!=""){var postData={emailList:email,code:code,CSRFToken:ACC.config.CSRFToken};$.post(url,postData).done(function(data){});$('#sharequotedetails').modal('hide');$('#contactusModal').modal()}}})},clickDiscount:function(){$(document).on("shown.bs.modal","#asmModal",function(event){var modalSelector=$(this);var total=parseFloat(modalSelector.data("quote-modal-total"));var quoteDiscount=parseFloat(modalSelector.data("quote-modal-quote-discount"));var currency=modalSelector.data("quote-modal-currency");var percent=(quoteDiscount/total)*100;var adjustTotal=(total-quoteDiscount).toFixed(2);$("#js-quote-discount-by-percentage").val(percent.toFixed(2));$("#js-quote-discount-by-amount").val(quoteDiscount.toFixed(2));$("#js-quote-discount-adjust-total").val(adjustTotal);$("body").addClass("modal-open");})},bindCancelQuote:function(){$(document).on("click","#js-quote-cancelbtn",function(){var url=$(this).data("action")+"?CSRFToken="+ACC.config.CSRFToken;$.post(url,function(data){window.location.href=ACC.config.encodedContextPath+"/my-account/my-quotes"})})},isValidProjectListEmailAddress:function(emailAddress){var pattern=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return pattern.test(emailAddress)},validateProjectListEmail:function(){if($("#save-projectlist-email").val()==""&&$("#checkbox-email").is(":checked")){$("#singleErrorMsg").text("Please enter a valid email address");$("#singleErrorMsg").addClass("error");$("#singleErrorMsg").show();return!1}else if($("#save-projectlist-email").val()==""){return!0}else if(ACC.quote.isValidProjectListEmailAddress($("#save-projectlist-email").val())){$("#singleErrorMsg").removeClass("error");$("#singleErrorMsg").hide();return!0}else{$("#singleErrorMsg").text("Please enter a valid email address");$("#singleErrorMsg").addClass("error");$("#singleErrorMsg").show();return!1}},shareprojectlist:function(){$(document).on("click",".share-project-list",function(){var emails=$("#multiple-email").val();var flag=!1;var commalen=(emails.match(/,/g)||[]).length;var diffemailLen=(emails.match(/@/g)||[]).length;var emailArray=emails.split(",");for(var i=0;i<=(emailArray.length-1);i++){if(ACC.quote.isValidProjectListEmailAddress(emailArray[i].trim())){$("#errorMsg").removeClass("error");$("#errorMsg").hide();flag=!0}else if((emailArray[i].trim())!=""&&diffemailLen>1&&(commalen==0||commalen!=diffemailLen-1)){$("#errorMsg").text("Email id's must be comma separated");$("#errorMsg").addClass("error");$("#errorMsg").show();flag=!1;break}else{$("#shareprojectlist").css("display","block");$("#contactusModal").css("display","none");$("#errorMsg").text("Please enter a valid email address");$("#errorMsg").addClass("error");$("#errorMsg").show();flag=!1;break}}
var secondflag=ACC.quote.validateProjectListEmail();if(flag==!0&&secondflag==!0){var email=$("#multiple-email").val();var copyemail=$("#save-projectlist-email").val();var seperator=",";if(copyemail!=""){email=email+seperator+copyemail}
var wishListNames=$(".creatlistcheckbox:checked").map(function(){return $(this).data("name")}).get();if(email!=""){var url=ACC.config.encodedContextPath+"/my-account/share-projectlist-email";var postData={email:email,projectLists:encodeURIComponent(wishListNames.join()),CSRFToken:ACC.config.CSRFToken};$.post(url,postData).done(function(data){console.log(data)})}
$("#shareprojectlist").modal("hide");$("#contactusModal").modal()}})},bindAddComment:function(){$(document).on("keypress",'#js-quote-comments #comment',function(event){var key=event.keyCode;if(key==13){if($('#comment').val().trim()==''){return!1}
event.preventDefault();ACC.quote.quoteCommentSubmit($('#comment').val());$('#comment').val("");return!1}else{return!0}})},quoteCommentSubmit:function(comment){var quoteComments=$("#js-quote-comments");var addCommentUrl=quoteComments.data("quote-base-link")+"comment"+"?CSRFToken="+ACC.config.CSRFToken;var showAllComments=quoteComments.data("show-all-comments");$.ajax({url:addCommentUrl,data:{comment:comment},type:"post",success:function(response){ACC.quote.onCommentSuccess(showAllComments)}})},onCommentSuccess:function(showAllComments){$("#commentListDiv").load(location.href+" #commentListDiv",function(){ACC.quote.displayComments(""+showAllComments)})},bindcustomerticketingaddonsSearch:function(){$(document).on("click","#searchTicket",function(event){event.preventDefault();$.ajax({url:ACC.config.encodedContextPath+"/my-account/support-tickets/search/"+$("#searchInput").val(),type:"GET",success:function(data){$("#support-ticket-body").html(data)},error:function(){console.log("error")}})})},bindTextBoxErrorMessage:function(){var previousSubjectLength;var previousMessageLength;$("#message").keyup(function(){if($(this).val().length==previousMessageLength&&previousMessageLength>=500){$("#myidmessage").text(ACC.aboveFiveHundredChar).show();$("#addTicket").attr("disabled","disabled");$("#upMessage").text(ACC.aboveFiveHundredChar).show();$("#updateTicket").attr("disabled","disabled")}else{$("#myidmessage").hide();$("#addTicket").removeAttr("disabled");$("#upMessage").hide();$("#updateTicket").removeAttr("disabled")}
previousMessageLength=$(this).val().length});$("#subject").keyup(function(){if($(this).val().length==previousSubjectLength&&previousSubjectLength>=150){$("#supportTicketSubjectErrorMessage").text(ACC.aboveOneFiftyChar).show();$("#addTicket").attr("disabled","disabled")}else{$("#supportTicketSubjectErrorMessage").hide();$("#addTicket").removeAttr("disabled")}
previousSubjectLength=$(this).val().length});$("#subject").on('blur',function(){$("#supportTicketSubjectErrorMessage").hide();$("#addTicket").removeAttr("disabled")});$("#message").on('blur',function(){$("#myidmessage").hide();$("#addTicket").removeAttr("disabled");$("#upMessage").hide();$("#updateTicket").removeAttr("disabled")})},bindcustomerticketingaddonsFilter:function(){$(document).on("click",".filter-Ticket a",function(event){event.preventDefault();var status=$(this).data("index");$.ajax({url:"/my-account/support-tickets/filter/?status="+status,type:"GET",success:function(data){$("#support-ticket-body").html(data)},error:function(){}})})},binddropdownTicketStatus:function(){$(".tstatus .dropdown-select").on("click",".dropdown-menu li a",function(){var target=$(this).html();$(this).parents(".dropdown-menu").find("li").removeClass("active");$(this).parent("li").addClass("active");$(this).parents(".dropdown-select").find(".dropdown-toggle").html(target+" <span class=\"glyphicon glyphicon-menu-down\"></span>")})},submitProductDiscount:function(){$(document).on("submit","#quoteDiscountForm",function(e){e.preventDefault();var $this=$(this);var Url=$this.attr('action');$.ajax({url:Url,type:"POST",data:$this.serialize(),success:function(data){$("#asmModal").modal("hide");$(".modal-backdrop").remove();$("body").removeClass("modal-open");var dataCartSummary=$(data).find('.cart-summary-parent').html();console.log(dataCartSummary);$('.cart-summary-parent').html(dataCartSummary);},error:function(){console.log("error")}})})},submitEmailRequest:function(){$(document).on("submit","#quoteSendCustomerEmailForm",function(e){e.preventDefault();var $this=$(this);$this.find('.quote-btn').prop('disabled',true);var Url=$this.attr('action');$.ajax({url:Url,type:"POST",data:$this.serialize(),success:function(response){console.log("email sent successfully");$this.find('.quote-btn').prop('disabled',false);},error:function(response){console.log("failed to send email");$this.find('.quote-btn').prop('disabled',false);}})})},downloadQuoteAsPdf:function(){$(document).on("click",".js-download-quote",function(){var url="/en/my-account/my-quotes/downloadQuoteAsPdf";var code=$("#code").val();$.ajax({url:url,type:"GET",xhrFields:{responseType:'blob'},data:{code:code,CSRFToken:ACC.config.CSRFToken},success:function(response,xhr,textStatus){var quoteCode=textStatus.getResponseHeader("quoteCode");if(window.navigator&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(response,'Quote-'+quoteCode+'.pdf');}else{var url=window.URL.createObjectURL(response);var link=document.createElement('a');link.style.display='none';link.href=url;link.download='Quote-'+quoteCode+'.pdf';document.body.appendChild(link);link.click();window.URL.revokeObjectURL(url);}},error:function(response){console.log("failed to generate pdf");}})})},showHideQuoteAdress:function(){$(document).on("click",".see-more-link",function(){$('.shipping-address,.billing-address').toggleClass('hidden-xs');$(this).addClass('hidden');$('.see-less-link').removeClass('hidden');})
$(document).on("click",".see-less-link",function(){$('.shipping-address,.billing-address').toggleClass('hidden-xs');$(this).addClass('hidden');$('.see-more-link').removeClass('hidden');})},formSubmitBtnControl:function(){$(document).on("keyup",".js-formsubmit-field",function(){if(jQuery.trim($(this).val()).length==0){$(this).closest(".js-formsubmit").find(".js-formsubmit-btn").prop("disabled",true).attr("disabled",true);}else{$(this).closest(".js-formsubmit").find(".js-formsubmit-btn").prop("disabled",false).removeAttr("disabled",false);}});},buyQuote:function(){$(document).on("click",".quote-btn",function(){let stringifyData,processedData,quoteID;quoteID=$(this).attr("data-code");quoteID?stringifyData=$("#gaData-QuoteData-"+quoteID).html():'';stringifyData?processedData=JSON.parse(decodeURIComponent(stringifyData).replaceAll('+',' ')):'';processedData?ACC.ga4.addMultipleItemToCart(processedData):'';});},};
;(function(window,document){'use strict';var nextTick,addEvent;nextTick=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};addEvent=(function(){if(document.addEventListener){return function addStandardEventListener(el,eventName,fn){return el.addEventListener(eventName,fn,false);};}
else{return function addIEEventListener(el,eventName,fn){return el.attachEvent('on'+eventName,fn);};}})();function Imager(elements,opts){var self=this,doc=document;opts=opts||{};this.elements=elements||'.js-responsive-image';this.className=opts.className||'js-responsive-image-replaced';this.onResize=opts.hasOwnProperty('onResize')?opts.onResize:true;this.onImagesReplaced=opts.onImagesReplaced||function(){};this.eles=$(elements);nextTick(function(){self.init();});}
Imager.prototype.init=function(){this.checkImagesNeedReplacing(this.eles);if(this.onResize){this.registerResizeEvent();}};Imager.prototype.checkImagesNeedReplacing=function(images){var self=this;if(!this.isResizing){this.isResizing=true;images.each(function(){self.replaceImagesBasedOnScreenDimensions(this);});this.isResizing=false;this.onImagesReplaced(images);}};Imager.prototype.replaceImagesBasedOnScreenDimensions=function(image){var src,availableWidths=[],srcARRAY,cwidth;if($(image).attr("data-media")!=undefined){var eMedia=$(image).attr("data-media")
$(image).removeAttr("data-media")
eMedia=$.parseJSON(eMedia)
$.each(eMedia,function(key,value){availableWidths.push(parseInt(key));});$(image).data("width",availableWidths);$(image).data("media",eMedia);}
srcARRAY=$(image).data("media");cwidth=Imager.getClosestValue(window.innerWidth,$.extend([],$(image).data("width")));if(image.src==srcARRAY[cwidth]){return;}
image.src=srcARRAY[cwidth];};Imager.getClosestValue=function getClosestValue(baseValue,candidates){if(baseValue>=candidates[0]&&candidates.length>1){candidates.shift()
getClosestValue(baseValue,candidates)}
return candidates[0];}
Imager.prototype.registerResizeEvent=function(){var self=this;addEvent(window,'resize',function(){self.checkImagesNeedReplacing(self.eles);});};if(typeof module==='object'&&typeof module.exports==='object'){module.exports=exports=Imager;}else if(typeof define==='function'&&define.amd){define(function(){return Imager;});}else if(typeof window==='object'){window.Imager=Imager;}}(window,document));

(function(t,e,i){function n(i,n,o){var r=e.createElement(i);return n&&(r.id=Z+n),o&&(r.style.cssText=o),t(r)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function r(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function h(t){var e=W.length,i=(z+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?("x"===e?E.width():o())/100:1)*parseInt(t,10))}function s(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function l(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function d(t){"contains"in y[0]&&!y[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),y.focus())}function c(t){c.str!==t&&(y.add(v).removeClass(c.str).addClass(t),c.str=t)}function g(e){z=0,e&&e!==!1&&"nofollow"!==e?(W=t("."+te).filter(function(){var i=t.data(this,Y),n=new r(this,i);return n.get("rel")===e}),z=W.index(_.el),-1===z&&(W=W.add(_.el),z=W.length-1)):W=t(_.el)}function u(i){t(e).trigger(i),ae.triggerHandler(i)}function f(i){var o;if(!G){if(o=t(i).data(Y),_=new r(i,o),g(_.get("rel")),!$){$=q=!0,c(_.get("className")),y.css({visibility:"hidden",display:"block",opacity:""}),L=n(se,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),b.css({width:"",height:""}).append(L),D=T.height()+k.height()+b.outerHeight(!0)-b.height(),j=C.width()+H.width()+b.outerWidth(!0)-b.width(),A=L.outerHeight(!0),N=L.outerWidth(!0);var h=a(_.get("initialWidth"),"x"),s=a(_.get("initialHeight"),"y"),l=_.get("maxWidth"),f=_.get("maxHeight");_.w=(l!==!1?Math.min(h,a(l,"x")):h)-N-j,_.h=(f!==!1?Math.min(s,a(f,"y")):s)-A-D,L.css({width:"",height:_.h}),J.position(),u(ee),_.get("onOpen"),O.add(F).hide(),y.focus(),_.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",d,!0),ae.one(re,function(){e.removeEventListener("focus",d,!0)})),_.get("returnFocus")&&ae.one(re,function(){t(_.el).focus()})}var p=parseFloat(_.get("opacity"));v.css({opacity:p===p?p:"",cursor:_.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),_.get("closeButton")?B.html(_.get("close")).appendTo(b):B.appendTo("<div/>"),w()}}function p(){y||(V=!1,E=t(i),y=n(se).attr({id:Y,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(se,"Overlay").hide(),S=t([n(se,"LoadingOverlay")[0],n(se,"LoadingGraphic")[0]]),x=n(se,"Wrapper"),b=n(se,"Content").append(F=n(se,"Title"),I=n(se,"Current"),P=t('<button type="button"/>').attr({id:Z+"Previous"}),K=t('<button type="button"/>').attr({id:Z+"Next"}),R=n("button","Slideshow"),S),B=t('<button type="button"/>').attr({id:Z+"Close"}),x.append(n(se).append(n(se,"TopLeft"),T=n(se,"TopCenter"),n(se,"TopRight")),n(se,!1,"clear:left").append(C=n(se,"MiddleLeft"),b,H=n(se,"MiddleRight")),n(se,!1,"clear:left").append(n(se,"BottomLeft"),k=n(se,"BottomCenter"),n(se,"BottomRight"))).find("div div").css({"float":"left"}),M=n(se,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=K.add(P).add(I).add(R)),e.body&&!y.parent().length&&t(e.body).append(v,y.append(x,M))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return y?(V||(V=!0,K.click(function(){J.next()}),P.click(function(){J.prev()}),B.click(function(){J.close()}),v.click(function(){_.get("overlayClose")&&J.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;$&&_.get("escKey")&&27===e&&(t.preventDefault(),J.close()),$&&_.get("arrowKey")&&W[1]&&!t.altKey&&(37===e?(t.preventDefault(),P.click()):39===e&&(t.preventDefault(),K.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+te,i):t("."+te).live("click."+Z,i)),!0):!1}function w(){var e,o,r,h=J.prep,d=++le;if(q=!0,U=!1,u(he),u(ie),_.get("onLoad"),_.h=_.get("height")?a(_.get("height"),"y")-A-D:_.get("innerHeight")&&a(_.get("innerHeight"),"y"),_.w=_.get("width")?a(_.get("width"),"x")-N-j:_.get("innerWidth")&&a(_.get("innerWidth"),"x"),_.mw=_.w,_.mh=_.h,_.get("maxWidth")&&(_.mw=a(_.get("maxWidth"),"x")-N-j,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.get("maxHeight")&&(_.mh=a(_.get("maxHeight"),"y")-A-D,_.mh=_.h&&_.h<_.mh?_.h:_.mh),e=_.get("href"),Q=setTimeout(function(){S.show()},100),_.get("inline")){var c=t(e);r=t("<div>").hide().insertBefore(c),ae.one(he,function(){r.replaceWith(c)}),h(c)}else _.get("iframe")?h(" "):_.get("html")?h(_.get("html")):s(_,e)?(e=l(_,e),U=new Image,t(U).addClass(Z+"Photo").bind("error",function(){h(n(se,"Error").html(_.get("imgError")))}).one("load",function(){d===le&&setTimeout(function(){var e;t.each(["alt","longdesc","aria-describedby"],function(e,i){var n=t(_.el).attr(i)||t(_.el).attr("data-"+i);n&&U.setAttribute(i,n)}),_.get("retinaImage")&&i.devicePixelRatio>1&&(U.height=U.height/i.devicePixelRatio,U.width=U.width/i.devicePixelRatio),_.get("scalePhotos")&&(o=function(){U.height-=U.height*e,U.width-=U.width*e},_.mw&&U.width>_.mw&&(e=(U.width-_.mw)/U.width,o()),_.mh&&U.height>_.mh&&(e=(U.height-_.mh)/U.height,o())),_.h&&(U.style.marginTop=Math.max(_.mh-U.height,0)/2+"px"),W[1]&&(_.get("loop")||W[z+1])&&(U.style.cursor="pointer",U.onclick=function(){J.next()}),U.style.width=U.width+"px",U.style.height=U.height+"px",h(U)},1)}),U.src=e):e&&M.load(e,_.get("data"),function(e,i){d===le&&h("error"===i?n(se,"Error").html(_.get("xhrError")):t(this).contents())})}var v,y,x,b,T,C,H,k,W,E,L,M,S,F,I,R,K,P,B,O,_,D,j,A,N,z,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title}},Y="colorbox",Z="cbox",te=Z+"Element",ee=Z+"_open",ie=Z+"_load",ne=Z+"_complete",oe=Z+"_cleanup",re=Z+"_closed",he=Z+"_purge",ae=t("<a/>"),se="div",le=0,de={},ce=function(){function t(){clearTimeout(h)}function e(){(_.get("loop")||W[z+1])&&(t(),h=setTimeout(J.next,_.get("slideshowSpeed")))}function i(){R.html(_.get("slideshowStop")).unbind(s).one(s,n),ae.bind(ne,e).bind(ie,t),y.removeClass(a+"off").addClass(a+"on")}function n(){t(),ae.unbind(ne,e).unbind(ie,t),R.html(_.get("slideshowStart")).unbind(s).one(s,function(){J.next(),i()}),y.removeClass(a+"on").addClass(a+"off")}function o(){r=!1,R.hide(),t(),ae.unbind(ne,e).unbind(ie,t),y.removeClass(a+"off "+a+"on")}var r,h,a=Z+"Slideshow_",s="click."+Z;return function(){r?_.get("slideshow")||(ae.unbind(oe,o),o()):_.get("slideshow")&&W[1]&&(r=!0,ae.one(oe,o),_.get("slideshowAuto")?i():n(),R.show())}}();t[Y]||(t(p),J=t.fn[Y]=t[Y]=function(e,i){var n,o=this;if(e=e||{},t.isFunction(o))o=t("<a/>"),e.open=!0;else if(!o[0])return o;return o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Y)||{};t.data(this,Y,t.extend(i,e))}).addClass(te),n=new r(o[0],e),n.get("open")&&f(o[0])),o):o},J.position=function(e,i){function n(){T[0].style.width=k[0].style.width=b[0].style.width=parseInt(y[0].style.width,10)-j+"px",b[0].style.height=C[0].style.height=H[0].style.height=parseInt(y[0].style.height,10)-D+"px"}var r,h,s,l=0,d=0,c=y.offset();if(E.unbind("resize."+Z),y.css({top:-9e4,left:-9e4}),h=E.scrollTop(),s=E.scrollLeft(),_.get("fixed")?(c.top-=h,c.left-=s,y.css({position:"fixed"})):(l=h,d=s,y.css({position:"absolute"})),d+=_.get("right")!==!1?Math.max(E.width()-_.w-N-j-a(_.get("right"),"x"),0):_.get("left")!==!1?a(_.get("left"),"x"):Math.round(Math.max(E.width()-_.w-N-j,0)/2),l+=_.get("bottom")!==!1?Math.max(o()-_.h-A-D-a(_.get("bottom"),"y"),0):_.get("top")!==!1?a(_.get("top"),"y"):Math.round(Math.max(o()-_.h-A-D,0)/2),y.css({top:c.top,left:c.left,visibility:"visible"}),x[0].style.width=x[0].style.height="9999px",r={width:_.w+N+j,height:_.h+A+D,top:l,left:d},e){var g=0;t.each(r,function(t){return r[t]!==de[t]?(g=e,void 0):void 0}),e=g}de=r,e||y.css(r),y.dequeue().animate(r,{duration:e||0,complete:function(){n(),q=!1,x[0].style.width=_.w+N+j+"px",x[0].style.height=_.h+A+D+"px",_.get("reposition")&&setTimeout(function(){E.bind("resize."+Z,J.position)},1),t.isFunction(i)&&i()},step:n})},J.resize=function(t){var e;$&&(t=t||{},t.width&&(_.w=a(t.width,"x")-N-j),t.innerWidth&&(_.w=a(t.innerWidth,"x")),L.css({width:_.w}),t.height&&(_.h=a(t.height,"y")-A-D),t.innerHeight&&(_.h=a(t.innerHeight,"y")),t.innerHeight||t.height||(e=L.scrollTop(),L.css({height:"auto"}),_.h=L.height()),L.css({height:_.h}),e&&L.scrollTop(e),J.position("none"===_.get("transition")?0:_.get("speed")))},J.prep=function(i){function o(){return _.w=_.w||L.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function a(){return _.h=_.h||L.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if($){var d,g="none"===_.get("transition")?0:_.get("speed");L.remove(),L=n(se,"LoadedContent").append(i),L.hide().appendTo(M.show()).css({width:o(),overflow:_.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(b),M.hide(),t(U).css({"float":"none"}),c(_.get("className")),d=function(){function i(){t.support.opacity===!1&&y[0].style.removeAttribute("filter")}var n,o,a=W.length;$&&(o=function(){clearTimeout(Q),S.hide(),u(ne),_.get("onComplete")},F.html(_.get("title")).show(),L.show(),a>1?("string"==typeof _.get("current")&&I.html(_.get("current").replace("{current}",z+1).replace("{total}",a)).show(),K[_.get("loop")||a-1>z?"show":"hide"]().html(_.get("next")),P[_.get("loop")||z?"show":"hide"]().html(_.get("previous")),ce(),_.get("preloading")&&t.each([h(-1),h(1)],function(){var i,n=W[this],o=new r(n,t.data(n,Y)),h=o.get("href");h&&s(o,h)&&(h=l(o,h),i=e.createElement("img"),i.src=h)})):O.hide(),_.get("iframe")?(n=e.createElement("iframe"),"frameBorder"in n&&(n.frameBorder=0),"allowTransparency"in n&&(n.allowTransparency="true"),_.get("scrolling")||(n.scrolling="no"),t(n).attr({src:_.get("href"),name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0}).one("load",o).appendTo(L),ae.one(he,function(){n.src="//about:blank"}),_.get("fastIframe")&&t(n).trigger("load")):o(),"fade"===_.get("transition")?y.fadeTo(g,1,i):i())},"fade"===_.get("transition")?y.fadeTo(g,0,function(){J.position(0,d)}):J.position(g,d)}},J.next=function(){!q&&W[1]&&(_.get("loop")||W[z+1])&&(z=h(1),f(W[z]))},J.prev=function(){!q&&W[1]&&(_.get("loop")||z)&&(z=h(-1),f(W[z]))},J.close=function(){$&&!G&&(G=!0,$=!1,u(oe),_.get("onCleanup"),E.unbind("."+Z),v.fadeTo(_.get("fadeOut")||0,0),y.stop().fadeTo(_.get("fadeOut")||0,0,function(){y.hide(),v.hide(),u(he),L.remove(),setTimeout(function(){G=!1,u(re),_.get("onClosed")},1)}))},J.remove=function(){y&&(y.stop(),t[Y].close(),y.stop(!1,!0).remove(),v.remove(),G=!1,y=null,t("."+te).removeData(Y).removeClass(te),t(e).unbind("click."+Z).unbind("keydown."+Z))},J.element=function(){return t(_.el)},J.settings=X)})(jQuery,document,window);

!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action"),o="multipart/form-data",c=f.attr("enctype")||f.attr("encoding")||o;w.setAttribute("target",p),(!u||/post/i.test(u))&&w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var d in m.extraData)m.extraData.hasOwnProperty(d)&&l.push(e.isPlainObject(m.extraData[d])&&m.extraData[d].hasOwnProperty("name")&&m.extraData[d].hasOwnProperty("value")?e('<input type="hidden" name="'+m.extraData[d].name+'">').val(m.extraData[d].value).appendTo(w)[0]:e('<input type="hidden" name="'+d+'">').val(m.extraData[d]).appendTo(w)[0]);m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(h){var x=document.createElement("form").submit;x.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",c),r?w.setAttribute("target",r):f.removeAttr("target"),e(l).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t==k&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(y){i="parsererror",x.error=r=y||i}}catch(y){a("error caught: ",y),i="error",x.error=r=y||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,m,r])),d&&e.event.trigger("ajaxComplete",[x,m]),d&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),b=v.attr2("name"),b?p=b:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(m.extraData=m.extraData||{},m.extraData[b]=y.value,"image"==y.type&&(m.extraData[b+".x"]=w.clk_x,m.extraData[b+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,d);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i,o=this[0],s=this.attr("id"),u=t?o.getElementsByTagName("*"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),s&&(i=e(':input[form="'+s+'"]').get(),i.length&&(u=(u||[]).concat(i))),!u||!u.length)return a;var c,l,f,m,d,p,h;for(c=0,p=u.length;p>c;c++)if(d=u[c],f=d.name,f&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(a.push({name:f,value:e(d).val(),type:d.type}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(m=e.fieldValue(d,!0),m&&m.constructor==Array)for(r&&r.push(d),l=0,h=m.length;h>l;l++)a.push({name:f,value:m[l]});else if(n.fileapi&&"file"==d.type){r&&r.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:d.type});else a.push({name:f,value:"",type:d.type})}else null!==m&&"undefined"!=typeof m&&(r&&r.push(d),a.push({name:f,value:m,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"==x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&"undefined"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});

(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:6,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn);}else if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector});}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut});}
var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(Math.sqrt((pX-cX)*(pX-cX)+(pY-cY)*(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=true;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=false;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type==="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(!ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.on({'mouseenter.hoverIntent':handleHover,'mouseleave.hoverIntent':handleHover},cfg.selector);};})(jQuery);

(function($){$.extend($.fn,{pstrength:function(options){var options=$.extend({verdicts:["Too Short!","Very Weak","Weak","Medium","Strong","Very Strong"],colors:["#ccc","#f00","#c06","#f60","#3c0","#3f0"],values:[20,30,40,60,80,100],scores:[10,15,30,40],minchar:6,minCharText:"Minimum length is %d characters"},options);return this.each(function(){var infoarea=$(this).attr('id');$(this).after('<div id="'+infoarea+'_bar" class="progress" style="display: none;"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"><span  id="'+infoarea+'_text">0%<span></div></div>');if(options.minchar>0){$(this).after('<div class="help-block" id="'+infoarea+'_minchar">'+options.minCharText.replace('%d',options.minchar)+'</div>');}
options.$ctlBar=$("#"+infoarea+"_bar .progress-bar");options.$ctlText=$("#"+infoarea+"_text");$(this).keyup(function(){if(options.minchar<=$(this).val().length&&$("#"+infoarea+'_bar:hidden')){$("#"+infoarea+'_bar').show()}
$.fn.runPassword($(this).val(),infoarea,options);});});},runPassword:function(password,infoarea,options){nPerc=$.fn.checkPassword(password,options);var statusNum;if(nPerc<0){statusNum=0}
else if(nPerc<=options.scores[0]){statusNum=1}
else if(nPerc>options.scores[0]&&nPerc<=options.scores[1]){statusNum=2}
else if(nPerc>options.scores[1]&&nPerc<=options.scores[2]){statusNum=3}
else if(nPerc>options.scores[2]&&nPerc<=options.scores[3]){statusNum=4}
else{statusNum=5}
options.$ctlBar.css({width:options.values[statusNum]+"%"});options.$ctlBar.attr("aria-valuenow",options.values[statusNum]);options.$ctlBar.css({backgroundColor:options.colors[statusNum]});options.$ctlText.html(options.verdicts[statusNum]);},checkPassword:function(password,options)
{var intScore=0;var strVerdict=options.verdicts[0];if(password.length<options.minchar){intScore=(intScore-100)}
else if(password.length>options.minchar+1&&password.length<options.minchar+3){intScore=(intScore+6)}
else if(password.length>options.minchar+2&&password.length<options.minchar+4){intScore=(intScore+12)}
else if(password.length>options.minchar*2){intScore=(intScore+18)}
if(password.match(/[a-z]/)){intScore=(intScore+1)}
if(password.match(/[A-Z]/)){intScore=(intScore+5)}
if(password.match(/\d+/)){intScore=(intScore+5)}
if(password.match(/(.*[0-9].*[0-9].*[0-9])/)){intScore=(intScore+5)}
if(password.match(/.[!,@,#,$,%,^,&,*,?,_,~]/)){intScore=(intScore+5)}
if(password.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){intScore=(intScore+5)}
if(password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){intScore=(intScore+2)}
if(password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)){intScore=(intScore+2)}
if(password.match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~])|([!,@,#,$,%,^,&,*,?,_,~].*[a-zA-Z0-9])/)){intScore=(intScore+2)}
return intScore;}});})(jQuery);

(function($){var debugMode=false;$.fn.extend({getUniqueId:function(p,q,r){if(r===undefined){r='';}else{r='-'+r;}
return p+q+r;},accessibleTabs:function(config){var defaults={wrapperClass:'content',currentClass:'current',tabhead:'h4',tabheadClass:'tabhead',tabbody:'.tabbody',fx:'show',fxspeed:'normal',currentInfoText:'current tab: ',currentInfoPosition:'prepend',currentInfoClass:'current-info',tabsListClass:'tabs-list',syncheights:false,syncHeightMethodName:'syncHeight',cssClassAvailable:false,saveState:false,autoAnchor:false,pagination:false,position:'top',wrapInnerNavLinks:'',firstNavItemClass:'first',lastNavItemClass:'last',clearfixClass:'clearfix'};var keyCodes={37:-1,38:-1,39:+1,40:+1};var positions={top:'prepend',bottom:'append'};this.options=$.extend(defaults,config);var tabsCount=0;if($("body").data('accessibleTabsCount')!==undefined){tabsCount=$("body").data('accessibleTabsCount');}
$("body").data('accessibleTabsCount',this.size()+tabsCount);var o=this;return this.each(function(t){var el=$(this);var list='';var tabCount=0;var ids=[];$(el).wrapInner('<div class="'+o.options.wrapperClass+'"></div>');debug($(el).find(o.options.tabhead).children("a"))
$(el).find(o.options.tabhead).each(function(i){debug($(this))
var id='';var elId=$(this).attr('id');if(elId){if(elId.indexOf('accessibletabscontent')===0){return;}
id=' id="'+elId+'"';}
var tabId=o.getUniqueId('accessibletabscontent',tabsCount+t,i);var navItemId=o.getUniqueId('accessibletabsnavigation',tabsCount+t,i);ids.push(tabId);var navItemText=($(this).children("a").length>0)?$(this).children("a").html():$(this).html();var ariaLabel="";if($(this).attr("aria-label")){ariaLabel='aria-label="'+$(this).attr("aria-label")+'"'}
if(o.options.cssClassAvailable===true){var cssClass='';if($(this).attr('class')){cssClass=$(this).attr('class');cssClass=' class="'+cssClass+'"';}
list+='<li id="'+navItemId+'"><a'+id+''+cssClass+' href="#'+tabId+'" '+ariaLabel+'>'+navItemText+'</a></li>';}else{list+='<li id="'+navItemId+'"><a'+id+' href="#'+tabId+'" '+ariaLabel+'>'+navItemText+'</a></li>';}
$(this).attr({"id":tabId,"class":o.options.tabheadClass,"tabindex":"-1"});tabCount++;});if(o.options.syncheights&&$.fn[o.options.syncHeightMethodName]){$(el).find(o.options.tabbody)[o.options.syncHeightMethodName]();$(window).resize(function(){$(el).find(o.options.tabbody)[o.options.syncHeightMethodName]();});}
var tabs_selector='.'+o.options.tabsListClass;if(!$(el).find(tabs_selector).length){$(el)[positions[o.options.position]]('<ul class="'+o.options.clearfixClass+' '+o.options.tabsListClass+' tabamount'+tabCount+'"></ul>');}
$(el).find(tabs_selector).append(list);var content=$(el).find(o.options.tabbody);if(content.length>0){$(content).hide();$(content[0]).show();}
$(el).find("ul."+o.options.tabsListClass+">li:first").addClass(o.options.currentClass).addClass(o.options.firstNavItemClass).find('a')[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+'</span>').parents("ul."+o.options.tabsListClass).children('li:last').addClass(o.options.lastNavItemClass);var tabheads=$(el).find(o.options.tabhead);if(tabheads.length>0){$(tabheads[0]).addClass(o.options.currentClass).addClass(o.options.firstNavItemClass);$(tabheads[tabheads.length-1]).addClass(o.options.lastNavItemClass);}
if(o.options.wrapInnerNavLinks){$(el).find('ul.'+o.options.tabsListClass+'>li>a').wrapInner(o.options.wrapInnerNavLinks);}
$(el).find('ul.'+o.options.tabsListClass+'>li>a').each(function(i){$(this).click(function(event){event.preventDefault();el.trigger("showTab.accessibleTabs",[$(event.target)]);if(o.options.saveState&&$.cookie){$.cookie('accessibletab_'+el.attr('id')+'_active',i);}
$(el).find('ul.'+o.options.tabsListClass+'>li.'+o.options.currentClass).removeClass(o.options.currentClass).find("span."+o.options.currentInfoClass).remove();$(el).find(o.options.tabhead).removeClass(o.options.currentClass);$(this).blur();$(el).find(o.options.tabbody+':visible').hide();$(el).find(o.options.tabbody).eq(i)[o.options.fx](o.options.fxspeed);$(this)[o.options.currentInfoPosition]('<span class="'+o.options.currentInfoClass+'">'+o.options.currentInfoText+'</span>').parent().addClass(o.options.currentClass);$($(this).attr("href")).addClass(o.options.currentClass);$($(this).attr("href")).focus().keyup(function(event){if(keyCodes[event.keyCode]){o.showAccessibleTab(i+keyCodes[event.keyCode]);$(this).unbind("keyup");}});});$(this).focus(function(){$(document).keyup(function(event){if(keyCodes[event.keyCode]){o.showAccessibleTab(i+keyCodes[event.keyCode]);}});});$(this).blur(function(){$(document).unbind("keyup");});});if(o.options.saveState&&$.cookie){var savedState=$.cookie('accessibletab_'+el.attr('id')+'_active');debug($.cookie('accessibletab_'+el.attr('id')+'_active'));if(savedState!==null){o.showAccessibleTab(savedState,el.attr('id'));}}
if(o.options.autoAnchor&&window.location.hash){var anchorTab=$('.'+o.options.tabsListClass).find(window.location.hash);if(anchorTab.size()){anchorTab.click();}}
if(o.options.pagination){var m='<ul class="pagination">';m+='    <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>';m+='    <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li>';m+='</ul>';var tabs=$(el).find('.tabbody');var tabcount=tabs.size();tabs.each(function(idx){$(this).append(m);var next=idx+1;if(next>=tabcount){next=0;}
var previous=idx-1;if(previous<0){previous=tabcount-1;}
var p=$(this).find('.pagination');var previousEl=p.find('.previous');previousEl.find('span').text($('#'+ids[previous]).text());previousEl.find('a').attr('href','#'+ids[previous]).click(function(event){event.preventDefault();$(el).find('.tabs-list a').eq(previous).click();});var nextEl=p.find('.next');nextEl.find('span').text($('#'+ids[next]).text());nextEl.find('a').attr('href','#'+ids[next]).click(function(event){event.preventDefault();$(el).find('.tabs-list a').eq(next).click();});});}});},showAccessibleTab:function(index,id){debug('showAccessibleTab');var o=this;if(id){var el=$('#'+id);var links=el.find('ul.'+o.options.tabsListClass+'>li>a');el.trigger("showTab.accessibleTabs",[links.eq(index)]);links.eq(index).click();}else{return this.each(function(){var el=$(this);el.trigger("showTab.accessibleTabs");var links=el.find('ul.'+o.options.tabsListClass+'>li>a');el.trigger("showTab.accessibleTabs",[links.eq(index)]);links.eq(index).click();});}},showAccessibleTabSelector:function(selector){debug('showAccessibleTabSelector');var el=$(selector);if(el){if(el.get(0).nodeName.toLowerCase()==='a'){el.click();}else{debug('the selector of a showAccessibleTabSelector() call needs to point to a tabs headline!');}}}});function debug(msg,info){if(debugMode&&window.console&&window.console.log){if(info){window.console.log(info+': ',msg);}else{window.console.log(msg);}}}})(jQuery);

ACC.tkglobal={_autoload:[["passwordStrength",$('.password-strength').length>0],"bindToggleOffcanvas","bindToggleXsSearch","bindHoverIntentMainNavigation","initImager","backToHome"],passwordStrength:function(){$('.password-strength').pstrength({verdicts:[ACC.pwdStrengthTooShortPwd,ACC.pwdStrengthVeryWeak,ACC.pwdStrengthWeak,ACC.pwdStrengthMedium,ACC.pwdStrengthStrong,ACC.pwdStrengthVeryStrong],minchar:8,minCharText:ACC.pwdStrengthMinCharText});},bindToggleOffcanvas:function(){$(document).on("click",".js-toggle-sm-navigation",function(){ACC.tkglobal.toggleClassState($("main"),"offcanvas");ACC.tkglobal.toggleClassState($("html"),"offcanvas");ACC.tkglobal.toggleClassState($("body"),"offcanvas");ACC.tkglobal.resetXsSearch();});},bindToggleXsSearch:function(){$(document).on("click",".js-toggle-xs-search",function(){ACC.tkglobal.toggleClassState($(".site-search"),"active");ACC.tkglobal.toggleClassState($(".js-mainHeader .navigation--middle"),"search-open");});},resetXsSearch:function(){$('.site-search').removeClass('active');$(".js-mainHeader .navigation--middle").removeClass("search-open");},toggleClassState:function($e,c){$e.hasClass(c)?$e.removeClass(c):$e.addClass(c);return $e.hasClass(c);},bindHoverIntentMainNavigation:function(){$(".js-enquire-has-sub").hoverIntent(function(){var $this=$(this),itemWidth=$this.width();var $subNav=$this.find('.js_sub__navigation'),subNavWidth=$subNav.outerWidth();var $mainNav=$('.js_navigation--bottom'),mainNavWidth=$mainNav.width();console.log($subNav);var leftPos=$this.position().left+itemWidth/2-subNavWidth/2;var topPos=$this.position().top+$this.height();if(leftPos>0&&leftPos+subNavWidth<mainNavWidth){$subNav.css({"left":leftPos,"top":topPos,"right":"auto"});}else if(leftPos<0){$subNav.css({"left":0,"top":topPos,"right":"auto"});}else if(leftPos+subNavWidth>mainNavWidth){$subNav.css({"right":0,"top":topPos,"left":"auto"});}
$this.addClass("show-sub");},function(){$(this).removeClass("show-sub")});},initImager:function(elems){elems=elems||'.js-responsive-image';this.imgr=new Imager(elems);},reprocessImages:function(elems){elems=elems||'.js-responsive-image';if(this.imgr==undefined){this.initImager(elems);}else{this.imgr.checkImagesNeedReplacing($(elems));}},addGoogleMapsApi:function(callback){if(callback!=undefined&&$(".js-googleMapsApi").length==0){$('head').append('<script class="js-googleMapsApi" type="text/javascript" src="//maps.googleapis.com/maps/api/js?key='+ACC.config.googleApiKey+'&sensor=false&callback='+callback+'"></script>');}else if(callback!=undefined){eval(callback+"()");}},backToHome:function(){$(".backToHome").on("click",function(){var sUrl=ACC.config.contextPath;window.location=sUrl;});}};

ACC.availablesizes={_autoload:["bindAvailableSizesOnPDP"],bindAvailableSizesOnPDP:function(){if(location.hash==''||location.hash=='#tab-available'){$('.specifications__list #tab-available').trigger('click')}}};

var ASM=ASM||{};var sessionSec;var counter;var carts;function addASMHandlers(){revertAutocompleteNormalize();removeAsmAlert(3000);addCloseBtnHandler();addASMFormHandler();addHideBtnHandler();addCustomerListBtnHandler();customerListModalHandler();addCustomer360Handler();addGenericCustomer360Handler();if($("#sessionTimer").length&&$('#asmLogoutForm').length){startTimer();}
if($("#resetButton").length){$("#resetButton").click(function(){resetSession();});}
if(placeholderNotAvailable()){$('[placeholder]').focus(function(){var input=$(this);if(input.val()===input.attr('placeholder')){input.val('');input.removeClass('placeholder');}}).blur(function(){var input=$(this);if(input.val()===''||input.val()===input.attr('placeholder')){input.addClass('placeholder');input.val(input.attr('placeholder'));}}).blur();}
$('[placeholder]').blur(function(){var input=$(this);if((input.val()==='')&&(input.attr("name"))){toggleBind(false);}});if($('.ASM_alert_cart').length){$("input[name='cartId']").addClass('ASM-input-error');}
if($('.ASM_alert_customer').length){$("input[name='customerName']").addClass('ASM-input-error');}
if($('.ASM_alert_cred').length){$("input[name='username']").addClass('ASM-input-error');$("input[name='password']").addClass('ASM-input-error');}
if($('.ASM_alert_create_new').length){toggleCreateAccount(true);}
if($('#_asmLogin').length){var loginUser=$("#asmLoginForm input[name='username']");var min=1;if(loginUser.val().length>=min){loginUser.parent().addClass('checked');}}
$("#asmLoginForm input[name='username'], #asmLoginForm input[name='password']").keyup(function(){var min=1;var parentNode=$(this.parentNode);if(this.value.length>=(min)){parentNode.addClass('checked');checkSignInButton(parentNode);}
else{parentNode.removeClass('checked');checkSignInButton(parentNode);}});$("input[name='customerName']").keyup(function(e){$("input[name='customerId']").val("");validateNewAccount(this);$(this).removeData("hover");removeAsmHover();toggleBind(false);toggleStartSessionButton(this,false);if($(this).val().length<3){toggleCreateAccount(false);}});$("#_asmPersonifyForm input[name='cartId']").keyup(function(){if(this.value.length==6){formValidate(this,6,true,6);}
else if(this.value.length==7){formValidate(this,7,true,7);}
else{formValidate(this,10,true,10);}
if(isErrorDisplayed()){$("input[name='cartId']").removeClass('ASM-input-error');if($('.ASM_alert')){$('.ASM_alert').remove();}}});$("#_asmPersonifyForm input[name='customerName']").keyup(function(){if(isErrorDisplayed()){$("input[name='customerName']").removeClass('ASM-input-error');if($('.ASM_alert')){$('.ASM_alert').remove();}
if($(this).val()===""){$("input[name='cartId']").removeClass('ASM-input-error');toggleStartSessionButton($("input[name='cartId']"),true);$("input[name='customerId']").val("");}}
if($(this).val()===""){$("input[name='cartId']").val("");$("#asmAutoCompleteCartId").empty();}});$("#_asmPersonifyForm input[name='cartId']").blur(function(){var regEx=/^\s+$/;if(regEx.test($(this).val())){$(this).val('');formValidate(this,10,true,10);}});$("#_asmBindForm input[name='cartId']").keyup(function(e){checkCartIdFieldAndToggleBind(this);});$("#_asmBindForm input[name='cartId']").bind('paste',function(e){var inputField=this;setTimeout(function(){checkCartIdFieldAndToggleBind(inputField);},100);});$("#_asmPersonifyForm input[name='customerName'], input[name='customerId']").hover(function(){var item=($(this).attr('data-hover'))?jQuery.parseJSON($(this).attr('data-hover')):$(this).data("hover");var disabled=($(this).attr('data-hover'))?"disabled":"";if(!(item===null||item===undefined)){$(this).after($('<div>').attr('id','asmHover').addClass(disabled).append($('<span>').addClass('name').text(item.name),$('<span>').addClass('email').text(item.email),$('<span>').addClass('date').text(item.date),$('<span>').addClass('card').text(item.card)));}},function(){removeAsmHover();});$("#_asmPersonifyForm input[name='cartId']").autocomplete({source:function(request,response){response(carts);},appendTo:"#asmAutoCompleteCartId",autoFocus:true,minLength:0,select:function(event,ui){if(ui.item.value===""){event.preventDefault();}
toggleStartSessionButton(this,true);}});$("#_asmPersonifyForm input[name='cartId']").on('click, focus',function(){$("#_asmPersonifyForm input[name='cartId']").autocomplete('search','');});if($("input[name='customerName']").length>0){$("input[name='customerName']").autocomplete({source:function(request,response){$.ajax({url:ACC.config.encodedContextPath+"/assisted-service/autocomplete",dataType:"json",data:{customerId:request.term},success:function(data){response($.map(data,function(item)
{return{email:item.email,date:item.date,card:item.card,value:item.value,carts:item.carts};}));}});},minLength:3,appendTo:"#asmAutoComplete",select:function(event,ui){if(ui.item.value===null){event.preventDefault();return;}
toggleStartSessionButton(this,true);$(this).data('hover',{name:ui.item.value,email:ui.item.email,card:ui.item.card,date:ui.item.date});$("input[name='customerId']").val(ui.item.email);carts=ui.item.carts;if($("input[name='cartId']").attr("orig_value")===null){$("input[name='cartId']").val('');if(carts!==null){if(carts.length===1){$("input[name='cartId']").val(carts[0]);}else{$("input[name='cartId']").autocomplete('search','');$("input[name='cartId']").focus();}}else{carts=[{label:"No Existing Carts",value:""}];$("input[name='cartId']").autocomplete('search','');$("input[name='cartId']").focus();}}
checkCartIdFieldAndToggleBind($("input[name='cartId']")[0]);}}).data("ui-autocomplete")._renderItem=function(ul,item){if(item.value===null){toggleCreateAccount(true);return $("<li></li>").data("item.autocomplete",item).append($('<span class=noresult>').text(ASM_MESSAGES.customerIdNotFound)).appendTo(ul);}
else{toggleCreateAccount(false);}
return $("<li></li>").data("item.autocomplete",item).append($('<span>').addClass('name').text(item.value),$('<span>').addClass('email').text(item.email),$('<span>').addClass('date').text(item.date),$('<span>').addClass('card').text(item.card)).appendTo(ul);};}
if($("#_asmBindForm").length){var customerId=$("input[name='customerName']").attr('readonly');if(customerId==="readonly"){$(".ASM_icon-chain").removeClass('invisible').addClass('ASM_chain-bind');if($("#_asmBindForm input[name='customerId']").val()!==undefined&&$("#_asmBindForm input[name='customerId']").val()!==""){$(".js-customer360").removeAttr('disabled');}}}
if($(".add_to_cart_form").length&&$("#_asm input[name='cartId']").val()===""){$(".add_to_cart_form").submit(function(event){setTimeout(function(){var url=ACC.config.encodedContextPath+"/assisted-service/add-to-cart";$.post(url,function(data){$("#_asm").replaceWith(data);addASMHandlers();});},400);});}
enableAsmPanelButtons();}
$(document).ready(function(){var ASM=ASM||{};addASMHandlers();$(document).on("click",".js-select-store-label",function(e){$("#colorbox .js-pickup-component").addClass("show-store");colorboxResize();});$(document).on("click",".js-asm-store-finder-details-back",function(e){$("#colorbox .js-pickup-component").removeClass("show-store");});});function addASMFormHandler(){if(($)&&($(".asmForm").length)){$(".asmForm").each(function(){$(this).submit(function(){$(this).find('[placeholder]').each(function(){var input=$(this);if(input.val()===input.attr('placeholder')){input.val('');}});$.ajax({type:"POST",url:$(this).attr('action'),data:$(this).serialize(),success:function(data){$("#_asm").replaceWith(data);addASMHandlers();}});return false;});});}}
function addCloseBtnHandler(){$("#_asm .closeBtn").click(function(){$("#_asm").remove();var url=ACC.config.encodedContextPath+"/assisted-service/quit";$.post(url,function(data){var oldurl=window.location.href;var newurl=oldurl.replace("&asm=true","").replace("?asm=true&","?").replace("?asm=true","");window.location.replace(newurl);});});}
function addHideBtnHandler(){$("#_asm .ASM_control_collapse").click(function(){$("#_asm").toggleClass("ASM-collapsed");});}
function startTimer(){sessionSec=timer;clearInterval(counter);counter=setInterval(timerFunc,1000);}
function timerFunc(){if(sessionSec<=0){clearInterval(counter);finishASMagentSession();return;}
sessionSec=sessionSec-1;var min=Math.floor(sessionSec/60);var sec=sessionSec%60;if(min<10)
{min="0"+min;}
if(sec<10)
{sec="0"+sec;}
$("#sessionTimer .ASM_timer_count").html(min+":"+sec);}
function resetSession(){var request=$.ajax({url:ACC.config.encodedContextPath+"/assisted-service/resetSession",type:"POST"});request.done(function(msg){sessionSec=timer+1;});request.fail(function(jqXHR,textStatus){$('#errors').empty();$('#errors').append("Request failed: "+textStatus);});}
function finishASMagentSession(){$.ajax({url:ACC.config.encodedContextPath+"/assisted-service/logoutasm",type:"POST",success:function(data){$("#_asm").replaceWith(data);addASMHandlers();}});}
function isStartEmulateButtonPresent(){return $(".ASM-btn-start-session").length===1;}
function enableAsmPanelButtons(){$('div[id="_asm"] button').not(".js-customer360, .ASM-btn-start-session, .ASM-btn-create-account, .ASM-btn-login").removeAttr('disabled');if(isStartEmulateButtonPresent()){if($("#_asmPersonifyForm input[name='customerId']").val()!==""){$("#_asmPersonifyForm input[name='customerId']").parent().addClass("checked");}
formValidate($("#_asmPersonifyForm input[name='cartId']")[0],10,true,10);}}
function placeholderNotAvailable(){var i=document.createElement('input');return!('placeholder'in i);}
function removeAsmHover(){$('#asmHover').remove();}
function toggleCreateAccount(activate){var bindIcon=$(".ASM_icon-chain");var createButton=$("#_asmCreateAccountForm button.ASM-btn-create-account[type='submit']");if(activate){createButton.removeClass('hidden');bindIcon.removeClass('invisible');}else{createButton.addClass('hidden');bindIcon.addClass('invisible');}}
function toggleActivationState(button,activate){if(activate){button.removeAttr('disabled');}
else{button.attr('disabled','');}}
function checkSignInButton(el){var signInBtn=$("#asmLoginForm button[type='submit']");var checkSum=$(el).parent().find('.checked').length;if(checkSum>1){toggleActivationState(signInBtn,true);}
else{toggleActivationState(signInBtn,false);}}
function checkStartSessionButton(el){toggleStartSessionButton(el,false);var checkSum=$(el.parentNode).siblings('.checked').length;if(checkSum>0){toggleActivationState($("button.ASM-btn-start-session"),true);}}
function checkCartIdFieldAndToggleBind(cartIdField){if(!$(cartIdField).hasClass('placeholder')&&($("input[name='customerName']").val().length>0)&&($("input[name='customerId']").val().length>0)&&!isNaN(cartIdField.value)&&(cartIdField.value.length===10)){$("#_asmBindForm button[type='submit']").removeClass('hidden');$(".ASM_icon-chain").removeClass('invisible');return;}
$("#_asmBindForm button[type='submit']").addClass('hidden');$(".ASM_icon-chain").addClass('invisible');}
function toggleBind(activate){if($("#_asmBindForm").length){var bindIcon=$(".ASM_icon-chain");var bindButton=$("#_asmBindForm button.ASM-btn-bind-cart[type='submit']");if(activate){bindButton.removeClass('hidden');bindIcon.removeClass('invisible');}else{bindButton.addClass('hidden');if($('.ASM-btn-create-account').hasClass('hidden')){bindIcon.addClass('invisible');}}}}
function toggleStartSessionButton(el,activate){var checkedItem=$(el).parent();var button=$("button.ASM-btn-start-session");if(activate){button.removeAttr('disabled');checkedItem.addClass("checked");}else{button.attr('disabled','');checkedItem.removeClass("checked");}}
function formValidate(el,min,number,max){if(!$(el).hasClass('placeholder')){if($(el).hasClass("ASM-input-error")){toggleStartSessionButton(el,false);return false;}
if((number!==false)&&isNaN(el.value)){toggleStartSessionButton(el,false);return false;}
if(el.value.length>=(min)){toggleStartSessionButton(el,true);if(max!==undefined&&el.value.length>(max)){toggleStartSessionButton(el,false);}}
else if(el.value.length===0){checkStartSessionButton(el);}
else{toggleStartSessionButton(el,false);return false;}
return true;}
return false;}
function validateEmail(mailAddress){return($('<input>').attr({type:'email',required:'required'}).val(mailAddress))[0].checkValidity()&&(mailAddress.indexOf(".")>0);}
function validateName(name){var split=name.trim().split(/\s+/);return!isBlank(split[0])&&!isBlank(split[1]);}
function isBlank(str){return(!str||0===str.length);}
function validateNewAccount(el){var createAccountButton=$("#_asmCreateAccountForm button.ASM-btn-create-account[type='submit']");var customerValues=el.value.split(', ');var IdInput=$("#_asmCreateAccountForm input[name='customerId']");var NameInput=$("#_asmCreateAccountForm input[name='customerName']");if(customerValues.length>1){var validName=validateName(customerValues[0]);var validMail=validateEmail(customerValues[1]);if(validName&&validMail){toggleActivationState(createAccountButton,true);IdInput.val(customerValues[1].replace(/^\s\s*/,'').replace(/\s\s*$/,''));NameInput.val(customerValues[0]);}
else{toggleActivationState(createAccountButton,false);return false;}}
else{toggleActivationState(createAccountButton,false);return false;}}
function revertAutocompleteNormalize(){$.ui.autocomplete.prototype._normalize=function(a){if(a.length&&a[0].label&&a[0].value){return a;}
return $.map(a,function(b){if(typeof b==="string"){return{label:b,value:b};}
return $.extend({label:b.label||b.value,value:b.value||b.label},b);});};}
function isErrorDisplayed(){return $('.ASM_alert').length;}
function addCustomerListBtnHandler(){$(".js-customer-list-btn").removeClass('disabled');$(document).on("click",".js-customer-list-btn",function(e){e.preventDefault();populateCustomerListModal($(this).data('actionurl'),'.js-customer-list-modal-content',addCustomerListSelect);});}
function openCustomer360Colorbox(colorboxTarget){colorboxTarget.colorbox({inline:'true',className:'ASM_customer360-modal',width:"100%",maxWidth:"1200px",close:'<span class="ASM_icon ASM_icon-close"></span>',transition:'none',scrolling:false,opacity:0.7,top:10,onOpen:function(){customer360Callback();$(window).on("resize",colorboxResize);},onClosed:function(){$(window).off("resize",colorboxResize);}});}
function colorboxResize(){$.colorbox.resize();}
function addCustomer360Handler(){openCustomer360Colorbox($(".js-customer360"));}
function addGenericCustomer360Handler(){if($("#enable360View").val()){openCustomer360Colorbox($);}}
function customer360Callback(){var loader="<div class='loader'>Loading..</div>";$("#cboxLoadedContent").html(loader).show();$.ajax({url:ACC.config.encodedContextPath+"/assisted-service-aif/customer360",type:"GET",success:function(data)
{$("#cboxLoadedContent").append(data);$.colorbox.resize();},error:function(xht,textStatus,ex)
{console.error("Failed to load Customer 360. %s",ex);document.location.reload();}});}
function loadCustomer360Fragment(params)
{return $.ajax({url:ACC.config.encodedContextPath+"/assisted-service-aif/customer360Fragment",timeout:params.timeout,type:params.method,data:params,success:function(data)
{$("#"+params.fragmentId).html(data);$.colorbox.resize();},error:function(xht,textStatus,ex)
{if(textStatus==='timeout')
{$("#"+params.fragmentId).html("Widget timeout!");}
else
{console.error("Failed to get widget data! %s",ex);$("#"+params.fragmentId).html("Failed to get widget data!");}}});}
function asmAifSectionClickHandler(){$(document).on("click",".asm__customer360__menu li",function(e){e.preventDefault();if(!$(this).hasClass('nav-tabs-mobile-caret')){aifSelectSection($(this).index());}});}
function aifSelectLastSection(){var index=0;if(sessionStorage.getItem("lastSection")){var lastSection=JSON.parse(sessionStorage.getItem("lastSection"));if(getCurrentEmulatedCustomerId()===lastSection.userId){index=lastSection.sectionId;}}
$($(".asm__customer360__menu li[role='presentation']")[index]).addClass("active");aifSelectSection(index);}
function aifSelectSection(index){$("#sectionPlaceholder").hide();$("#longLoadExample").show();var sectionId=$(".asm__customer360__menu li").get(index).getAttribute("value");sessionStorage.setItem("lastSection",JSON.stringify({userId:getCurrentEmulatedCustomerId(),sectionId:index}));$.ajax({url:ACC.config.encodedContextPath+"/assisted-service-aif/customer360section?sectionId="+sectionId,type:"GET",success:function(data)
{$("#sectionPlaceholder").html(data);$("#longLoadExample").hide();$("#sectionPlaceholder").show();$.colorbox.resize();}});resetSession();}
function getCurrentEmulatedCustomerId(){if($("#_asmBindForm input[name='customerId']").length){return $("#_asmBindForm input[name='customerId']").val();}
return"anonymous";}
function getCustomerListSearchUrl(){var targetUrl=$(".js-customer-list-sorting").data('sort-url');targetUrl+=$(".ASM_customer-list-modal .sort-refine-bar .form-control").val();var query=$("#ASM_customer-list-queryInput").val();var uriEncodedquery=encodeURIComponent(query);targetUrl+='&query='+uriEncodedquery;return targetUrl;}
function customerListModalHandler(){$(document).on("click",".ASM_customer-list-modal .pagination a",function(e){e.preventDefault();populateCustomerListModal($(this).attr('href'),".asm-account-section",replaceCustomerListTable);});$(document).on("click","#ASM_customer-list-sortOptions .sortOption",function(e){e.preventDefault();var selectedOption=$(this).data('value');var previouslySelectedOption=$(".ASM_customer-list-modal .sort-refine-bar .form-control").val();if(selectedOption!==previouslySelectedOption)
{$(".ASM_customer-list-modal .sort-refine-bar .form-control").val(selectedOption);var targetUrl=getCustomerListSearchUrl();populateCustomerListModal(targetUrl,".asm-account-section",replaceCustomerListTable);}});$(document).on("keypress","#ASM_customer-list-queryInput",function(event){if(event.keyCode===13){$("#ASM_customer-list-searchButton").click();return false;}
else{return true;}});$(document).on("click","#ASM_customer-list-searchButton",function(e){e.preventDefault();var targetUrl=getCustomerListSearchUrl();populateCustomerListModal(targetUrl,".asm-account-section",replaceCustomerListTable);});$(document).on("change",".ASM_customer-list-modal .sort-refine-bar .form-control",function(e){e.preventDefault();var targetUrl=getCustomerListSearchUrl();populateCustomerListModal(targetUrl,".asm-account-section",replaceCustomerListTable);});$(document).on("change",".js-customer-list-select",function(e){e.preventDefault();var targetUrl=$(this).data('search-url');targetUrl+=$(this).val();var request=populateCustomerListModal(targetUrl,".asm-account-section",replaceCustomerListTable);request.done(function(){$.colorbox.resize();});});}
function addCustomerListSelect(componentToUpdate,data){var selector=$(data).find('.js-customer-list-select');$(componentToUpdate).html(data);var searchUrl=$(data).find('.js-customer-list-select').data('search-url');if(selector[0].options.length>0)
{searchUrl+=selector[0].options[0].value;}
var request=populateCustomerListModal(searchUrl,componentToUpdate,appendCustomerListTable);request.done(function(){ACC.colorbox.open("",{href:".js-customer-list-modal-content",inline:true,className:'ASM_customer-list-modal',width:"100%",maxWidth:"1200px",close:'<span class="ASM_icon ASM_icon-close"></span>',transition:'none',scrolling:false,opacity:0.7,top:10,onOpen:function(){$(window).on("resize",colorboxResize);},onClosed:function(){$(window).off("resize",colorboxResize);}});});}
function appendCustomerListTable(componentToUpdate,data){$(componentToUpdate).append(data);}
function replaceCustomerListTable(componentToUpdate,data){$(componentToUpdate).html(data);}
function populateCustomerListModal(targetUrl,componentToUpdate,callFunction){var method="GET";return $.ajax({url:targetUrl,type:method,success:function(data)
{callFunction(componentToUpdate,data);},error:function(xht,textStatus,ex)
{console.error("Failed to get customer list. %s",ex);document.location.reload();}});}
function getAifTablePageSize(){var pagesNumber=5;if($(window).width()<668){pagesNumber=10;}
return pagesNumber;}
function copyToClipBoard(text){$("#asmCopyHoldtext").val(text);$("#asmCopyHoldtext").show();$("#asmCopyHoldtext").select();try{return document.execCommand("copy");}catch(ex){console.warn("Copy to clipboard failed.",ex);return false;}finally{$("#asmCopyHoldtext").hide();}}
function addRatesTableSorterParser(){$.tablesorter.addParser({id:'rates',is:function(s){return false;},format:function(s,table,cell){return Math.floor($(cell).attr('data-text')*10);},type:'numeric'});}
function removeAsmAlert(delay){setTimeout(function(){$(".ASM_alert").fadeOut("slow");},delay);}
ACC.assistedservicestorefront={buildArrayValues:function(variableArray,value){variableArray.push(value);return variableArray;}};$(function(){if($(".js-ASM-collapseBtn").length>0){var onDragging=false;var startPosition=readASMcollapseCookie();if(startPosition){$(".js-ASM-collapseBtn").css("left",startPosition.position+"%");if(startPosition.state){$("#_asm").addClass("asm-collapsed");}}
$("#_asm").show();$(".js-ASM-collapseBtn").draggable({cancel:'.no-drag',axis:"x",containment:".collapseBtn-wrapper",delay:300,distance:10,opacity:0.8,start:function(){onDragging=true;$(".js-ASM-collapseBtn-wrapper").addClass("active");},stop:function(){onDragging=false;$(".js-ASM-collapseBtn-wrapper").removeClass("active");saveCollapseBtn();}});$(document).on("mouseup",".js-ASM-collapseBtn",function(){if(!onDragging){if($("#_asm").hasClass("asm-collapsed")){$("#_asm").removeClass("asm-collapsed");}else{$("#_asm").addClass("asm-collapsed");}
saveCollapseBtn();}});function saveCollapseBtn(){var pos=$(".js-ASM-collapseBtn").offset().left;var parentWidth=$(".js-ASM-collapseBtn-wrapper").width();var obj={position:pos/(parentWidth/100),state:$("#_asm").hasClass("asm-collapsed")};document.cookie="ASMcollapseBtn="+encodeURIComponent(JSON.stringify(obj))+"; path=/";}
function readASMcollapseCookie(){var nameEQ="ASMcollapseBtn=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===' '){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)===0){return jQuery.parseJSON(decodeURIComponent(c.substring(nameEQ.length,c.length)));}}
return null;}}});$(function(){$(document).on("click",".js-dropdown",function(e){e.preventDefault();var $e=$(this).parent();if($e.hasClass("open")){$e.removeClass("open");}else{$e.addClass("open");}});$(document).on("click",".js-customer-360-tab",function(e){e.preventDefault();$(this).parent().addClass("active").siblings().removeClass("active");});});

function mtrListDivShow(orderCode){var id=orderCode.id;$.ajax({url:"/my-account/mtrList",type:"GET",data:{orderCode:id},success:function(response){$(".mtr-default-list").html(response)},error:function(response){$('.error-div').show()}})}
function mtrResultShow(mtr){var id=mtr.id;$.ajax({url:"/my-account/mtrResult/"+id,type:"GET",data:{mtrId:id},success:function(data){location.href='/my-account/mtrResult/'+id},error:function(){}})};

let clientID=document.getElementById("addSearchClientId").value;var personalisationEnabled=true;var cookieExpiryTime=180;clientID=clientID&&clientID!=""?clientID:"1116ec6d94ee7d8dca095ea83a9933df";var client1=new AddSearchClient(clientID);client1.enablePersonalizationTracking(personalisationEnabled,cookieExpiryTime);client1.consentAddSearchCookie(true);client1.setUserToken(client1.getUserTokenInPersonalization());var searchui1=new AddSearchUI(client1,{matchAllQuery:!1});searchui1.searchField({containerId:"searchfield-container",placeholder:"Search Online Metals",searchAsYouType:!0,icon:"true",autofocus:!1});client1.setPaging(1,10,"relevance","desc");client1.setCategoryFilters("5xpid");searchui1.registerHandlebarsHelper("getPid",(function(e){return e.categories[e.categories.length-1].replace(/\d+x/,"")}));searchui1.registerHandlebarsHelper("createClassNameBasedOnCategories",function(e){if(e)return e.replace(/ /g,"-")});searchui1.registerHandlebarsHelper("ne",function(e,t){return e!==t});window.addsearch_title_filters||(window.addsearch_title_filters=[]);var s=window.addsearch_title_filters.reduce((function(e,t){return e&&(e=e.concat("|")),e.concat(t.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&"))}),"");var d=new RegExp(s,"gi");searchui1.registerHandlebarsHelper('filterPrefix',function(param){return param?param.toString().replace(d,""):"";});searchui1.searchResults({containerId:"searchresults-products",template:'\n  <div class="addsearch-searchresults">\n    <div class="hits-wrapper">\n    {{#each hits}}\n      {{#if (ne (filterPrefix2 custom_fields.second_title)  \'\')}}\n <div class="hit{{#equals type "PROMOTED"}} promoted{{/equals}}">\n      <div class="category-banner">PRODUCT</div>\n      \n        <div class="hit-inner-wrapper">\n        {{#if custom_fields.page_category}}\n        <div class="image-wrapper">\n         {{> searchResultImageTemplate}}\n         </div>\n         {{/if}}\n        <div class="hit-inner-cell">\n          <h3>\n          <a href="{{url}}" data-analytics-click="{{id}}">{{filterPrefix custom_fields.second_title}}</a>\n        </h3>\n          {{#if custom_fields.standard}}\n            <div class="highlight">           \n              {{custom_fields.standard}}\n            </div>\n          {{/if}}\n          {{#if custom_fields.page_category}}     \n            <div class="product-id">\n              PID: {{getPid this}}\n            </div>\n          {{/if}}\n          {{#if custom_fields.price}}\n          <div class="as-price">\n            Starting at <span>{{formatPrice custom_fields.price "en-US" "USD"}}</span>\n          </div>\n        {{/if}}\n          </div>\n          \n        </div>\n      </div>\n  {{/if}}\n  {{/each}}\n    </div>\n  </div>\n',categoryAliases:{buy:"Productzzz"}});searchui1.loadMore({containerId:"loadmore_products",type:AddSearchUI.LOAD_MORE_TYPE.INFINITE_SCROLL,infiniteScrollElement:document.querySelector("#search-widget-container")});var client2=new AddSearchClient(clientID);client2.enablePersonalizationTracking(personalisationEnabled,cookieExpiryTime);client2.consentAddSearchCookie(true);client2.setUserToken(client2.getUserTokenInPersonalization());var searchui2=new AddSearchUI(client2,{matchAllQuery:!1});searchui2.searchField({containerId:"searchfield-container-hidden",placeholder:"Keyword..",searchAsYouType:!0,icon:"true",autofocus:!1});var d2=new RegExp(s,"gi");searchui2.registerHandlebarsHelper('filterPrefix2',function(param){return param?param.toString().replace(d2,"").split('-Part')[0]:'';});client2.setPaging(1,17,"relevance","desc");client2.setCategoryFilters("!5xpid, !0xonlinemetals.zendesk.com, !1xmedias");searchui2.searchResults({containerId:"searchresults-others",template:'\n  <div class="addsearch-searchresults">\n    <div class="hits-wrapper">\n    {{#each hits}}\n     {{#if (ne (filterPrefix2 custom_fields.h1_title)  \'\')}}\n <div class="hit {{#equals type "PROMOTED"}} promoted{{/equals}}{{createClassNameBasedOnCategories (selectCategory this)}} ">\n    {{#if (ne (selectCategory this) \'buy\')}}\n       <div class="category-banner">OTHER RESOURCES</div>  \n    {{else}}\n       <div class="category-banner">PRODUCT CATEGORY</div>    \n    {{/if}}\n       <div class="hit-inner-wrapper">\n        <h3>\n         <a href="{{url}}" data-analytics-click="{{id}}">{{filterPrefix2 custom_fields.h1_title}}</a>\n        </h3>\n      </div>\n      </div>\n    {{/if}}\n  {{/each}}\n    </div>\n  </div>\n',categoryAliases:{buy:"Productzzz","0xmetalpress.onlinemetals.com":"blog"},categorySelectionFunction:function(e,t){if(t&&t[e.categories[0]])return t[e.categories[0]];var n=e.categories||[],r="",i=1;do{r=(r=n.length>i?n[i]:"").replace(/^[0-9]+[x]{1}/,""),i++}while(r.length<3&&n.length>i);return r.replace(/[-_]+/g," ")}});searchui2.loadMore({containerId:"loadmore_others",type:AddSearchUI.LOAD_MORE_TYPE.INFINITE_SCROLL,infiniteScrollElement:document.querySelector("#search-widget-container")});searchui1.start();searchui2.start();document.addEventListener("click",(function(){document.querySelector("#search-widget-container").classList.add("as-hidden")}));document.querySelector("#search-widget-container")&&document.querySelector("#search-widget-container").addEventListener("click",(function(e){return e.stopPropagation()}));var inputElem=document.querySelector("#searchfield-container input");inputElem.addEventListener("focus",(function(){inputElem.value.length>0?document.querySelector("#search-widget-container").classList.remove("as-hidden"):document.querySelector("#search-widget-container").classList.add("as-hidden");}));inputElem.addEventListener("click",(function(e){return e.stopPropagation()}));inputElem.addEventListener("input",(function(e){var t=e.target.value,n=document.createEvent("Event"),r=document.querySelector("#searchfield-container-hidden input");n.initEvent("input",!0,!0),r.value=t,r.dispatchEvent(n);const currentUrl=window.location.href;const url=new URL(currentUrl);const params=new URLSearchParams(url.search);params.delete('search');inputElem.value.length>0?document.querySelector("#search-widget-container").classList.remove("as-hidden"):(document.querySelector("#search-widget-container").classList.add("as-hidden"),setTimeout(()=>window.history.replaceState({},'',`${url.pathname}`),3000));}));
